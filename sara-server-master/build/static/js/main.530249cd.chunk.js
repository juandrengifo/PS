(this.webpackJsonpsara_app=this.webpackJsonpsara_app||[]).push([[0],{100:function(e,t,a){e.exports={bgWhite:"SPPassButton_bgWhite__5Ltrk",btn:"SPPassButton_btn__194iE",btnInv:"SPPassButton_btnInv__1o0Ms",icon:"SPPassButton_icon__3VFz4"}},101:function(e,t,a){e.exports={container:"STField_container__kHP5P",optionCol:"STField_optionCol__2DSLX",optionRow:"STField_optionRow__2-rBu",title:"STField_title__2uhn3",subtitle:"STField_subtitle__ZguRN"}},110:function(e,t,a){e.exports={comment:"SComments_comment__2BuSV",commentContainer:"SComments_commentContainer__2OKNy",container:"SComments_container__3G_Ox",date:"SComments_date__1ookR"}},111:function(e,t,a){e.exports={btnContainer:"SPasswordRecover_btnContainer__3gMeU",container:"SPasswordRecover_container__2-BNE",doneMessage:"SPasswordRecover_doneMessage__O9IDS",infoText:"SPasswordRecover_infoText__1bbvb"}},112:function(e,t,a){e.exports={container:"SFooterBar_container__1gSB7",copyright:"SFooterBar_copyright__ESh8s",innerContainer:"SFooterBar_innerContainer__1lM3b",logo:"SFooterBar_logo__2D-6T"}},113:function(e,t,a){e.exports={container:"SPCollectionsPage_container__3W7c6",score:"SPCollectionsPage_score__3fwFX",scoreIcon:"SPCollectionsPage_scoreIcon__1VAHF",title:"SPCollectionsPage_title__auwrN"}},114:function(e,t,a){e.exports={col:"SPCollection_col__2K7XX",container:"SPCollection_container__27A6j",rowContainer:"SPCollection_rowContainer__29q42",title:"SPCollection_title__3Uf03"}},115:function(e,t,a){e.exports={container:"STOption_container__2b_7b",inner:"STOption_inner__1PEEH",name:"STOption_name__oY1xP",selected:"STOption_selected__14b_j"}},116:function(e,t,a){e.exports={marginTop:"SSearch_marginTop__lV0l0",search:"SSearch_search__BEsUo",searchContainer:"SSearch_searchContainer__3Dpat",searchIcon:"SSearch_searchIcon__3B77W"}},117:function(e,t,a){e.exports={btnCreate:"SAUsersPage_btnCreate__3E2Im",listContainer:"SAUsersPage_listContainer__KhrhP",title:"SAUsersPage_title__ePhGC",toolsContainer:"SAUsersPage_toolsContainer__2f4UM"}},118:function(e,t,a){e.exports={container:"SAUpdateUserPage_container__33K79",formContainer:"SAUpdateUserPage_formContainer__2_Iev",title:"SAUpdateUserPage_title__zc6GE",userData:"SAUpdateUserPage_userData__1NyED"}},138:function(e,t,a){e.exports={body:"SModal_body__KRael",modal:"SModal_modal__EefRS",title:"SModal_title__rzR2g"}},139:function(e,t,a){e.exports={absolute:"SVideo_absolute__39LAH",container:"SVideo_container__LFvgA",video:"SVideo_video__2EZSC"}},140:function(e,t,a){e.exports={container:"SFeatures_container__TuY4d",innerContainer:"SFeatures_innerContainer__1T4yv",title:"SFeatures_title__2D6NC"}},141:function(e,t,a){e.exports={container:"STLayout_container__3lOal",outerContainer:"STLayout_outerContainer__nbEQl",rowContainer:"STLayout_rowContainer__ObmR8"}},142:function(e,t,a){e.exports={container:"SPLayout_container__3A-ua",outerContainer:"SPLayout_outerContainer__1BQ8D",rowContainer:"SPLayout_rowContainer__2WCxn"}},143:function(e,t,a){e.exports={btnContainer:"SPassword_btnContainer__1l-cK",container:"SPassword_container__2IKTu"}},144:function(e,t,a){e.exports={btn:"STMechanics_btn__Tqd2i",container:"STMechanics_container__1tM1K",selected:"STMechanics_selected__2D98J"}},176:function(e,t,a){e.exports={container:"SEmpty_container__17HkQ",text:"SEmpty_text__7_-8I"}},177:function(e,t,a){e.exports={carousel:"STAvatarPanel_carousel__13Etq",container:"STAvatarPanel_container__1VzPC"}},178:function(e,t,a){e.exports={border:"SCarousel_border__23GFp",style:"SCarousel_style__4G1i5"}},179:function(e,t,a){e.exports={container:"SAvatarItem_container__SylU4",image:"SAvatarItem_image__GThs2"}},180:function(e,t,a){e.exports={listContainer:"SPActivitiesPage_listContainer__1zQ0g",title:"SPActivitiesPage_title__st4Q8"}},181:function(e,t,a){e.exports={container:"STFeedbackPage_container__3IMrm",title:"STFeedbackPage_title__cOZYB"}},182:function(e,t,a){e.exports={completeInput:"SDatePicker_completeInput__3Qnnh",input:"SDatePicker_input__186S_"}},233:function(e,t,a){e.exports={style:"SMenuLink_style__3mouR"}},237:function(e,t,a){e.exports={btnClose:"SPPlayPage_btnClose__3bovR",closeContainer:"SPPlayPage_closeContainer__prnKn",container:"SPPlayPage_container__1JXN7"}},238:function(e,t,a){e.exports={container:"STEvolution_container__1JFiX"}},239:function(e,t,a){e.exports={container:"STSessions_container__tZ9Rz"}},24:function(e,t,a){e.exports={container:"Charts_container__3RhdX",description:"Charts_description__2a5hw",mt20:"Charts_mt20__3ckh6",percentage:"Charts_percentage__bjF4d",phrasePercentage:"Charts_phrasePercentage__vJ19C",score:"Charts_score___ZO4Z",subtitle:"Charts_subtitle__15rOk",title:"Charts_title__3d5vo",word:"Charts_word__2sd5u",wordsContainer:"Charts_wordsContainer__1Nt_G"}},240:function(e,t,a){e.exports={container:"STHistorical_container__3XXqi"}},250:function(e,t,a){},253:function(e,t,a){},305:function(e,t){},31:function(e,t,a){e.exports={btn:"STPatient_btn__2j08s",btnActive:"STPatient_btnActive__1pd4a",link:"STPatient_link__tNTSf",container:"STPatient_container__2X2DS",height:"STPatient_height__1E83-",padding:"STPatient_padding__T-Vv2",thumb:"STPatient_thumb__1_vlU",uimage:"STPatient_uimage__3am3r",uinfo:"STPatient_uinfo__2X0Mb",uname:"STPatient_uname__v9FdO"}},39:function(e,t,a){e.exports={btn:"STACustomizer_btn__36HiN",col:"STACustomizer_col__3fIsC",container:"STACustomizer_container__3fiR_",header:"STACustomizer_header__2M7hK",rounded:"STACustomizer_rounded__3mSP5",selected:"STACustomizer_selected__1PA7P",title:"STACustomizer_title__90vX_"}},43:function(e,t,a){e.exports={btn:"SHero_btn__ed6WQ",btnContainer:"SHero_btnContainer__1PllE",container:"SHero_container__3qLwg",innerContainer:"SHero_innerContainer__1OoLy",link:"SHero_link__2NUmS",outerContainer:"SHero_outerContainer__3f7_s",subtitle:"SHero_subtitle__eo5s7",title:"SHero_title__qCU9U"}},44:function(e,t,a){e.exports={container:"STActivity_container__r4OSJ",date:"STActivity_date__IsoC9",description:"STActivity_description__cO8RH",btnEvolution:"STActivity_btnEvolution__3bVYL",aimage:"STActivity_aimage__1FOej",innerContainer:"STActivity_innerContainer__1b6Cz",nameContainer:"STActivity_nameContainer__2xVy_",rightContainer:"STActivity_rightContainer__3nmb0",syntContainer:"STActivity_syntContainer__AsPHV",title:"STActivity_title__1HtrQ"}},45:function(e,t,a){e.exports={comments:"STActivityButtons_comments__1F8al",container:"STActivityButtons_container__1PhPU",delete:"STActivityButtons_delete__2Uhk7",ml:"STActivityButtons_ml__2AZ8H",mr:"STActivityButtons_mr__ZNUXu",btn:"STActivityButtons_btn__3YbeY"}},46:function(e,t,a){e.exports={btn:"STFeedOptions_btn__lNh_P",btnContainer:"STFeedOptions_btnContainer__VPsem",disabled:"STFeedOptions_disabled__1icUf",selected:"STFeedOptions_selected__1wOWG",span:"STFeedOptions_span__d7zy9"}},466:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(33),s=a.n(i),c=(a(250),a(251),a(252),a(7)),o=a(10),l=a(2),u=a(9),d=a(8),p=(a(253),a(27)),m=a(493),h=a(13),v="REMOVE_ACTIVITY",b="SET_ACTIVITIES",f="SET_ACTIVITY",g="SET_SELECTED_SESSION",_="SET_SESSIONS",k="UPDATE_ACTIVITY",y="SET_PATIENT_TOKEN",O="SET_THERAPIST_TOKEN",E="SET_AVATAR_MESSAGE",S="SET_AVATAR_VARIATION",C="SET_AVATAR_VARIATIONS",j="RESET_CONFIGURATION",x="SET_CONFIGURATION",N="RESET_DYNAMIC_OPTIONS",w="SET_DYNAMIC_OPTIONS",I="SET_DYNAMIC_SELECTED_OPTIONS",T="ADD_STATIC_SELECTED_OPTION",A="RESET_STATIC_OPTIONS",P="SET_STATIC_OPTIONS",D="SET_STATIC_SELECTED_OPTIONS",M="SET_COLLECTIONS",U="SET_COLLECTABLE",L="SET_USER_SKINS_OWNED",R="SET_USER_SKIN_OWNED",F="SET_CHECK_SERVER_STATUS",B="SET_CONNECTED_ID",z="SET_CONNECT_SOCKET",q="SET_FEEDBACK_DATA",W="SET_FEEDBACK_DATE",H="REMOVE_PATIENT",V="SET_PATIENT",G="SET_PATIENTS",K="SET_SELECTED_PATIENT",X="SET_BAR",Z="SET_FULLSCREEN",Y="SET_MODAL",J="SET_NOTIFICATION",Q="SET_PARALLAX",$="SET_V_OFFSET",ee="SET_WINDOW_WIDTH",te="SHOW_AVATAR",ae="SHOW_CREATE_ACTIVITY_BUTTON",ne="SHOW_MOBILE_MENU",re="SET_USER",ie="SET_USERS",se="SET_TO_UPDATE",ce=function(e){return function(t){t({type:X,payload:{bar:e}})}},oe=function(e){return function(t){t({type:Z,payload:{fullScreen:e}})}},le=function(e){return function(t){t({type:Y,payload:{modal:e}})}},ue=function(e){return function(t){t({type:J,payload:{notification:e}})}},de=function(e){return function(t){t({type:Q,payload:{parallax:e}})}},pe=function(e){return function(t){t({type:te,payload:{show:e}})}},me=function(e){return function(t){t({type:ae,payload:{show:e}})}},he=function(e){return function(t){t({type:ne,payload:{show:e}})}},ve=a(4),be=a.n(ve),fe=a(12),ge=a(20),_e=a.n(ge),ke="https://satrelo-qa.ddns.net/file",ye="https://satrelo-qa.ddns.net",Oe=function(e){return function(t){t({type:B,payload:{connectedId:e}})}},Ee=function(){function e(){if(Object(c.a)(this,e),e.instance instanceof e)return e.instance;this.synthesis=window.speechSynthesis,this.voice=null,e.instance=this}return Object(l.a)(e,[{key:"init",value:function(){var e=Object(fe.a)(be.a.mark((function e(t){var a,n,r=this;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setVoices();case 2:a=e.sent,n=a.voices,console.log(n),n.forEach((function(e){e.lang===t&&(r.voice=e)}));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setVoices",value:function(){var e=this;return new Promise((function(t){var a=setInterval((function(){var n=e.synthesis.getVoices();0!==n.length&&(t({voices:n}),clearInterval(a))}))}))}},{key:"speak",value:function(e){if(e){var t=new SpeechSynthesisUtterance(e);t.lang="es-MX",t.voice=this.voice,t.rate=1,t.pitch=1,this.synthesis.speak(t)}}}]),e}(),Se=new Ee,Ce=Se,je=a(231),xe=a.n(je),Ne=function(){function e(){if(Object(c.a)(this,e),e.instance instanceof e)return e.instance;this.socketURL="https://satrelo-qa.ddns.net",this.socketClient=null,this.heartbeat=null,e.instance=this}return Object(l.a)(e,[{key:"connectSocket",value:function(e,t){this.socketClient||(this.socketClient=xe.a.connect(this.socketURL,{reconnection:!1}),this.socketClient.emit("register",{userId:e}),this.handleSocketEvents(t))}},{key:"closeSocket",value:function(e){this.socketClient&&(this.socketClient=null,e.props.setConnectedId(null),e.props.connectSocket&&e.props.setConnectSocket(!1))}},{key:"disconnectSocket",value:function(e){this.socketClient&&(this.socketClient.emit("unregister",{userId:e}),this.socketClient.disconnect())}},{key:"handleConnection",value:function(e,t){var a=e.connectSocket,n=e.connectedId;a?this.connectSocket(n,t):this.disconnectSocket(n)}},{key:"handleSocketEvents",value:function(e){var t=this;this.socketClient.on("disconnect",(function(){console.log("Socket desconectado!"),t.closeSocket(e),clearInterval(t.heartbeat)})),this.socketClient.on("error",(function(){t.closeSocket(e)})),this.socketClient.on("avatar_message",(function(e){console.log(e)})),this.socketClient.on("beat",(function(){console.log("beat")})),this.socketClient.on("exit_game",(function(t){console.log(t),e.props.setFullScreen(!1)})),this.socketClient.on("registered",(function(){t.heartbeat=setInterval((function(){t.socketClient.emit("heart")}),3e3)}))}}]),e}(),we=new Ne,Ie=we,Te=function(){function e(t){Object(c.a)(this,e),this.context=t,this.interval=null}return Object(l.a)(e,[{key:"checkServerStatus",value:function(e,t,a){var n=this;e?this.interval=setInterval(Object(fe.a)(be.a.mark((function e(){var r,i,s,c;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.context.props.ping(t);case 2:r=e.sent,i=r.error,s=r.status,c=i?{error:i,status:s}:null,t?n.handleGameServerStatus():n.handleServerStatus(c,a);case 7:case"end":return e.stop()}}),e)}))),3e3):this.clearInterval()}},{key:"clearInterval",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){this.interval&&(clearInterval(this.interval),this.interval=null)}))},{key:"handleServerStatus",value:function(e,t){var a=this.context.props,n=a.connection,r=a.ui;if(e){var i=e.status;if(500===i){r.notification||a.setNotification({error:!0,message:"\xa1El servidor est\xe1 desconectado!",serverStatus:!0,slide:!1})}else 401===i&&console.log("\xa1Token inv\xe1lido!")}else t.handleConnection(n,this.context),r.notification&&r.notification.serverStatus&&a.setNotification(null)}},{key:"handleGameServerStatus",value:function(){}}]),e}(),Ae=Te,Pe=a(74),De=a.n(Pe),Me=a(232),Ue="/images/avatar/am1_cafe_negro_azul.png",Le=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={avatar_img:Ue,soundEnabled:!0,showMessage:!0},n.onMessageClicked=n.onMessageClicked.bind(Object(o.a)(n)),n.onRepeatClicked=n.onRepeatClicked.bind(Object(o.a)(n)),n.onSoundClicked=n.onSoundClicked.bind(Object(o.a)(n)),n}return Object(l.a)(a,[{key:"render",value:function(){var e=this.state,t=e.soundEnabled,a=e.showMessage,n=this.props.auth.pacienteToken?this.state.avatar_img:Ue;return r.a.createElement("div",{className:De.a.container},r.a.createElement("img",{className:De.a.image,alt:"",src:n}),r.a.createElement("div",{className:"flex ".concat(De.a.buttons)},r.a.createElement(Me.a,{className:"ghost-btn",onClick:this.onSoundClicked},r.a.createElement("img",{alt:"",className:De.a.buttonIcon,src:"/images/other/sound_".concat(t?"enabled":"disabled",".png")})),r.a.createElement(Me.a,{className:"ghost-btn",onClick:this.onMessageClicked},r.a.createElement("img",{alt:"",className:De.a.buttonIcon,src:"/images/other/message_".concat(a?"enabled":"disabled",".png")})),r.a.createElement(Me.a,{className:"ghost-btn",onClick:this.onRepeatClicked},r.a.createElement("img",{alt:"",className:De.a.buttonIcon,src:"/images/other/repeat.png"}))),r.a.createElement("div",{className:De.a.message},a&&this.props.avatar.message))}}]),Object(l.a)(a,[{key:"componentDidMount",value:function(){this.setTherapistAvatar(),this.speak()}},{key:"componentDidUpdate",value:function(e){this.setTherapistAvatar(),e.avatar.message!==this.props.avatar.message&&this.speak()}},{key:"onMessageClicked",value:function(){this.setState({showMessage:!this.state.showMessage})}},{key:"onRepeatClicked",value:function(){this.speak()}},{key:"onSoundClicked",value:function(){this.setState({soundEnabled:!this.state.soundEnabled})}},{key:"setTherapistAvatar",value:function(){if(this.props.user){var e=Object.values(this.props.user.Therapists);if(e.length>0){var t="https://satrelo-qa.ddns.net"+e[0].Avatar_Variation.img_path;this.state.avatar_img!==t&&this.setState({avatar_img:t})}}}},{key:"speak",value:function(){this.state.soundEnabled&&Ce.speak(this.props.avatar.message)}}]),a}(n.Component),Re=Object(h.b)((function(e){return{auth:e.auth,avatar:e.avatar,user:e.user.user}}))(Le),Fe=Re,Be=a(61),ze=a.n(Be),qe=a(30),We=a(29),He=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.notification,t=e.error,a=e.message,n=e.slide,i=this.props,s=i.parallax,c=i.windowWidth,o=t?We.c:We.e,l=t?ze.a.error:ze.a.success,u=c>=768?ze.a.containerDesktop:ze.a.containerMobile,d=c>=768?-368:-200;n||(d=c>=768?-1:0);var p=s?"":ze.a.border;return r.a.createElement("div",{className:"".concat(ze.a.container," ").concat(u," ").concat(p," flex"),style:{"--finalSlide":"".concat(d,"px")}},r.a.createElement("div",{className:"flex ".concat(ze.a.iconContainer," ").concat(l)},r.a.createElement(qe.a,{icon:o,size:"3x"})),r.a.createElement("span",{className:ze.a.message},a))}},{key:"componentDidMount",value:function(){var e=this;this.props.notification.slide&&setTimeout((function(){e.props.setNotification(null)}),6001)}}]),a}(n.Component),Ve={setNotification:ue},Ge=Object(h.b)((function(e){return{notification:e.ui.notification,parallax:e.ui.parallax,windowWidth:e.ui.windowWidth}}),Ve)(He),Ke=Ge,Xe=a(95),Ze=a.n(Xe),Ye=a(478),Je=a(479),Qe=a(244),$e=a(82),et=a.n($e),tt=a(23),at=a(470),nt=a(471),rt=a(472),it=a(473),st=function(e){var t=Object(n.useState)(!1),a=Object(Qe.a)(t,2),i=a[0],s=a[1],c=function(){e.windowWidth<=768&&s(!i)};return r.a.createElement("span",{className:et.a.container},r.a.createElement(at.a,{className:et.a.toggler,onClick:c}),r.a.createElement(nt.a,{className:et.a.collapse,isOpen:i,navbar:!0},r.a.createElement(rt.a,{className:et.a.nav,navbar:!0},r.a.createElement(it.a,{className:et.a.navItem},r.a.createElement(tt.b,{className:et.a.link,onClick:c,to:"/"},"Inicio")))))},ct=st,ot=a(51),lt=a.n(ot),ut="paciente",dt="terapeuta",pt=a(52),mt=a.n(pt),ht=a(474),vt=a(475),bt=a(476),ft=a(477),gt=a(83),_t=a.n(gt),kt=function(e){return r.a.createElement("div",{className:"flex ".concat(_t.a.container)},e.user.profile_img?r.a.createElement("img",{alt:"",className:_t.a.image,src:"".concat("https://satrelo-qa.ddns.net").concat(e.user.profile_img)}):r.a.createElement("div",{className:"flex ".concat(_t.a.image," ").concat(_t.a.thumb),style:{backgroundColor:e.user.color}},e.user.thumbnail_alias),r.a.createElement("span",{className:_t.a.name},e.user.name," ",e.user.last_name),r.a.createElement("span",{className:_t.a.email},e.user.email))},yt=kt,Ot=a(233),Et=a.n(Ot),St=a(5),Ct="https://satrelo-qa.ddns.net/api",jt=function(e,t){return function(){var a=Object(fe.a)(be.a.mark((function a(n){var r,i,s,c,o,l,u,d,p,m;return be.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r="".concat(Ct,"/auth/login"),e=Object(St.a)(Object(St.a)({},e),{},{role:t}),a.prev=2,a.next=5,_e.a.post(r,{credentials:e});case 5:return i=a.sent,s=i.data,c=s.data,o=s.message,l=s.status,u=i.headers,d=200===l?u["auth-token"]:null,p=200===l?c.id:null,m=200!==l,n({type:t===ut?y:O,payload:{token:d}}),localStorage.setItem("".concat(t,"Token"),d),a.abrupt("return",{error:m,message:o,userId:p});case 15:return a.prev=15,a.t0=a.catch(2),a.abrupt("return",{error:!0,message:"Hubo un error de conexi\xf3n. Int\xe9ntalo m\xe1s tarde...",userId:null});case 18:case"end":return a.stop()}}),a,null,[[2,15]])})));return function(e){return a.apply(this,arguments)}}()},xt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).onLinkClicked=n.onLinkClicked.bind(Object(o.a)(n)),n.onLogout=n.onLogout.bind(Object(o.a)(n)),n}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(tt.b,{className:Et.a.style,to:this.props.to,onClick:this.onLinkClicked},this.props.children)}}]),Object(l.a)(a,[{key:"onLinkClicked",value:function(){this.props.onClick&&this.props.onClick(),"logout"===this.props.type&&this.onLogout()}},{key:"onLogout",value:function(){var e=this.props.role;this.props.logout(e)}}]),a}(n.Component),Nt={logout:function(e){return function(t){t({type:e===ut?y:O,payload:{token:null}}),localStorage.removeItem("".concat(e,"Token"))}}},wt=Object(h.b)(null,Nt)(xt),It=wt,Tt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={isOpen:!1},n.toggle=n.toggle.bind(Object(o.a)(n)),n}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.user,t=e.id,a=e.Role.name;return r.a.createElement(ht.a,{className:mt.a.container,isOpen:this.state.isOpen,toggle:this.toggle},r.a.createElement(vt.a,{className:"flex ghost-btn ".concat(mt.a.toggle)},r.a.createElement("span",{className:mt.a.name},this.props.user.name),this.props.user.profile_img?r.a.createElement("img",{alt:"",className:mt.a.image,src:"".concat("https://satrelo-qa.ddns.net").concat(this.props.user.profile_img)}):r.a.createElement("div",{className:"flex ".concat(mt.a.image," ").concat(mt.a.thumb),style:{backgroundColor:this.props.user.color}},this.props.user.thumbnail_alias)),r.a.createElement(bt.a,{className:mt.a.menu},r.a.createElement(ft.a,{header:!0},r.a.createElement(yt,{user:this.props.user})),r.a.createElement(ft.a,{divider:!0}),a===dt?r.a.createElement("span",null,r.a.createElement(ft.a,{className:mt.a.item},r.a.createElement(It,{to:"/".concat(a,"/").concat(t,"/perfil")},"Perfil"))):null,r.a.createElement(ft.a,{className:mt.a.item},r.a.createElement(It,{role:a,to:"/".concat(a),type:"logout"},"Salir"))))}}]),Object(l.a)(a,[{key:"toggle",value:function(){this.setState({isOpen:!this.state.isOpen})}}]),a}(n.Component),At=Object(h.b)((function(e){return{user:e.user.user}}))(Tt),Pt=At,Dt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).onMenuButtonClicked=n.onMenuButtonClicked.bind(Object(o.a)(n)),n}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.user,t=e.id,a=e.is_admin,n=e.Role.name;return r.a.createElement("div",{className:"flex ".concat(lt.a.container)},r.a.createElement("div",{className:lt.a.linksContainer},n===ut?r.a.createElement("span",null,r.a.createElement(tt.b,{className:lt.a.link,to:"/".concat(n,"/").concat(t,"/actividades")},"Actividades"),r.a.createElement(tt.b,{className:lt.a.link,to:"/".concat(n,"/").concat(t,"/colecciones")},"Colecciones")):r.a.createElement("span",null,a&&r.a.createElement(tt.b,{className:lt.a.link,to:"/".concat(n,"/").concat(t,"/admin")},"Administrar"),r.a.createElement(tt.b,{className:lt.a.link,to:"/".concat(n,"/").concat(t,"/pacientes")},"Pacientes"))),this.props.ui.windowWidth>=768?r.a.createElement(Pt,null):r.a.createElement(Me.a,{className:"ghost-btn",onClick:this.onMenuButtonClicked},this.props.user.profile_img?r.a.createElement("div",{className:lt.a.uimage}):r.a.createElement("div",{className:"flex ".concat(lt.a.uimage," ").concat(lt.a.thumb),style:{backgroundColor:this.props.user.color}},this.props.user.thumbnail_alias)))}}]),Object(l.a)(a,[{key:"onMenuButtonClicked",value:function(){this.props.showMobileMenu(!0)}}]),a}(n.Component),Mt={showMobileMenu:he},Ut=Object(h.b)((function(e){return{ui:e.ui,user:e.user.user}}),Mt)(Dt),Lt=Ut,Rt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.ui.bar,t=Ze.a.bar;return t="patient"===e?"".concat(t," ").concat(Ze.a.patientBar):"".concat(t," ").concat(Ze.a.standardBar),r.a.createElement(Ye.a,{className:t,expand:"lg",fixed:"top",light:!0},r.a.createElement(Je.a,{className:Ze.a.navbrand},r.a.createElement("img",{alt:"",className:Ze.a.logo,src:"/images/logo/logo.png"}),"SATReLO"),null!==this.props.user?r.a.createElement(Lt,null):r.a.createElement(ct,{windowWidth:this.props.ui.windowWidth}))}}]),a}(n.Component),Ft=Object(h.b)((function(e){return{user:e.user.user,ui:e.ui}}))(Rt),Bt=Ft,zt=a(62),qt=a.n(zt),Wt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={soundEnabled:!0,showMessage:!0},n.onMessageClicked=n.onMessageClicked.bind(Object(o.a)(n)),n.onRepeatClicked=n.onRepeatClicked.bind(Object(o.a)(n)),n.onSoundClicked=n.onSoundClicked.bind(Object(o.a)(n)),n}return Object(l.a)(a,[{key:"render",value:function(){var e=this.state,t=e.soundEnabled,a=e.showMessage;return r.a.createElement("div",{className:qt.a.container},r.a.createElement("div",{className:"flex"},r.a.createElement("div",{className:qt.a.image}),r.a.createElement("p",{className:qt.a.message},a&&this.props.avatar.message)),r.a.createElement("div",{className:"flex ".concat(qt.a.buttons)},r.a.createElement(Me.a,{className:"ghost-btn",onClick:this.onSoundClicked},r.a.createElement("img",{alt:"",className:qt.a.buttonIcon,src:"/images/other/sound_".concat(t?"enabled":"disabled",".png")})),r.a.createElement(Me.a,{className:"ghost-btn ".concat(qt.a.buttonMargin),onClick:this.onMessageClicked},r.a.createElement("img",{alt:"",className:qt.a.buttonIcon,src:"/images/other/message_".concat(a?"enabled":"disabled",".png")})),r.a.createElement(Me.a,{className:"ghost-btn",onClick:this.onRepeatClicked},r.a.createElement("img",{alt:"",className:qt.a.buttonIcon,src:"/images/other/repeat.png"}))))}}]),Object(l.a)(a,[{key:"componentDidMount",value:function(){this.speak()}},{key:"componentDidUpdate",value:function(e){e.avatar.message!==this.props.avatar.message&&this.speak()}},{key:"onMessageClicked",value:function(){this.setState({showMessage:!this.state.showMessage})}},{key:"onRepeatClicked",value:function(){this.speak()}},{key:"onSoundClicked",value:function(){this.setState({soundEnabled:!this.state.soundEnabled})}},{key:"speak",value:function(){this.state.soundEnabled&&Ce.speak(this.props.avatar.message)}}]),a}(n.Component),Ht=Object(h.b)((function(e){return{avatar:e.avatar}}))(Wt),Vt=Ht,Gt=a(84),Kt=a.n(Gt),Xt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={animation:Kt.a.menuAppear},n.onAnimatedCloseClicked=n.onAnimatedCloseClicked.bind(Object(o.a)(n)),n.onSimpleCloseClicked=n.onSimpleCloseClicked.bind(Object(o.a)(n)),n}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.user,t=e.id,a=e.is_admin,n=e.Role.name;return r.a.createElement("div",{className:Kt.a.container},r.a.createElement(Me.a,{onClick:this.onAnimatedCloseClicked,className:"ghost-btn ".concat(Kt.a.btn)}),r.a.createElement("div",{className:"".concat(Kt.a.menu," ").concat(this.state.animation)},r.a.createElement(yt,{user:this.props.user}),r.a.createElement("br",null),r.a.createElement("div",{className:"h-delimiter"}),r.a.createElement("div",{className:Kt.a.linksContainer},n===dt?r.a.createElement("span",null,r.a.createElement(It,{onClick:this.onSimpleCloseClicked,to:"/".concat(n,"/").concat(t,"/perfil")},"Perfil"),r.a.createElement(It,{onClick:this.onSimpleCloseClicked,to:"/".concat(n,"/").concat(t,"/pacientes")},"Pacientes"),a&&r.a.createElement(It,{onClick:this.onSimpleCloseClicked,to:"/".concat(n,"/").concat(t,"/admin")},"Administrar")):r.a.createElement("span",null,r.a.createElement(It,{onClick:this.onSimpleCloseClicked,to:"/".concat(n,"/").concat(t,"/actividades")},"Actividades"),r.a.createElement(It,{onClick:this.onSimpleCloseClicked,to:"/".concat(n,"/").concat(t,"/colecciones")},"Colecciones")),r.a.createElement(It,{role:n,to:"/".concat(n),type:"logout"},"Salir"))))}}]),Object(l.a)(a,[{key:"onAnimatedCloseClicked",value:function(){var e=this;this.setState({animation:Kt.a.menuDissapear},(function(){setTimeout((function(){e.props.showMobileMenu(!1)}),210)}))}},{key:"onSimpleCloseClicked",value:function(){this.props.showMobileMenu(!1)}}]),a}(n.Component),Zt={showMobileMenu:he},Yt=Object(h.b)((function(e){return{user:e.user.user}}),Zt)(Xt),Jt=Yt,Qt=a(138),$t=a.n(Qt),ea=a(495),ta=a(487),aa=a(488),na=a(110),ra=a.n(na),ia=a(96),sa=function(e,t){var a=ia.DateTime.fromISO(e);return ia.DateTime.fromISO(t).diff(a,["minutes"]).toObject()},ca=function(e){return ia.DateTime.fromISO(e).setLocale("co").toLocaleString(ia.DateTime.DATE_FULL)},oa=function(e){var t=ia.DateTime.fromISO(e);return{startDate:t.startOf("month").toISODate(),endDate:t.endOf("month").toISODate()}},la=a(176),ua=a.n(la),da=function(e){return r.a.createElement("div",{className:"flex ".concat(ua.a.container)},r.a.createElement("p",{className:ua.a.text,style:{color:e.color?e.color:"darkgray"}},e.children))},pa=da,ma=a(480),ha=function(e){return r.a.createElement("div",{style:{marginTop:"30px",padding:"5px",textAlign:"center",width:"100%"}},r.a.createElement(ma.a,{color:e.color}))},va=ha,ba=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={comments:null,loading:!1},n}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"".concat(ra.a.container)},this.state.loading?r.a.createElement(va,null):this.state.comments&&this.state.comments.length>0?this.state.comments.map((function(e,t){var a=e.date.split("T")[0];return r.a.createElement("div",{className:ra.a.commentContainer,key:t},r.a.createElement("div",{className:ra.a.date},"Comentario enviado el ",ca(a)),r.a.createElement("div",{className:ra.a.comment},e.comment),e.audio&&r.a.createElement("audio",{src:"".concat("https://satrelo-qa.ddns.net").concat(e.audio),type:"video.webm",controls:!0}))})):r.a.createElement(pa,null,"No se encontraron comentarios para esta actividad."))}}]),Object(l.a)(a,[{key:"componentDidMount",value:function(){this.getCommentsFromSessions()}},{key:"getCommentsFromSessions",value:function(){this.setState({loading:!0});var e=Object.values(this.props.data),t=[];e.forEach((function(e){var a=e.audio,n=e.comment,r=e.date_end;(a||n&&""!==n.trim())&&t.push({audio:a,comment:n,date:r})})),this.setState({comments:t,loading:!1})}}]),a}(n.Component),fa=ba,ga=fa,_a=a(85),ka=a.n(_a),ya=a(482),Oa=a(481),Ea=a(483),Sa=a(484),Ca="https://satrelo-qa.ddns.net/api",ja=function(e){return function(){var t=Object(fe.a)(be.a.mark((function t(a){var n,r,i,s,c,o,l;return be.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(Ca,"/activity/").concat(e),t.prev=1,t.next=4,_e.a.get(n);case 4:return r=t.sent,i=r.data,s=i.data,c=i.message,o=i.status,l=200!==o,a({type:f,payload:{activity:200===o?s:null}}),t.abrupt("return",{error:l,message:c});case 12:return t.prev=12,t.t0=t.catch(1),t.abrupt("return",{error:!0,message:t.t0});case 15:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e){return t.apply(this,arguments)}}()},xa=function(e){return function(){var t=Object(fe.a)(be.a.mark((function t(a){var n,r,i,s,c,o,l;return be.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(Ca,"/patient/").concat(e,"/activities"),t.prev=1,t.next=4,_e.a.get(n);case 4:return r=t.sent,i=r.data,s=i.data,c=i.message,o=i.status,l=200!==o,a({type:b,payload:{activities:200===o?s:null}}),t.abrupt("return",{error:l,message:c});case 12:return t.prev=12,t.t0=t.catch(1),t.abrupt("return",{error:!0,message:t.t0});case 15:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e){return t.apply(this,arguments)}}()},Na=function(e){return function(t){t({type:f,payload:{activity:e}})}},wa=function(e){return function(t){t({type:b,payload:{activities:e}})}},Ia=function(e){return function(t){t({type:g,payload:{session:e}})}},Ta=function(e){return function(){var t=Object(fe.a)(be.a.mark((function t(a){var n,r,i,s,c,o,l;return be.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.id,r="".concat(Ca,"/session/").concat(n),t.prev=2,t.next=5,_e.a.put(r,{session:e});case 5:return i=t.sent,s=i.data,c=s.message,o=s.status,l=200!==o,t.abrupt("return",{error:l,message:c});case 11:return t.prev=11,t.t0=t.catch(2),t.abrupt("return",{error:!0,message:t.t0});case 14:case"end":return t.stop()}}),t,null,[[2,11]])})));return function(e){return t.apply(this,arguments)}}()},Aa="https://satrelo-qa.ddns.net/api",Pa=function(e){return r.a.createElement(Oa.a,null,r.a.createElement(Me.a,{className:e.className,style:{minWidth:90},onClick:function(t){e.onClick(t)}},e.loading?r.a.createElement(ma.a,{color:"light",size:"sm"}):r.a.createElement("span",null,e.children)))},Da=Pa,Ma=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={audio:null,comment:"",error:null,loading:!1,recording:!1},n.onCancelClicked=n.onCancelClicked.bind(Object(o.a)(n)),n.onTextChanged=n.onTextChanged.bind(Object(o.a)(n)),n.onRecordAudioClicked=n.onRecordAudioClicked.bind(Object(o.a)(n)),n.onSaveClicked=n.onSaveClicked.bind(Object(o.a)(n)),n}return Object(l.a)(a,[{key:"render",value:function(){var e=this.state.audio?ka.a.recorded:this.state.recording?ka.a.recording:ka.a.notRecording;return r.a.createElement(ya.a,null,r.a.createElement(Oa.a,{className:"mt-2"},r.a.createElement(Ea.a,{type:"textarea",onChange:this.onTextChanged,placeholder:"Escribe tu comentario aqu\xed...",rows:"8",style:{resize:"none"},invalid:null!==this.state.error}),this.state.error&&r.a.createElement(Sa.a,null,this.state.error)),r.a.createElement("p",{className:ka.a.microphoneText},"Si quieres puedes grabar tu comentario. Para hacerlo, presiona el micr\xf3fono y habla."),r.a.createElement("div",{className:"flex ".concat(ka.a.recorderContainer)},r.a.createElement(Me.a,{className:"ghost-btn",onClick:this.onRecordAudioClicked},r.a.createElement("img",{alt:"",className:"".concat(ka.a.microphone," ").concat(e),src:"/images/other/microphone.png"})),this.state.audio&&r.a.createElement("audio",{src:URL.createObjectURL(this.state.audio),style:{marginLeft:7},type:"video.webm",controls:!0})),r.a.createElement("div",{className:"flex mt-4",style:{justifyContent:"center"}},r.a.createElement(Da,{className:"primary-btn w-100",loading:this.state.loading,onClick:this.onSaveClicked},"Guardar"),r.a.createElement(Oa.a,null,r.a.createElement(Me.a,{className:"simple-btn ml-2",onClick:this.onCancelClicked},"Cancelar"))))}}]),Object(l.a)(a,[{key:"onCancelClicked",value:function(){this.props.onCancelClicked()}},{key:"onTextChanged",value:function(e){this.setState({comment:e.target.value,error:null})}},{key:"onRecordAudioClicked",value:function(){var e=Object(fe.a)(be.a.mark((function e(){var t,a,n=this;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.recording){e.next=11;break}return this.setState({audio:null}),this.audioChunks=[],e.next=5,navigator.mediaDevices.getUserMedia({audio:!0});case 5:t=e.sent,this.recorder=new MediaRecorder(t),this.recorder.ondataavailable=function(e){n.audioChunks.push(e.data)},this.recorder.start(100),e.next=14;break;case 11:a=new Blob(this.audioChunks,{type:"audio/mpeg"}),this.setState({audio:a}),this.recorder.stop();case 14:this.setState({recording:!this.state.recording});case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onSaveClicked",value:function(){var e=Object(fe.a)(be.a.mark((function e(){var t,a,n,r,i,s,c,o,l,u,d,p,m;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==this.state.comment.trim()||this.state.audio){e.next=4;break}this.setState({error:"Escribe o graba un comentario para poder guardarlo."}),e.next=24;break;case 4:if(this.setState({loading:!0}),t=this.props,a=t.session,n=t.user,r=this.state,i=r.audio,s=r.comment,c=!1,o=null,!i){e.next=15;break}return e.next=12,this.props.uploadAudioFile(i,n.id);case 12:l=e.sent,l.error||(o=l.data.path);case 15:return e.next=17,this.props.updateActivitySession({id:a,audio:o,comment:s});case 17:u=e.sent,d=u.error,p=d||c&&""===s.trim(),m=p?"Error al realizar la acci\xf3n: guardar el comentario":"Se realiz\xf3 exitosamente la acci\xf3n: guardar el comentario",this.props.setNotification({error:d,message:m,slide:!0}),this.setState({comment:"",loading:!1}),this.props.onCancelClicked();case 24:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),a}(n.Component),Ua={setNotification:ue,updateActivitySession:Ta,uploadAudioFile:function(e,t){return Object(fe.a)(be.a.mark((function a(){var n,r,i,s,c,o,l,u;return be.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n="".concat(Aa,"/plugin/upload-audio"),a.prev=1,(r=new FormData).append("file",e,t),a.next=6,_e.a.post(n,r,{headers:{"Content-Type":"multipart/form-data"}});case 6:return i=a.sent,s=i.data,c=s.data,o=s.message,l=s.status,u=200!==l,a.abrupt("return",{data:c,error:u,message:o});case 12:return a.prev=12,a.t0=a.catch(1),a.abrupt("return",{error:!0,message:a.t0});case 15:case"end":return a.stop()}}),a,null,[[1,12]])})))}},La=Object(h.b)((function(e){return{user:e.user.user}}),Ua)(Ma),Ra=La,Fa=a(111),Ba=a.n(Fa),za="https://satrelo-qa.ddns.net/api",qa=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(){var a=Object(fe.a)(be.a.mark((function a(n){var r,i,s,c,o,l,u,d;return be.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r="".concat(za,"/user/").concat(e),a.prev=1,a.next=4,_e.a.get(r);case 4:return i=a.sent,s=i.data,c=s.data,o=s.message,l=s.status,d=200!==l,n({type:t?se:re,payload:{user:u=200===l?c:null}}),a.abrupt("return",{error:d,message:o,user:u});case 12:return a.prev=12,a.t0=a.catch(1),a.abrupt("return",{error:!0,message:a.t0,user:null});case 15:case"end":return a.stop()}}),a,null,[[1,12]])})));return function(e){return a.apply(this,arguments)}}()},Wa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(){var t=Object(fe.a)(be.a.mark((function t(a){var n,r,i,s,c,o,l;return be.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(za,"/user"),e&&(n="".concat(n,"?search=").concat(e)),t.prev=2,t.next=5,_e.a.get(n);case 5:return r=t.sent,i=r.data,s=i.data,c=i.message,o=i.status,l=200!==o,a({type:ie,payload:{users:200===o?s:null}}),t.abrupt("return",{error:l,message:c});case 13:return t.prev=13,t.t0=t.catch(2),t.abrupt("return",{error:!0,message:t.t0});case 16:case"end":return t.stop()}}),t,null,[[2,13]])})));return function(e){return t.apply(this,arguments)}}()},Ha=function(e,t){return function(){var a=Object(fe.a)(be.a.mark((function a(n){var r,i,s,c,o,l,u;return be.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r="".concat(za,"/user/").concat(e.id),a.prev=1,a.next=4,_e.a.put(r,{user:e});case 4:return i=a.sent,s=i.data,c=s.data,o=s.message,l=s.status,(u=200!==l)||e.id!==t||n({type:re,payload:{user:c}}),a.abrupt("return",{error:u,message:o});case 11:return a.prev=11,a.t0=a.catch(1),a.abrupt("return",{error:!0,message:a.t0});case 14:case"end":return a.stop()}}),a,null,[[1,11]])})));return function(e){return a.apply(this,arguments)}}()},Va=function(e){return function(t){t({type:re,payload:{user:e}})}},Ga=function(e){return function(t){t({type:se,payload:{user:e}})}},Ka=function(){for(var e="#",t=0;t<6;t++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e},Xa=function(e,t){return(e.charAt(0)+t.charAt(0)).toUpperCase()},Za=function(e){return/[a-zA-Z0-9.+_-]+@[a-z]+\.[a-z]+/.test(e)},Ya=a(485),Ja=a(486),Qa=function(e){var t="email"===e.name?"email":"text";return r.a.createElement(Oa.a,null,r.a.createElement(Ya.a,null,e.children),"admin"===e.form&&"password"===e.name&&r.a.createElement(Ja.a,null,"Recuerda que la contrase\xf1a para el paciente debe contener cuatro palabras del conjunto \xe1rbol, coraz\xf3n, flor, nube y sol, separadas por coma y sin espacios. Ej.: \xe1rbol,flor,nube,sol."),r.a.createElement(Ea.a,{disabled:e.disabled,type:t,name:e.name,onChange:function(t){e.onChange(t)},value:e.value,invalid:null!==e.error}),e.error&&r.a.createElement(Sa.a,null,e.error))},$a=Qa,en=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={done:!1,email:"",error:null,loading:!1},n.onEmailChange=n.onEmailChange.bind(Object(o.a)(n)),n.onSendClicked=n.onSendClicked.bind(Object(o.a)(n)),n}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:Ba.a.container},r.a.createElement("div",{className:Ba.a.infoText},"Para recuperar tu contrase\xf1a debes ingresar el correo electr\xf3nico que tu administrador te asign\xf3. En caso de no recordar tu correo electr\xf3nico, o en caso de alg\xfan problema, comun\xedcate con el administrador del sistema."),r.a.createElement(ya.a,null,r.a.createElement($a,{error:this.state.error,onChange:this.onEmailChange,type:"email",value:this.state.email},"Ingresa aqu\xed el correo electr\xf3nico"),r.a.createElement("div",{className:"flex ".concat(Ba.a.btnContainer)},this.state.done?r.a.createElement("p",{className:Ba.a.doneMessage},"Se ha enviado un correo con una contrase\xf1a provisional. Recuerda que es recomendable cambiarla lo antes posible. Ya puedes cerrar esta ventana."):r.a.createElement(Da,{className:"primary-btn",loading:this.state.loading,onClick:this.onSendClicked},"Enviar"))))}}]),Object(l.a)(a,[{key:"onEmailChange",value:function(e){this.setState({email:e.target.value,error:null})}},{key:"onSendClicked",value:function(){var e=Object(fe.a)(be.a.mark((function e(t){var a,n,r,i,s,c,o;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=this.state.email,n=null,""===a.trim()?n="El email es obligatorio.":Za(a)||(n="Debes ingresar un email v\xe1lido."),!n){e.next=8;break}this.setState({error:n}),e.next=17;break;case 8:return this.setState({loading:!0}),e.next=11,this.props.recoverPassword(a,this.props.role);case 11:r=e.sent,i=r.error,s=r.message,c=!1,o=null,i?o=s:c=!0,this.setState({done:c,email:"",error:o,loading:!1});case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),a}(n.Component),tn={recoverPassword:function(e,t){return Object(fe.a)(be.a.mark((function a(){var n,r,i,s,c,o;return be.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n="".concat(za,"/user/recover/pwd"),a.prev=1,a.next=4,_e.a.put(n,{email:e,role:t});case 4:return r=a.sent,i=r.data,s=i.message,c=i.status,o=200!==c,a.abrupt("return",{error:o,message:s});case 10:return a.prev=10,a.t0=a.catch(1),a.abrupt("return",{error:!0,message:"Hubo un error de conexi\xf3n. Int\xe9ntalo m\xe1s tarde..."});case 13:case"end":return a.stop()}}),a,null,[[1,10]])})))}},an=Object(h.b)(null,tn)(en),nn=an,rn=a(139),sn=a.n(rn),cn=function(e){var t=e.absolute?sn.a.absolute:"",a=e.width?e.width:"100%";return r.a.createElement("div",{className:"".concat(sn.a.container," ").concat(t),style:{"--width":a}},r.a.createElement("video",{src:"".concat("https://satrelo-qa.ddns.net").concat(e.src),className:sn.a.video,controls:!0}))},on=cn,ln=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).closeModal=n.closeModal.bind(Object(o.a)(n)),n}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(ea.a,{centered:!0,contentClassName:$t.a.modal,isOpen:null!==this.props.ui.modal,size:"lg",toggle:this.closeModal},r.a.createElement(ta.a,{toggle:this.closeModal},r.a.createElement("span",{className:$t.a.title},this.props.ui.modal.title)),r.a.createElement(aa.a,{className:$t.a.body},"comments"===this.props.ui.modal.type?r.a.createElement(ga,{data:this.props.ui.modal.data}):"new_comment"===this.props.ui.modal.type?r.a.createElement(Ra,{onCancelClicked:this.closeModal,session:this.props.ui.modal.session}):"forgot_password"===this.props.ui.modal.type?r.a.createElement(nn,{role:this.props.ui.modal.role,type:this.props.ui.modal.type}):r.a.createElement(on,{src:this.props.ui.modal.videoUrl})))}}]),Object(l.a)(a,[{key:"closeModal",value:function(){this.props.setModal(null)}}]),a}(n.Component),un={setModal:le},dn=Object(h.b)((function(e){return{ui:e.ui}}),un)(ln),pn=dn,mn=a(245),hn=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={role:n.getRoleFromPath()},n.hasToken=n.hasToken.bind(Object(o.a)(n)),n}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.component,n=Object(mn.a)(t,["component"]),i=this.state.role;return r.a.createElement(p.b,Object.assign({},n,{render:function(t){return e.hasToken(i)?r.a.createElement(a,t):r.a.createElement(p.a,{to:"/".concat(i)})}}))}}]),Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=Object(fe.a)(be.a.mark((function e(){var t,a,n,r,i,s,c;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state.role,this.showAvatar(t),this.setBar(t),this.setParallax(t),this.checkServerStatus(!0),!this.hasToken(t)||null!==this.props.user){e.next=15;break}return a=this.props.computedMatch,n=t===ut?"p":"t",r=a.params["".concat(n,"id")],e.next=11,this.props.getUser(r);case 11:i=e.sent,s=i.error,c=i.user,s||this.connectSocket(t,c.id);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.disconnectSocket(),this.checkServerStatus(!1),this.props.setNotification(null)}},{key:"checkServerStatus",value:function(e){this.props.setCheckServerStatus(e)}},{key:"connectSocket",value:function(e,t){e===ut&&(this.props.setConnectedId(t),this.props.setConnectSocket(!0))}},{key:"disconnectSocket",value:function(){this.props.setConnectSocket(!1)}},{key:"getRoleFromPath",value:function(){return this.props.path.split("/")[1]}},{key:"hasToken",value:function(e){var t=this.props.auth["".concat(e,"Token")];return!!t&&(_e.a.defaults.headers.common["Auth-Token"]||(_e.a.defaults.headers.common["Auth-Token"]=t),!0)}},{key:"setBar",value:function(e){var t=e===ut?"patient":"standard";this.props.setBar(t)}},{key:"setParallax",value:function(e){var t=e===ut;this.props.setParallax(t)}},{key:"showAvatar",value:function(e){var t=e===ut;this.props.showAvatar(t)}}]),a}(n.Component),vn={getUser:qa,setBar:ce,setCheckServerStatus:function(e){return function(t){t({type:F,payload:{check:e}})}},setConnectedId:Oe,setConnectSocket:function(e){return function(t){t({type:z,payload:{connectSocket:e}})}},setNotification:ue,setParallax:de,showAvatar:pe},bn=Object(h.b)((function(e){return{auth:e.auth,user:e.user.user}}),vn)(hn),fn=bn,gn=a(97),_n=a.n(gn),kn=a(490),yn=a(489),On=a(63),En=a.n(On),Sn=function(){return r.a.createElement("div",{className:"flex ".concat(En.a.container)},r.a.createElement("div",{className:"flex ".concat(En.a.innerContainer)},r.a.createElement("div",{className:"".concat(En.a.sides," ").concat(En.a.avatarSide)},r.a.createElement("img",{alt:"",className:En.a.image,src:"/images/avatar/am1_cafe_negro_azul.png"})),r.a.createElement("div",{className:En.a.sides},r.a.createElement("p",{className:En.a.title},"\xa1Avatar para apoyar las terapias!"),r.a.createElement("p",{className:En.a.description},"C\xf3mo terapeuta puedes personalizar un avatar con el que tu paciente podr\xe1 interactuar mientras realiza sus actividades asignadas"))))},Cn=Sn,jn=a(75),xn=a.n(jn),Nn=function(){return r.a.createElement("div",{className:"flex ".concat(xn.a.container)},r.a.createElement("div",{className:"flex ".concat(xn.a.innerContainer)},r.a.createElement("p",{className:xn.a.text},"Ideado y desarrollado con",r.a.createElement(qe.a,{className:xn.a.icon,icon:We.f}),"por un equipo interdisciplinar de"),r.a.createElement("div",{className:"flex ".concat(xn.a.logoContainer)},r.a.createElement("img",{alt:"",className:xn.a.logoImage,src:"/images/landing/logo_incs.png"}),r.a.createElement("img",{alt:"",className:xn.a.logoImage,src:"/images/landing/logo_pujc.png"}))))},wn=Nn,In=a(140),Tn=a.n(In),An=a(98),Pn=a.n(An),Dn=function(e){return r.a.createElement(yn.a,{sm:"12",md:"4"},r.a.createElement("div",{className:"flex ".concat(Pn.a.container)},r.a.createElement("img",{alt:"",className:Pn.a.logo,src:e.feature.logo}),r.a.createElement("div",{className:Pn.a.infoContainer},r.a.createElement("div",{className:Pn.a.title},e.feature.title),r.a.createElement("div",{className:Pn.a.description},e.feature.description))))},Mn=Dn,Un=function(e){return r.a.createElement("div",null,r.a.createElement("div",{className:Tn.a.title},"Si eres ",e.role),r.a.createElement("div",{className:"flex ".concat(Tn.a.container)},r.a.createElement("div",{className:Tn.a.innerContainer},r.a.createElement(kn.a,{noGutters:!0},e.features.map((function(e){return r.a.createElement(Mn,{feature:e,key:e.id})}))))))},Ln=Un,Rn=a(112),Fn=a.n(Rn),Bn=function(){return r.a.createElement("div",{className:"flex ".concat(Fn.a.container)},r.a.createElement("div",{className:Fn.a.innerContainer},r.a.createElement("p",{className:Fn.a.logo},"SATReLO 2",r.a.createElement("br",null),r.a.createElement("span",{className:Fn.a.copyright},"\xa9 Copyright 2019-2020"))))},zn=Bn,qn=a(43),Wn=a.n(qn),Hn=function(){return r.a.createElement("div",{className:Wn.a.container},r.a.createElement("div",{className:Wn.a.outerContainer},r.a.createElement("div",{className:"flex ".concat(Wn.a.innerContainer)},r.a.createElement("div",{className:Wn.a.title},"La Aplicaci\xf3n de Apoyo a la Rehabilitaci\xf3n del Lenguaje Oral"),r.a.createElement("div",{className:Wn.a.subtitle},"Generaci\xf3n de actividades personalizadas para atender las necesidades particulares de los pacientes"),r.a.createElement("div",{className:"flex ".concat(Wn.a.btnContainer)},r.a.createElement(tt.b,{className:Wn.a.link,to:"/paciente"},r.a.createElement(Me.a,{className:"secondary-btn ".concat(Wn.a.btn),size:"lg"},"Ingresa como paciente")),r.a.createElement(tt.b,{className:Wn.a.link,to:"terapeuta"},r.a.createElement(Me.a,{className:"primary-btn ".concat(Wn.a.btn),size:"lg"},"Ingresa como terapeuta"))))),r.a.createElement(on,{absolute:!0,width:"700px"}))},Vn=Hn,Gn=a(86),Kn=a.n(Gn),Xn=function(){return r.a.createElement("div",{className:"flex ".concat(Kn.a.container)},r.a.createElement("div",{className:Kn.a.innerContainer},r.a.createElement("p",{className:Kn.a.title},"\xa1En todos tus dispositivos!"),r.a.createElement("p",{className:Kn.a.description},"SATReLO est\xe1 cuidadosamente dise\xf1ado para que se vea y funcione bien en todos tus dispositivos, ya sean computadores, tablets o smartphones."),r.a.createElement("div",{className:"flex ".concat(Kn.a.imageContainer)},r.a.createElement("img",{alt:"",className:Kn.a.image,src:"images/landing/mobile.png"}))))},Zn=Xn,Yn={therapist:{role:"terapeuta",features:[{description:"Configura y genera actividades personalizadas\n                                de acuerdo a las necesidades del paciente",id:1,logo:"/images/landing/settings.png",title:"Configura actividades",type:"feature"},{description:"Asigna las actividades generadas al paciente \n                                correspondiente",id:2,logo:"/images/landing/user.png",title:"As\xedgnalas al paciente",type:"feature"},{description:"Recibe retroalimentaci\xf3n del progreso del paciente\n                                en las actividades",id:3,logo:"/images/landing/feedback.png",title:"Recibe retroalimentaci\xf3n",type:"feature"}]},patient:{role:"paciente",features:[{description:"Realiza las actividades asignadas por el\n                                terapeuta",id:1,logo:"/images/landing/game.png",title:"Juega las actividades",type:"feature"},{description:"Gana puntos a medida que completas las\n                                actividades asignadas",id:2,logo:"/images/landing/score.png",title:"Acumula puntos",type:"feature"},{description:"Intercambia los puntos en la tienda por\n                                coleccionables",id:3,logo:"/images/landing/collection.png",title:"Completa la colecci\xf3n",type:"feature"}]}},Jn=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state=Object(St.a)(Object(St.a)({},n.state),{},{featuresData:Yn}),n}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(kn.a,{noGutters:!0},r.a.createElement(yn.a,{xs:"12",className:_n.a.container},r.a.createElement(Vn,null),r.a.createElement("div",{className:_n.a.mainPhrase},"\xbfC\xf3mo ayuda SATReLO en las terapias de rehabilitaci\xf3n?",r.a.createElement("p",{className:_n.a.mainIdea},"SATReLO ayuda en la mecanizaci\xf3n de la estructuraci\xf3n del lenguaje oral y escrito por medio de la realizaci\xf3n de actividades a modo de juegos")),r.a.createElement("div",{className:_n.a.features},r.a.createElement("p",{className:_n.a.featuresTitle},"\xbfC\xf3mo funciona?"),r.a.createElement(Ln,this.state.featuresData.therapist),r.a.createElement(Ln,this.state.featuresData.patient)),r.a.createElement(Cn,null),r.a.createElement(Zn,null),r.a.createElement(wn,null),r.a.createElement(zn,null)))}}]),Object(l.a)(a,[{key:"componentDidMount",value:function(){this.props.setBar("standard"),this.props.setParallax(!1),this.props.showMobileMenu(!1),this.props.setUser(null),this.props.showAvatar(!1)}}]),a}(n.Component),Qn={setUser:Va,setBar:ce,setParallax:de,showAvatar:pe,showMobileMenu:he},$n=Object(h.b)(null,Qn)(Jn),er=$n,tr=a(87),ar=a.n(tr),nr=a(22),rr=a(72),ir="https://satrelo-qa.ddns.net/api",sr=function(e){return function(t){t({type:E,payload:{message:e}})}},cr=a(99),or=a.n(cr),lr=function(e){return r.a.createElement("div",{className:or.a.container},r.a.createElement("div",{className:or.a.label},"Nombres y apellidos"),r.a.createElement("div",{className:or.a.infoText},e.user.name," ",e.user.last_name),r.a.createElement("div",{className:or.a.label},"Correo electr\xf3nico"),r.a.createElement("div",{className:or.a.infoText},e.user.email))},ur=lr,dr=a(177),pr=a.n(dr),mr=a(178),hr=a.n(mr),vr=a(491),br=a(492),fr=a(236),gr=a(179),_r=a.n(gr),kr=function(e){var t="https://satrelo-qa.ddns.net"+e.item.img_path;return r.a.createElement("div",{className:"flex ".concat(_r.a.container)},r.a.createElement("img",{alt:"",className:_r.a.image,src:t}))},yr=kr,Or=a(76),Er=a.n(Or),Sr="https://satrelo-qa.ddns.net/api",Cr=function(e,t){return function(){var a=Object(fe.a)(be.a.mark((function a(n){var r,i,s,c,o,l,u,d;return be.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=t.skinId,i="".concat(Sr,"/patient/").concat(e,"/skin/").concat(r),a.prev=2,a.next=5,_e.a.get(i);case 5:return s=a.sent,c=s.data,o=c.message,l=c.status,u=200!==l,200===l&&(d=t.single,n({type:d?R:L,payload:{data:t}})),a.abrupt("return",{error:u,message:o});case 12:return a.prev=12,a.t0=a.catch(2),a.abrupt("return",{error:!0,message:a.t0});case 15:case"end":return a.stop()}}),a,null,[[2,12]])})));return function(e){return a.apply(this,arguments)}}()},jr=function(e,t){return function(){var a=Object(fe.a)(be.a.mark((function a(n){var r,i,s,c,o,l,u;return be.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r="".concat(Sr,"/patient/").concat(e,"/skin"),i=t.skins,a.prev=2,a.next=5,_e.a.post(r,{skins:i});case 5:return s=a.sent,c=s.data,o=c.message,l=c.status,u=200!==l,200===l&&(delete t.skins,t.single?n({type:R,payload:{data:t}}):i.forEach((function(e){t.skinId=e.id,n({type:L,payload:{data:t}})}))),a.abrupt("return",{error:u,message:o});case 12:return a.prev=12,a.t0=a.catch(2),a.abrupt("return",{error:!0,message:a.t0});case 15:case"end":return a.stop()}}),a,null,[[2,12]])})));return function(e){return a.apply(this,arguments)}}()},xr=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={loading:!1,price:n.props.price+n.props.collectable.price},n.onBuyClicked=n.onBuyClicked.bind(Object(o.a)(n)),n}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:Er.a.container},r.a.createElement("img",{alt:"",className:Er.a.collectableImg,src:"https://satrelo-qa.ddns.net"+this.props.img_path}),r.a.createElement("p",{className:Er.a.alt},this.props.name),this.props.owned?r.a.createElement("div",{className:Er.a.owned},"Ya tienes este \xedtem"):this.checkPrice()?r.a.createElement("div",{className:"flex ".concat(Er.a.btnContainer)},r.a.createElement(Me.a,{className:"primary-btn ".concat(Er.a.btn),onClick:this.onBuyClicked},this.state.loading?r.a.createElement(ma.a,{color:"light",size:"sm"}):r.a.createElement("span",null,"Comprar por ",this.state.price," puntos"))):r.a.createElement("div",{className:Er.a.cannotBuy},"Necesitas ",this.state.price," puntos. A\xfan no puedes comprar este \xedtem"))}}]),Object(l.a)(a,[{key:"componentDidMount",value:function(){this.checkUserSkin()}},{key:"componentDidUpdate",value:function(e){e.collectable!==this.props.collectable&&this.updatePrice()}},{key:"buildData",value:function(e){var t={collectableId:this.props.collectable.id,collectionId:this.props.collectable.id_collection,single:!1};return e&&(t.skinId=this.props.id),t}},{key:"buySkins",value:function(){var e=Object(fe.a)(be.a.mark((function e(t){var a,n,r;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=this.buildData(!1)).skins=t,this.setState({loading:!0}),n=this.props.user,r=n.score-this.state.price,e.next=7,this.props.updateUser({id:n.id,score:r},n.id);case 7:return e.next=9,this.props.setPatientSkins(this.props.userId,a);case 9:this.setState({loading:!1});case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"checkPrice",value:function(){return this.props.user.score>=this.state.price}},{key:"checkUserSkin",value:function(){var e=Object(fe.a)(be.a.mark((function e(){var t;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.buildData(!0),this.setState({loading:!0}),e.next=4,this.props.getPatientSkin(this.props.userId,t);case 4:this.setState({loading:!1});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onBuyClicked",value:function(){var e=this;if(this.props.user.score>=this.state.price){var t=[{id:this.props.id}];if(this.props.price<this.state.price)Object.values(this.props.collectable.Skins).forEach((function(a){a.is_default&&a.id!==e.props.id&&t.push({id:a.id})}));this.buySkins(t)}}},{key:"updatePrice",value:function(){this.props.price!==this.state.price&&this.setState({price:this.props.price})}}]),a}(n.Component),Nr={getPatientSkin:Cr,setPatientSkins:jr,updateUser:Ha},wr=Object(h.b)((function(e){return{collectable:e.collection.collectable,user:e.user.user}}),Nr)(xr),Ir=wr,Tr=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={activeIndex:0,animating:!1},n.animateItem=n.animateItem.bind(Object(o.a)(n)),n.buildItems=n.buildItems.bind(Object(o.a)(n)),n.goToIndex=n.goToIndex.bind(Object(o.a)(n)),n.next=n.next.bind(Object(o.a)(n)),n.previous=n.previous.bind(Object(o.a)(n)),n}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.kind,t=hr.a.style;return"avatar"!==e&&(t="".concat(t," ").concat(hr.a.border)),r.a.createElement(vr.a,{className:t,activeIndex:this.state.activeIndex,interval:!1,next:this.next,previous:this.previous},this.buildItems(),r.a.createElement(br.a,{direction:"prev",onClickHandler:this.previous}),r.a.createElement(br.a,{direction:"next",onClickHandler:this.next}))}}]),Object(l.a)(a,[{key:"animateItem",value:function(e){this.setState({animating:e})}},{key:"buildItems",value:function(){var e=this;return this.props.items.map((function(t){return r.a.createElement(fr.a,{key:t.id,onExiting:function(){e.animateItem(!0)},onExited:function(){e.animateItem(!1)}},"avatar"===e.props.kind?r.a.createElement(yr,{item:t}):r.a.createElement(Ir,Object.assign({},t,{userId:e.props.userId})))}))}},{key:"goToIndex",value:function(e){this.state.animating||(this.setState({activeIndex:e}),this.onCarouselChanged(e))}},{key:"next",value:function(){if(!this.state.animating){var e=this.state.activeIndex===this.props.items.length-1?0:this.state.activeIndex+1;this.setState({activeIndex:e}),this.onCarouselChanged(e)}}},{key:"previous",value:function(){if(!this.state.animating){var e=0===this.state.activeIndex?this.props.items.length-1:this.state.activeIndex-1;this.setState({activeIndex:e}),this.onCarouselChanged(e)}}},{key:"onCarouselChanged",value:function(e){var t=this.props.items[e];this.props.onCarouselChanged(t)}}]),a}(n.Component),Ar=Tr,Pr=Ar,Dr=a(39),Mr=a.n(Dr),Ur=function(e){var t=20;return void 0!==e.padding&&(t=e.padding),r.a.createElement("div",{style:{border:"1px solid #E0E0E0",borderRadius:"3px",boxShadow:"3px 3px 10px -3px #E0E0E0",padding:"15px ".concat(t,"px"),width:"100%"}},e.children)},Lr=Ur,Rr={eye:{id:1,name:"Ojos",dbalias:"eye",icon:"/images/other/eye_icon.png"},hair:{id:2,name:"Cabello",dbalias:"hair",icon:"/images/other/hair_icon.png"},torso:{id:3,name:"Torso",dbalias:"torso",icon:"/images/other/torso_icon.png"}},Fr={colors:{kind:"rounded",name:"colors",options:{blue:{id:1,button:"blue",colorHex:"#62ABDF",name:"Azul"},brown:{id:2,button:"brown",colorHex:"#55392F",name:"Caf\xe9"}},title:"Color de ojos"}},Br={colors:{kind:"rounded",name:"colors",options:{black:{id:1,button:"black",colorHex:"#030405",name:"Negro"},blonde:{id:2,button:"blonde",colorHex:"#FCD860",name:"Rubio"},brown:{id:3,button:"brown",colorHex:"#9D4427",name:"Caf\xe9"}},title:"Color de cabello"}},zr={colors:{kind:"rounded",name:"colors",options:{blue:{id:1,button:"blue",colorHex:"#1C3351",name:"Azul"},green:{id:2,button:"green",colorHex:"#279599",name:"Verde"},purple:{id:3,button:"purple",colorHex:"#612747",name:"Morado"}},title:"Color del torso"}},qr=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={options:Rr,eye:Fr,hair:Br,torso:zr,option:"eye"},n.onOptionClicked=n.onOptionClicked.bind(Object(o.a)(n)),n.onSectionOptionClicked=n.onSectionOptionClicked.bind(Object(o.a)(n)),n}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(Lr,{padding:0},r.a.createElement("div",{className:"".concat(Mr.a.container," ").concat(Mr.a.header)},r.a.createElement(kn.a,{noGutters:!0},this.buildOptions())),this.buildSections())}}]),Object(l.a)(a,[{key:"buildOptions",value:function(){var e=this;return Object.values(this.state.options).map((function(t){var a="ghost-btn ".concat(Mr.a.btn);return t.dbalias===e.state.option&&(a="".concat(a," ").concat(Mr.a.selected)),r.a.createElement(yn.a,{xs:"2",className:Mr.a.col,key:t.id},r.a.createElement(Me.a,{className:a,name:t.dbalias,onClick:e.onOptionClicked,style:{backgroundImage:"url(".concat(t.icon,")"),backgroundSize:"contain"}}))}))}},{key:"buildSections",value:function(){var e=this,t=this.state.option;return Object.values(this.state[t]).map((function(t,a){return r.a.createElement("div",{className:Mr.a.container,key:a},r.a.createElement("div",{className:Mr.a.title},t.title),r.a.createElement(kn.a,{noGutters:!0},e.buildSectionsOptions(t)))}))}},{key:"buildSectionsOptions",value:function(e){var t=this,a=e.kind,n=e.name;return Object.values(e.options).map((function(e){var i="ghost-btn ".concat(Mr.a.btn," ").concat(Mr.a[a]);e.selected&&(i="".concat(i," ").concat(Mr.a.selected));var s={};return e.colorHex&&(s={"--btnColor":e.colorHex,backgroundColor:e.colorHex}),r.a.createElement(yn.a,{xs:"2",className:Mr.a.col,key:e.id},r.a.createElement(Me.a,{className:i,name:"".concat(n,"-").concat(e.button,"-").concat(e.name),onClick:t.onSectionOptionClicked,style:s}))}))}},{key:"onOptionClicked",value:function(e){this.setState({option:e.target.name})}},{key:"onSectionOptionClicked",value:function(e){var t=e.target.name.split("-"),a=t[0],n=t[1],r=t[2],i=this.state.option,s=this.state[i];Object.values(s[a].options).forEach((function(e){e.selected=e.button===n})),this.setState(Object(nr.a)({},i,s)),this.props.onOptionSelected({option:i,section:a,selected:r})}}]),a}(n.Component),Wr=qr,Hr=Wr,Vr=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={current:null,eye:null,hair:null,torso:null},n.onCarouselChanged=n.onCarouselChanged.bind(Object(o.a)(n)),n.onOptionSelected=n.onOptionSelected.bind(Object(o.a)(n)),n}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.variations;return e=e?Object.values(e):[],r.a.createElement(kn.a,{className:pr.a.container,noGutters:!0},r.a.createElement(yn.a,{className:pr.a.carousel,sm:"12",md:"7"},e&&r.a.createElement(Pr,{items:e,kind:"avatar",onCarouselChanged:this.onCarouselChanged})),r.a.createElement(yn.a,{sm:"12",md:"5"},r.a.createElement(Hr,{onOptionSelected:this.onOptionSelected})))}}]),Object(l.a)(a,[{key:"componentDidMount",value:function(){this.props.user&&this.getVariations()}},{key:"componentDidUpdate",value:function(){if(this.props.user&&!this.props.variations&&this.getVariations(),this.props.variations){var e=Object.values(this.props.variations);this.state.current!==e[0]&&this.setState({current:e[0]})}}},{key:"getVariation",value:function(){var e=Object(fe.a)(be.a.mark((function e(){var t,a,n,r,i,s,c,o=this;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object.assign({},this.state),a=Object.assign({},t.current),delete t.current,n=Object.keys(t),r={id_avatar:a.id_avatar},n.forEach((function(e){var t=o.state[e];t&&(r[e]=t)})),delete a.id,delete a.img_path,delete a.thumbnail_path,r=Object(St.a)(Object(St.a)({},a),r),e.next=12,this.props.getAvatarVariation(r);case 12:return i=e.sent,s=i.data,c={id:this.props.user.id,id_avatar_variation:s.id},e.next=17,this.props.updateUser(c,this.props.user.id);case 17:return e.next=19,this.props.getUser(this.props.user.id);case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getVariations",value:function(){var e=Object(fe.a)(be.a.mark((function e(){var t,a,n;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.user,a=t.Avatar_Variation,n=t.gender,e.next=3,this.props.getAvatarVariations(n,a);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onCarouselChanged",value:function(e){e!==this.state.current&&this.setState({current:e})}},{key:"onOptionSelected",value:function(e){var t=this,a=e.option,n=e.section,r=e.selected,i=this.state[a];i?i[n]=r:i=Object(nr.a)({},n,r),this.setState(Object(nr.a)({},a,i),(function(){t.getVariation()}))}}]),a}(n.Component),Gr={getAvatarVariation:function(e){return function(){var t=Object(fe.a)(be.a.mark((function t(a){var n,r,i,s,c,o,l;return be.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(ir,"/avatar/variation"),t.prev=1,t.next=4,_e.a.get(n,{params:Object(St.a)({},e)});case 4:return r=t.sent,i=r.data,s=i.data,c=i.message,o=i.status,l=200!==o,a({type:S,payload:{variation:200===o?s:null}}),t.abrupt("return",{data:s,error:l,message:c});case 12:return t.prev=12,t.t0=t.catch(1),t.abrupt("return",{error:!0,message:t.t0});case 15:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e){return t.apply(this,arguments)}}()},getAvatarVariations:function(e,t){return function(){var a=Object(fe.a)(be.a.mark((function a(n){var r,i,s,c,o,l,u,d,p;return be.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r="".concat(ir,"/avatar/variations/").concat(e),a.prev=1,a.next=4,_e.a.get(r);case 4:return i=a.sent,s=i.data,c=s.data,o=s.status,l=s.message,u=200===o?c:{1:{id:1,id_avatar:1}},!(d=200!==o)&&t&&(u=Object.values(u),p=0,u.forEach((function(e,a){t.id===e.id&&(p=a)})),u.splice(p,1),u.unshift(t),u=Object.assign.apply(Object,[{}].concat(Object(rr.a)(u.map((function(e){return Object(nr.a)({},e.id,e)})))))),n({type:C,payload:{variations:u}}),a.abrupt("return",{error:d,message:l});case 13:return a.prev=13,a.t0=a.catch(1),a.abrupt("return",{error:!0,message:a.t0});case 16:case"end":return a.stop()}}),a,null,[[1,13]])})));return function(e){return a.apply(this,arguments)}}()},getUser:qa,updateUser:Ha},Kr=Object(h.b)((function(e){return{user:e.user.user,variations:e.avatar.variations}}),Gr)(Vr),Xr=a(141),Zr=a.n(Xr),Yr=function(e){var t="feedback"===e.page?"10":"9",a=e.mt?e.mt:62;return r.a.createElement("div",{className:"flex ".concat(Zr.a.outerContainer)},r.a.createElement(kn.a,{className:"justify-content-center ".concat(Zr.a.rowContainer),noGutters:!0},r.a.createElement(yn.a,{xs:"12",sm:"12",md:"12",lg:"12",xl:t},r.a.createElement("div",{className:Zr.a.container,style:{"--mt":"".concat(a,"px"),"--pt":"".concat(e.pt,"px")}},e.children))))},Jr=a(64),Qr=a.n(Jr),$r=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.user;return r.a.createElement("div",{className:Qr.a.container},r.a.createElement("div",{className:Qr.a.header}),r.a.createElement("div",{className:"flex ".concat(Qr.a.userContainer)},r.a.createElement(kn.a,{className:"justify-content-center ".concat(Qr.a.row),noGutters:!0},r.a.createElement(yn.a,{className:"flex ".concat(Qr.a.col),xs:"12",xl:"9"},e&&e.profile_img?r.a.createElement("img",{alt:"",className:Qr.a.uimage,src:"".concat("https://satrelo-qa.ddns.net").concat(e.profile_img)}):e&&e.thumbnail_alias?r.a.createElement("div",{className:"flex ".concat(Qr.a.alias),style:{backgroundColor:e.color}},e.thumbnail_alias):null,r.a.createElement("div",{className:Qr.a.uname},e&&r.a.createElement("span",null,e.name," ",e.last_name))))))}}]),a}(n.Component),ei=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={option:"avatar"},n.onOptionClicked=n.onOptionClicked.bind(Object(o.a)(n)),n}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.user,t=null;e&&(t=e.Role.name);var a="ghost-btn ".concat(ar.a.btn),n=this.state.option,i="avatar"===n?"".concat(a," ").concat(ar.a.selected):a,s="info"===n?"".concat(a," ").concat(ar.a.selected):a;return r.a.createElement("div",{className:ar.a.container},r.a.createElement($r,{user:e}),r.a.createElement(Yr,{mt:298},r.a.createElement("div",{className:ar.a.options},t===dt?r.a.createElement("span",{className:"flex ".concat(ar.a.optContainer)},r.a.createElement(Me.a,{className:s,name:"info",onClick:this.onOptionClicked},"Informaci\xf3n"),r.a.createElement(Me.a,{className:i,name:"avatar",onClick:this.onOptionClicked},"Avatar")):null),"avatar"===this.state.option?r.a.createElement(Kr,null):r.a.createElement(ur,{user:e})))}}]),Object(l.a)(a,[{key:"componentWillUnmount",value:function(){this.props.setAvatarVariations(null)}},{key:"onOptionClicked",value:function(e){this.setState({option:e.target.name})}}]),a}(n.Component),ti={setAvatarVariations:function(e){return function(t){t({type:C,payload:{variations:e}})}}},ai=Object(h.b)((function(e){return{user:e.user.user}}),ti)(ei),ni=a(180),ri=a.n(ni),ii=a(65),si=a.n(ii),ci=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).getFormattedDate=function(e){return ca(e)},n.state={loading:!1,session:null},n.onPlayClicked=n.onPlayClicked.bind(Object(o.a)(n)),n.onTutorialClicked=n.onTutorialClicked.bind(Object(o.a)(n)),n}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.activity,a=e.id;if(this.state.session){var n="/paciente/".concat(a,"/actividades/").concat(t.id)+"/sesiones/".concat(this.state.session.id);return r.a.createElement(p.a,{to:n,push:!0})}var i=t.date_from.split("T")[0],s=t.Activity.logo_path;return r.a.createElement("div",{className:"flex ".concat(si.a.container)},r.a.createElement("img",{alt:"",className:si.a.gameImage,src:"https://satrelo-qa.ddns.net"+s}),r.a.createElement("div",{className:si.a.gameContainer},r.a.createElement("div",{className:"flex"},r.a.createElement("p",{className:si.a.gameTitle},t.Activity.name),r.a.createElement("p",{style:{fontWeight:600,marginBottom:0}},this.getFormattedDate(i))),t.Syntactic_Structure&&r.a.createElement("p",{style:{fontWeight:600}},t.Syntactic_Structure.name),r.a.createElement("p",{className:si.a.gameDescription},t.Activity.description),r.a.createElement("div",{className:"flex ".concat(si.a.btnContainer)},r.a.createElement(Me.a,{className:"simple-btn ".concat(si.a.btn),onClick:this.onTutorialClicked},"Tutorial"),r.a.createElement(Me.a,{className:"".concat(si.a.btn," pdf-btn"),onClick:this.onPlayClicked},this.state.loading?r.a.createElement(ma.a,{color:"light",size:"sm"}):r.a.createElement("span",null,"Jugar")))))}}]),Object(l.a)(a,[{key:"onPlayClicked",value:function(){var e=Object(fe.a)(be.a.mark((function e(){var t,a,n,r,i,s=this;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),t=this.props.activity,e.next=4,this.props.createActivitySession(t.id);case 4:a=e.sent,n=a.data,r=a.error,i=a.message,this.setState({loading:!1}),r?this.props.setNotification({error:r,message:i,slide:!0}):this.setState({session:n},(function(){s.props.setActivity(t),s.props.setFullScreen(!0)}));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onTutorialClicked",value:function(){var e={title:"Video tutorial",type:"video",videoUrl:this.props.activity.Mechanic.tutorial_path};this.props.setModal(e)}}]),a}(n.Component),oi={createActivitySession:function(e){return function(){var t=Object(fe.a)(be.a.mark((function t(a){var n,r,i,s,c,o,l,u;return be.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(Ca,"/session"),r={date_start:new Date,id_activity_user:e},t.prev=2,t.next=5,_e.a.post(n,{session:r});case 5:return i=t.sent,s=i.data,c=s.data,o=s.message,l=s.status,u=200!==l,t.abrupt("return",{data:c,error:u,message:o});case 11:return t.prev=11,t.t0=t.catch(2),t.abrupt("return",{error:!0,message:t.t0});case 14:case"end":return t.stop()}}),t,null,[[2,11]])})));return function(e){return t.apply(this,arguments)}}()},setActivity:Na,setFullScreen:oe,setModal:le,setNotification:ue},li=Object(h.b)(null,oi)(ci),ui=a(142),di=a.n(ui),pi=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.ui.vOffset;return r.a.createElement("div",{className:"flex ".concat(di.a.outerContainer)},r.a.createElement(kn.a,{className:di.a.rowContainer,noGutters:!0},r.a.createElement(yn.a,{xs:"12",sm:"12",md:{size:7,offset:5},style:{"--vOffset":"".concat(e,"px")}},r.a.createElement("div",{className:di.a.container},this.props.children))))}}]),a}(n.Component),mi=Object(h.b)((function(e){return{ui:e.ui}}))(pi),hi=["Tambi\xe9n puedes cambiar tus puntos por diferentes aspectos. !Colecci\xf3nalos todos!"],vi=["!Aqu\xed puedes cambiar tus puntos por la colecci\xf3n que m\xe1s te guste!"],bi=["\xa1Bienvenido a SATReLO! Es hora de jugar. Para iniciar ingresa tu nombre y clave.","\xa1Hola! Vamos a divertirnos juntos. Para iniciar ingresa tu nombre y clave."],fi=["Elige la opci\xf3n jugar de una de las actividades para comenzar a divertirnos."],gi=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={loading:!1},n}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.match.params.pid,t=this.props.activities;return t=t?Object.values(t):[],r.a.createElement(mi,null,r.a.createElement("p",{className:ri.a.title},"Mis actividades"),r.a.createElement("div",{className:ri.a.listContainer},this.state.loading?r.a.createElement(va,{color:"light"}):t&&t.length>0?t.map((function(t){return r.a.createElement(li,{activity:t,id:e,key:t.id})})):r.a.createElement(pa,{color:"white"},"A\xfan no tienes actividades asignadas...")))}}]),Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=Object(fe.a)(be.a.mark((function e(){var t;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.pid,this.setState({loading:!0}),e.next=4,this.props.getActivities(t);case 4:this.setState({loading:!1});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){if(this.props.user){var e=fi[Math.floor(Math.random()*fi.length)];(e="!".concat(this.props.user.name,"! ").concat(e))!==this.props.avatar.message&&this.props.setMessage(e)}}},{key:"componentWillUnmount",value:function(){this.props.setActivities(null)}}]),a}(n.Component),_i={getActivities:xa,setActivities:wa,setMessage:sr},ki=Object(h.b)((function(e){return{activities:e.activity.activities,avatar:e.avatar,user:e.user.user}}),_i)(gi),yi=a(88),Oi=a.n(yi),Ei=hi,Si=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={currentSkin:null,loading:!0,userId:null},n.onCarouselChanged=n.onCarouselChanged.bind(Object(o.a)(n)),n}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.collectable;return r.a.createElement(mi,null,this.state.loading?r.a.createElement(va,{color:"light"}):e?r.a.createElement("div",{className:Oi.a.container},r.a.createElement("div",{className:"flex"},r.a.createElement("div",{className:Oi.a.title},e.name),r.a.createElement("div",{className:"flex ".concat(Oi.a.score)},r.a.createElement("div",null,"Tienes ",this.props.user&&this.props.user.score),r.a.createElement("img",{alt:"",className:Oi.a.scoreIcon,src:"/images/other/star.png"}))),r.a.createElement(Pr,{items:Object.values(e.Skins),onCarouselChanged:this.onCarouselChanged,userId:this.state.userId}),r.a.createElement("p",{className:Oi.a.descriptionTitle},"Resumen"),r.a.createElement("p",{className:Oi.a.description},this.state.currentSkin&&this.state.currentSkin.summary)):r.a.createElement(pa,{color:"white"},"No se encontr\xf3 informaci\xf3n del coleccionable."))}}]),Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=Ei[Math.floor(Math.random()*Ei.length)];this.props.setMessage(t),this.setState({userId:this.props.match.params.pid},(function(){e.getCollectableInfo()}))}},{key:"componentWillUnmount",value:function(){this.props.setCollectable(null)}},{key:"getCollectableInfo",value:function(){var e=Object(fe.a)(be.a.mark((function e(){var t,a,n,r,i,s,c,o;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),t=this.props.match.params,a=t.id,n=t.cid,e.next=4,this.props.getCollectable(a,n);case 4:r=e.sent,i=r.data,s=r.error,c=Object.values(i.Skins),o=s?null:c[0],this.setState({currentSkin:o,loading:!1});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onCarouselChanged",value:function(e){this.setState({currentSkin:e})}}]),a}(n.Component),Ci={getCollectable:function(e,t){return function(){var a=Object(fe.a)(be.a.mark((function a(n){var r,i,s,c,o,l,u;return be.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r="".concat(Sr,"/collection/").concat(e,"/collectable/").concat(t),a.prev=1,a.next=4,_e.a.get(r);case 4:return i=a.sent,s=i.data,c=s.data,o=s.message,l=s.status,u=200!==l,n({type:U,payload:{collectable:200===l?c:null}}),a.abrupt("return",{data:c,error:u,message:o});case 12:return a.prev=12,a.t0=a.catch(1),a.abrupt("return",{data:null,error:!0,message:a.t0});case 15:case"end":return a.stop()}}),a,null,[[1,12]])})));return function(e){return a.apply(this,arguments)}}()},setCollectable:function(e){return function(t){t({type:U,payload:{collectable:e}})}},setMessage:sr},ji=Object(h.b)((function(e){return{collectable:e.collection.collectable,user:e.user.user}}),Ci)(Si),xi=a(113),Ni=a.n(xi),wi=a(114),Ii=a.n(wi),Ti=a(53),Ai=a.n(Ti),Pi=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={loading:!1},n.onBuyClicked=n.onBuyClicked.bind(Object(o.a)(n)),n}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.userId,t=this.props.collectable,a=t.id,n=t.id_collection,i=t.Skins.img_path;return r.a.createElement("div",{className:Ai.a.container},r.a.createElement(tt.b,{className:"ghost-btn ".concat(Ai.a.btn),to:"/paciente/".concat(e,"/colecciones/").concat(n,"/coleccionable/").concat(a)}),r.a.createElement("img",{alt:"",className:Ai.a.collectableImg,src:"https://satrelo-qa.ddns.net"+i}),r.a.createElement("div",{className:Ai.a.info},r.a.createElement("p",{className:Ai.a.name},t.name),r.a.createElement("p",{className:Ai.a.points},"Necesitas ",t.price," puntos")),t.Skins.owned?r.a.createElement("div",{className:Ai.a.owned},"Adquirido"):this.checkPrice()?r.a.createElement(Me.a,{className:"primary-btn ".concat(Ai.a.btnBuy),onClick:this.onBuyClicked},this.state.loading?r.a.createElement(ma.a,{color:"",size:"sm"}):r.a.createElement("span",null,"Comprar")):r.a.createElement("div",{className:Ai.a.cannotBuy},"A\xfan no puedes comprar este \xedtem"))}}]),Object(l.a)(a,[{key:"componentDidMount",value:function(){this.props.userId&&this.checkUserSkin()}},{key:"buildData",value:function(e){var t=this.props.collectable,a={collectableId:t.id,collectionId:t.id_collection,single:!0};return e&&(a.skinId=t.Skins.id),a}},{key:"buySkin",value:function(){var e=Object(fe.a)(be.a.mark((function e(t){var a,n,r,i,s;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=this.buildData(!1)).skins=t,this.setState({loading:!0}),n=this.props,r=n.collectable,i=n.user,s=i.score-r.price,e.next=7,this.props.updateUser({id:i.id,score:s},i.id);case 7:return e.next=9,this.props.setPatientSkins(this.props.userId,a);case 9:this.setState({loading:!1});case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"checkPrice",value:function(){var e=this.props,t=e.collectable;return e.user.score>=t.price}},{key:"checkUserSkin",value:function(){var e=Object(fe.a)(be.a.mark((function e(){var t;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.buildData(!0),this.setState({loading:!0}),e.next=4,this.props.getPatientSkin(this.props.userId,t);case 4:this.setState({loading:!1});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onBuyClicked",value:function(){var e=this.props,t=e.collectable;if(e.user.score>=t.price){var a=this.props.collectable.Skins;this.buySkin([a])}}}]),a}(n.Component),Di={getPatientSkin:Cr,setPatientSkins:jr,updateUser:Ha},Mi=Object(h.b)((function(e){return{user:e.user.user}}),Di)(Pi),Ui=function(e){var t=Object.values(e.Collectables);return r.a.createElement("div",{className:Ii.a.container},r.a.createElement("p",{className:Ii.a.title},"Colecci\xf3n de ",e.name),r.a.createElement(kn.a,{className:Ii.a.rowContainer,noGutters:!0},t&&t.map((function(t){return r.a.createElement(yn.a,{className:Ii.a.col,sm:"12",md:"4",key:t.id},r.a.createElement(Mi,{collectable:t,userId:e.userId}))}))))},Li=vi,Ri=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={loading:!1,userId:null},n}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.props.collections;return t=t?Object.values(t):[],r.a.createElement(mi,null,r.a.createElement("div",{className:Ni.a.container},r.a.createElement("div",{className:"flex"},r.a.createElement("div",{className:Ni.a.title},"Colecciones"),r.a.createElement("div",{className:"flex ".concat(Ni.a.score)},r.a.createElement("div",null,"Tienes ",this.props.user&&this.props.user.score),r.a.createElement("img",{alt:"",className:Ni.a.scoreIcon,src:"/images/other/star.png"}))),this.state.loading?r.a.createElement(va,{color:"light"}):t&&t.length>0?t.map((function(t){return r.a.createElement(Ui,Object.assign({},t,{key:t.id,userId:e.state.userId}))})):r.a.createElement(pa,{color:"white"},"No se encontraron colecciones.")))}}]),Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=Li[Math.floor(Math.random()*Li.length)];this.props.setMessage(t),this.setState({userId:this.props.match.params.pid},(function(){e.getCollectionsList()}))}},{key:"componentWillUnmount",value:function(){this.props.setCollections(null)}},{key:"getCollectionsList",value:function(){var e=Object(fe.a)(be.a.mark((function e(){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.next=3,this.props.getCollections();case 3:this.setState({loading:!1});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),a}(n.Component),Fi={getCollections:function(){return function(){var e=Object(fe.a)(be.a.mark((function e(t){var a,n,r,i,s,c,o;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(Sr,"/collection"),e.prev=1,e.next=4,_e.a.get(a);case 4:return n=e.sent,r=n.data,i=r.data,s=r.message,c=r.status,o=200!==c,t({type:M,payload:{collections:200===c?i:null}}),e.abrupt("return",{error:o,message:s});case 12:return e.prev=12,e.t0=e.catch(1),e.abrupt("return",{error:!0,message:e.t0});case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}()},setCollections:function(e){return function(t){t({type:M,payload:{collections:e}})}},setMessage:sr},Bi=Object(h.b)((function(e){return{collections:e.collection.collections,user:e.user.user}}),Fi)(Ri),zi=a(89),qi=a.n(zi),Wi=a(143),Hi=a.n(Wi),Vi=a(100),Gi=a.n(Vi),Ki=function(e){var t="delete"===e.kind?Gi.a.btnInv:Gi.a.btn;return"not"===e.kind&&(t="".concat(t," ").concat(Gi.a.bgWhite)),r.a.createElement(Me.a,{className:"ghost-btn ".concat(t),onClick:function(){"delete"===e.kind?e.onDeletePassClicked():"select"===e.kind&&e.onPassButtonClicked({name:e.name,src:e.src})},style:{cursor:"not"===e.kind?"default":"pointer"}},"delete"===e.kind?r.a.createElement(qe.a,{icon:We.j,size:"2x",style:{color:"black"}}):!e.src||e.src&&""===e.src.trim()?r.a.createElement("div",{className:Gi.a.icon}):r.a.createElement("img",{alt:"",className:Gi.a.icon,src:e.src}))},Xi=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={passwordOptions:[{id:1,kind:"select",name:"\xe1rbol",src:"/images/pwd/tree.png"},{id:2,kind:"select",name:"coraz\xf3n",src:"/images/pwd/heart.png"},{id:3,kind:"select",name:"flor",src:"/images/pwd/flower.png"},{id:4,kind:"select",name:"nube",src:"/images/pwd/cloud.png"},{id:5,kind:"select",name:"sol",src:"/images/pwd/sun.png"}],optionsSelected:[{id:1,kind:"not",name:"",src:""},{id:2,kind:"not",name:"",src:""},{id:3,kind:"not",name:"",src:""},{id:4,kind:"not",name:"",src:""}]},n.onDeleteButtonClicked=n.onDeleteButtonClicked.bind(Object(o.a)(n)),n.onPasswordOptionClicked=n.onPasswordOptionClicked.bind(Object(o.a)(n)),n}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:Hi.a.container},r.a.createElement("div",{className:"flex ".concat(Hi.a.btnContainer)},this.state.passwordOptions.map((function(t){return r.a.createElement(Ki,Object.assign({key:t.id},t,{onPassButtonClicked:e.onPasswordOptionClicked}))}))),r.a.createElement("div",{className:"flex ".concat(Hi.a.btnContainer)},this.state.optionsSelected.map((function(e){return r.a.createElement(Ki,Object.assign({key:e.id},e))})),r.a.createElement(Ki,{kind:"delete",onDeletePassClicked:this.onDeleteButtonClicked})))}}]),Object(l.a)(a,[{key:"onDeleteButtonClicked",value:function(){var e=this.state.optionsSelected;e.forEach((function(e){e.name="",e.src=""})),this.setState({optionsSelected:e})}},{key:"onPasswordOptionClicked",value:function(e){var t=this,a=this.state.optionsSelected,n=!1;a.forEach((function(t){n||""!==t.name.trim()||(t.name=e.name,t.src=e.src,n=!0)})),this.setState({optionsSelected:a},(function(){var e=t.state.optionsSelected.filter((function(e){return""!==e.name.trim()})).map((function(e){return e.name}));t.props.setPassword(e)}))}}]),a}(n.Component),Zi=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={error:null,loading:!1,password:null,userId:null,username:""},n.onInputChanged=n.onInputChanged.bind(Object(o.a)(n)),n.onForgotClicked=n.onForgotClicked.bind(Object(o.a)(n)),n.onLogin=n.onLogin.bind(Object(o.a)(n)),n.onLoginClicked=n.onLoginClicked.bind(Object(o.a)(n)),n.setPassword=n.setPassword.bind(Object(o.a)(n)),n}return Object(l.a)(a,[{key:"render",value:function(){var e=this.state.userId;return e?r.a.createElement(p.a,{to:"/paciente/".concat(e,"/actividades"),push:!0}):r.a.createElement("div",{className:qi.a.container},this.state.error&&r.a.createElement("div",{className:qi.a.error},this.state.error),r.a.createElement(ya.a,null,r.a.createElement(Oa.a,null,r.a.createElement(Ya.a,{className:qi.a.label},"Escribe tu nombre de usuario"),r.a.createElement(Ea.a,{bsSize:"lg",onChange:this.onInputChanged,placeholder:"Por ejemplo, mvsierra",type:"text"})),r.a.createElement(Oa.a,null,r.a.createElement(Ya.a,{className:qi.a.label},"Marca tu clave"),r.a.createElement(Xi,{setPassword:this.setPassword}),r.a.createElement(Me.a,{className:"ghost-btn ".concat(qi.a.btnForgot),onClick:this.onForgotClicked},"\xbfOlvidaste tu clave?")),r.a.createElement(Me.a,{className:"primary-btn ".concat(qi.a.btn),onClick:this.onLoginClicked},this.state.loading?r.a.createElement(ma.a,{color:"light",size:"sm"}):r.a.createElement("span",null,"Entrar"))))}}]),Object(l.a)(a,[{key:"onInputChanged",value:function(e){this.setState({username:e.target.value})}},{key:"onForgotClicked",value:function(e){e.preventDefault();this.props.setModal({title:"Recuperaci\xf3n de la clave",type:"forgot_password",role:1})}},{key:"onLogin",value:function(){var e=Object(fe.a)(be.a.mark((function e(t,a){var n,r,i,s,c;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),n={username:t,password:a},e.next=4,this.props.login(n,ut);case 4:r=e.sent,i=r.error,s=r.message,c=r.userId,i&&(i=s),this.setState({error:i,loading:!1,userId:c});case 8:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"onLoginClicked",value:function(e){if(e.preventDefault(),!this.state.loading){var t=this.state,a=t.username,n=t.password;""!==a.trim()&&n?4===n.length?this.onLogin(a,n.join()):this.setState({error:"La clave debe tener 4 elementos"}):this.setState({error:"El usuario y la clave son obligatorios"})}}},{key:"setPassword",value:function(e){this.setState({password:e})}}]),a}(n.Component),Yi={login:jt,setModal:le},Ji=Object(h.b)(null,Yi)(Zi),Qi=bi,$i=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.ui.vOffset+60;return r.a.createElement(mi,null,r.a.createElement("div",{className:"flex",style:{alignItems:"center",height:"calc(100vh - ".concat(e,"px)"),justifyContent:"center"}},r.a.createElement(Ji,null)))}},{key:"componentDidMount",value:function(){var e=Qi[Math.floor(Math.random()*Qi.length)];this.props.setMessage(e),this.props.setBar("patient"),this.props.setParallax(!0),this.props.showMobileMenu(!1),this.props.setUser(null),this.props.showAvatar(!0)}}]),a}(n.Component),es={setBar:ce,setMessage:sr,setParallax:de,setUser:Va,showAvatar:pe,showMobileMenu:he},ts=Object(h.b)((function(e){return{ui:e.ui}}),es)($i),as=a(237),ns=a.n(as),rs=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={fullScreen:!1},n.fullRef=r.a.createRef(),n.onClosed=n.onClosed.bind(Object(o.a)(n)),n.onKeyHandler=n.onKeyHandler.bind(Object(o.a)(n)),n}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{onKeyDown:this.onKeyHandler,ref:this.fullRef,tabIndex:0},this.props.children)}}]),Object(l.a)(a,[{key:"componentDidMount",value:function(){document.addEventListener("fullscreenchange",this.onClosed),document.addEventListener("mozfullscreenchange",this.onClosed),document.addEventListener("webkitfullscreenchange",this.onClosed)}},{key:"componentDidUpdate",value:function(){this.props.fullScreen!==this.state.fullScreen&&(this.props.fullScreen?this.enterFullScreen():this.exitFullScreen())}},{key:"componentWillUnmount",value:function(){document.removeEventListener("fullscreenchange",this.onClosed),document.removeEventListener("mozfullscreenchange",this.onClosed),document.removeEventListener("webkitfullscreenchange",this.onClosed)}},{key:"enterFullScreen",value:function(){var e=Object(fe.a)(be.a.mark((function e(){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.fullRef.current.requestFullRequest){e.next=5;break}return e.next=3,this.fullRef.current.requestFullRequest();case 3:e.next=13;break;case 5:if(!this.fullRef.current.mozRequestFullScreen){e.next=10;break}return e.next=8,this.fullRef.current.mozRequestFullScreen();case 8:e.next=13;break;case 10:if(!this.fullRef.current.webkitRequestFullScreen){e.next=13;break}return e.next=13,this.fullRef.current.webkitRequestFullScreen();case 13:this.setState({fullScreen:!0}),this.props.onChange(!0);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"exitFullScreen",value:function(){var e=Object(fe.a)(be.a.mark((function e(){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullScreenElement)){e.next=15;break}if(!document.exitFullscreen){e.next=7;break}return e.next=5,document.exitFullscreen();case 5:e.next=15;break;case 7:if(!document.mozCancelFullScreen){e.next=12;break}return e.next=10,document.mozCancelFullScreen();case 10:e.next=15;break;case 12:if(!document.webkitExitFullScreen){e.next=15;break}return e.next=15,document.webkitExitFullScreen();case 15:this.setState({fullScreen:!1}),this.props.onChange(!1);case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onClosed",value:function(){!(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullScreenElement)&&this.state.fullScreen&&this.props.onClosed()}},{key:"onKeyHandler",value:function(e){8===e.keyCode&&e.preventDefault()}}]),a}(n.Component),is="https://satrelo-qa.ddns.net/file",ss=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).onClosed=n.onClosed.bind(Object(o.a)(n)),n.onChange=n.onChange.bind(Object(o.a)(n)),n}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.activity,a=e.user,n=null;if(t&&a){var i=this.props.match.params.sid,s=t.build_path;if(n="".concat(is,"/").concat(s,"/index.html")+"?portal=paciente"+"&session=".concat(i)+"&score=".concat(a.score)+"&token=".concat(this.props.auth.pacienteToken)+"&file_server=".concat(is)+"&server=".concat("https://satrelo-qa.ddns.net"),a.Therapists){var c=Object.values(a.Therapists);if(c.length>0){var o=c[0].Avatar_Variation.img_path;n+="&avatar=".concat(o)}}}return r.a.createElement(rs,{fullScreen:this.props.ui.fullScreen,onClosed:this.onClosed,onChange:this.onChange},r.a.createElement("div",{className:"flex ".concat(ns.a.container)},r.a.createElement("iframe",{height:window.outerHeight,src:n,title:"game",width:window.outerWidth})))}}]),Object(l.a)(a,[{key:"componentDidMount",value:function(){if(this.props.ui.fullScreen||this.redirectBack(),this.hideAvatar(),null===this.props.activity){var e=this.props.match.params.aid;this.props.getActivity(e)}}},{key:"componentDidUpdate",value:function(){this.hideAvatar()}},{key:"componentWillUnmount",value:function(){this.props.showAvatar(!0);var e=this.props.match.params.sid,t={date_end:new Date,id:e};this.props.updateActivitySession(t);var a={title:"Comenta sobre el desempe\xf1o del paciente en el juego",type:"new_comment",session:e};this.props.setModal(a);var n=this.props.user;this.props.getUser(n.id)}},{key:"hideAvatar",value:function(){this.props.ui.showAvatar&&this.props.showAvatar(!1)}},{key:"onClosed",value:function(){this.redirectBack()}},{key:"onChange",value:function(e){e||this.redirectBack()}},{key:"redirectBack",value:function(){this.props.history.goBack()}}]),a}(n.Component),cs={getActivity:ja,getUser:qa,setFullScreen:oe,setModal:le,showAvatar:pe,updateActivitySession:Ta},os=Object(h.b)((function(e){return{activity:e.activity.activity,auth:e.auth,ui:e.ui,user:e.user.user}}),cs)(ss),ls=a(54),us=a.n(ls),ds="https://satrelo-qa.ddns.net/api",ps=function(e){return function(){var t=Object(fe.a)(be.a.mark((function t(a){var n,r,i,s,c,o,l;return be.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(ds,"/user/").concat(e),t.prev=1,t.next=4,_e.a.get(n);case 4:return r=t.sent,i=r.data,s=i.data,c=i.message,o=i.status,l=200!==o,a({type:K,payload:{patient:200===o?s:null}}),t.abrupt("return",{error:l,message:c});case 12:return t.prev=12,t.t0=t.catch(1),t.abrupt("return",{error:!0,message:t.t0});case 15:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e){return t.apply(this,arguments)}}()},ms=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(){var a=Object(fe.a)(be.a.mark((function a(n){var r,i,s,c,o,l,u;return be.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=e?"".concat(ds,"/therapist/").concat(e,"/patient"):"".concat(ds,"/patient"),t&&(r="".concat(r,"?search=").concat(t)),a.prev=2,a.next=5,_e.a.get(r);case 5:return i=a.sent,s=i.data,c=s.data,o=s.message,l=s.status,u=200!==l,n({type:G,payload:{patients:200===l?c:null}}),a.abrupt("return",{error:u,message:o});case 13:return a.prev=13,a.t0=a.catch(2),a.abrupt("return",{error:!0,message:a.t0});case 16:case"end":return a.stop()}}),a,null,[[2,13]])})));return function(e){return a.apply(this,arguments)}}()},hs=a(44),vs=a.n(hs),bs=a(45),fs=a.n(bs),gs=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).onCommentsClicked=n.onCommentsClicked.bind(Object(o.a)(n)),n.onDeleteClicked=n.onDeleteClicked.bind(Object(o.a)(n)),n.onPDFClicked=n.onPDFClicked.bind(Object(o.a)(n)),n.onReassignClicked=n.onReassignClicked.bind(Object(o.a)(n)),n.onTutorialClicked=n.onTutorialClicked.bind(Object(o.a)(n)),n}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.activity.Activities_Sessions,t=Object.values(e);return r.a.createElement("div",{className:"flex ".concat(fs.a.container)},r.a.createElement(Me.a,{className:"pdf-btn ".concat(fs.a.btn),onClick:this.onPDFClicked,size:"sm"},"PDF Ficha"),r.a.createElement("div",{className:"flex"},r.a.createElement(Me.a,{className:"ghost-btn ".concat(fs.a.comments," ").concat(fs.a.mr),onClick:this.onCommentsClicked,size:"sm"},r.a.createElement(qe.a,{icon:We.b,size:"2x"})),r.a.createElement(Me.a,{className:"simple-btn ".concat(fs.a.btn," ").concat(fs.a.ml),onClick:this.onTutorialClicked,size:"sm"},"Tutorial"),r.a.createElement(Me.a,{className:"simple-btn ".concat(fs.a.btn," ").concat(fs.a.ml),onClick:this.onReassignClicked,size:"sm"},"Reasignar"),0===t.length&&r.a.createElement(Me.a,{className:"ghost-btn ".concat(fs.a.delete," ").concat(fs.a.ml),onClick:this.onDeleteClicked,size:"sm"},r.a.createElement(qe.a,{icon:We.i,size:"2x"}))))}}]),Object(l.a)(a,[{key:"onCommentsClicked",value:function(){var e={title:"Comentarios",type:"comments",data:this.props.activity.Activities_Sessions};this.props.setModal(e)}},{key:"onDeleteClicked",value:function(){var e=Object(fe.a)(be.a.mark((function e(){var t,a,n,r;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.activity.id,e.next=3,this.props.removeActivity(t);case 3:a=e.sent,n=a.error,r=a.message,this.props.setNotification({error:n,message:r,slide:!0});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onPDFClicked",value:function(){var e=this.props.activity.Mechanic.pdf_path,t="".concat("https://satrelo-qa.ddns.net").concat(e);window.open(t)}},{key:"onReassignClicked",value:function(){var e=Object(fe.a)(be.a.mark((function e(){var t,a,n,r,i,s,c;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.activity.id,a=new Date,(n=new Date).setDate(n.getDate()+7),r={id:t,date_from:a,date_to:n},e.next=7,this.props.updateActivity(r);case 7:i=e.sent,s=i.error,c=i.message,this.props.setNotification({error:s,message:c,slide:!0});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onTutorialClicked",value:function(){var e={title:"Video tutorial",type:"video",videoUrl:this.props.activity.Mechanic.tutorial_path};this.props.setModal(e)}}]),a}(n.Component),_s={removeActivity:function(e){return function(){var t=Object(fe.a)(be.a.mark((function t(a){var n,r,i,s,c,o;return be.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(Ca,"/activity/").concat(e),t.prev=1,t.next=4,_e.a.delete(n);case 4:return r=t.sent,i=r.data,s=i.message,c=i.status,(o=200!==c)||a({type:v,payload:{id:e}}),t.abrupt("return",{error:o,message:s});case 11:return t.prev=11,t.t0=t.catch(1),t.abrupt("return",{error:!0,message:t.t0});case 14:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}()},setModal:le,setNotification:ue,updateActivity:function(e){return function(){var t=Object(fe.a)(be.a.mark((function t(a){var n,r,i,s,c,o,l;return be.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(Ca,"/activity/").concat(e.id),t.prev=1,t.next=4,_e.a.put(n,{activity:e});case 4:return r=t.sent,i=r.data,s=i.data,c=i.message,o=i.status,(l=200!==o)||a({type:k,payload:{activity:s}}),t.abrupt("return",{error:l,message:c});case 11:return t.prev=11,t.t0=t.catch(1),t.abrupt("return",{error:!0,message:t.t0});case 14:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}()}},ks=Object(h.b)(null,_s)(gs),ys={1:{letter:"S",color:"#FF7043"},2:{letter:"AD",color:"#42A5F5"},3:{letter:"V",color:"#26A69A"}},Os=function(e){var t=e.id,a=ys[t],n="darkgray";return a.letter===e.letter&&(n=a.color),r.a.createElement("div",{style:{alignItems:"center",backgroundColor:"".concat(n),borderRadius:"50%",color:"white",display:"flex",fontWeight:"600",height:37,justifyContent:"center",width:37}},e.letter)},Es=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).getFormattedDate=function(e){return ca(e)},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.activity.id,t=this.props.activity.date_from.split("T")[0],a=this.props.activity.Syntactic_Structure?this.props.activity.Syntactic_Structure.id:null,n=this.props,i=n.pid,s=n.tid,c=this.props.activity.Activity.logo_path;return r.a.createElement("div",{className:vs.a.container},r.a.createElement("div",{className:"flex ".concat(vs.a.innerContainer)},r.a.createElement("img",{alt:"",className:vs.a.aimage,src:"https://satrelo-qa.ddns.net"+c}),r.a.createElement("div",{className:vs.a.rightContainer},r.a.createElement("div",{className:"flex ".concat(vs.a.nameContainer)},r.a.createElement("div",{className:vs.a.title},this.props.activity.Activity.name),r.a.createElement("div",{className:vs.a.date},this.getFormattedDate(t))),a&&r.a.createElement("div",{className:"flex ".concat(vs.a.syntContainer)},r.a.createElement(Os,{letter:"S",id:a}),r.a.createElement(Os,{letter:"AD",id:a}),r.a.createElement(Os,{letter:"V",id:a})),r.a.createElement("div",{className:vs.a.description},this.props.activity.Activity.description),r.a.createElement(tt.b,{to:"/terapeuta/".concat(s,"/pacientes/").concat(i,"/")+"actividades/".concat(e,"/evoluci\xf3n"),className:"ghost-btn ".concat(vs.a.btnEvolution)},"Ver evoluci\xf3n"),r.a.createElement(ks,{activity:this.props.activity}))))}}]),a}(n.Component),Ss=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={loading:!1},n}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.activities,a=e.patient,n=e.user,i=n?n.id:null,s=a?a.id:null;t=t?Object.values(t):[];var c=this.props.match.params.tid;return r.a.createElement("div",{className:us.a.container},r.a.createElement($r,{user:a}),r.a.createElement(Yr,{pt:0,mt:298},r.a.createElement("div",{className:"flex ".concat(us.a.titleContainer)},r.a.createElement("div",{className:us.a.title},"Actividades asignadas"),r.a.createElement("div",{className:"flex ".concat(us.a.btnContainer)},r.a.createElement(tt.b,{className:us.a.link,to:"/terapeuta/".concat(c,"/pacientes/").concat(s)+"/actividades/hist\xf3rico"},r.a.createElement(Me.a,{className:"primary-btn left ".concat(us.a.btn)},"Hist\xf3rico")),r.a.createElement(tt.b,{className:us.a.link,to:"/terapeuta/".concat(i,"/pacientes/").concat(s,"/configuracion")},r.a.createElement(Me.a,{className:"secondary-btn ".concat(us.a.btn)},"Agregar actividad")))),r.a.createElement("div",{className:us.a.listContainer},this.state.loading?r.a.createElement(va,{color:"primary"}):t&&t.length>0?t.map((function(e){return r.a.createElement(Es,{activity:e,key:e.id,pid:s,tid:c})})):r.a.createElement(pa,null,"Este paciente a\xfan no tiene actividades asignadas. Recuerda que puedes asignarle una actividad seleccionando la opci\xf3n Agregar actividad."))))}}]),Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=Object(fe.a)(be.a.mark((function e(){var t;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.pid,this.setState({loading:!0}),e.next=4,this.props.getActivities(t);case 4:return this.setState({loading:!1}),e.next=7,this.props.getPatient(t);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.props.setActivities(null),this.props.setPatient(null)}}]),a}(n.Component),Cs={getActivities:xa,getPatient:ps,setActivities:wa,setPatient:function(e){return function(t){t({type:K,payload:{patient:e}})}}},js=Object(h.b)((function(e){return{activities:e.activity.activities,patient:e.patient.patient,user:e.user.user}}),Cs)(Ss),xs=a(55),Ns=a.n(xs),ws=a(101),Is=a.n(ws),Ts=a(115),As=a.n(Ts),Ps=function(e){e.onOptionSelected(e.option)},Ds=function(e){var t=e.option.selected?As.a.selected:"";return r.a.createElement(Me.a,{className:"ghost-btn ".concat(As.a.container),onClick:function(){Ps(e)}},r.a.createElement("div",{className:"flex ".concat(As.a.inner," ").concat(t)},r.a.createElement("div",{className:As.a.name},e.option.name),r.a.createElement(qe.a,{icon:We.a,size:"2x"})))},Ms=function(e,t){e.onOptionSelected(t)},Us=function(e){var t=e.options;return t=t?Object.values(t):[],r.a.createElement("div",{className:Is.a.container},r.a.createElement("div",{className:Is.a.title},e.title),r.a.createElement("div",{className:Is.a.subtitle},e.subtitle),e.loading?r.a.createElement(va,{color:"primary"}):t&&t.length>0?r.a.createElement(kn.a,{className:Is.a.optionRow,noGutters:!0},t.map((function(t){return r.a.createElement(yn.a,{className:Is.a.optionCol,key:t.id,sm:{size:12},md:{size:4}},r.a.createElement(Ds,{onOptionSelected:function(t){Ms(e,t)},option:t}))}))):null)},Ls=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).onOptionSelected=n.onOptionSelected.bind(Object(o.a)(n)),n}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(Us,Object.assign({},this.props,{onOptionSelected:this.onOptionSelected}))}}]),Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=Object(fe.a)(be.a.mark((function e(){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.props.first&&this.getOptions({fieldId:this.props.id});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){var e=this;["mechanic","situations","times","reader"].forEach((function(t){e.props.resetDynamicOptions({fieldId:t})})),this.props.showCreateActivityButton(!1)}},{key:"buildDynamic",value:function(e){var t=this,a=this.props.reset;if(a&&a.forEach((function(e){t.props.resetDynamicOptions({fieldId:e})})),this.props.showCreateActivityButton(!1),this.props.setDynamicSelectedOptions({fieldId:this.props.id,optionId:e.id}),this.props.next){var n={fieldId:this.props.next},r=this.props.dynamic[this.props.next];if(r.required){var i=this.getRequiredIds(r.required);n.required=i}this.getOptions(n)}else this.props.showCreateActivityButton(!0)}},{key:"getOptions",value:function(){var e=Object(fe.a)(be.a.mark((function e(t){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.getDynamicOptions(t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getRequiredIds",value:function(e){var t=this,a={};return e.forEach((function(e){var n=t.props.dynamic[e];Object.values(n.options).forEach((function(e){e.selected&&(a["".concat(n.id,"Id")]=e.id)}))})),a}},{key:"onOptionSelected",value:function(e){this.buildDynamic(e)}}]),a}(n.Component),Rs={getDynamicOptions:function(e){return function(){var t=Object(fe.a)(be.a.mark((function t(a){var n,r,i,s,c,o,l,u,d,p;return be.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("mechanic"!==(n=e.fieldId)&&"situations"!==n){t.next=20;break}return r="".concat("https://satrelo-qa.ddns.net/api"),"mechanic"===n?r="".concat(r,"/dynamic/mechanics"):(i=e.required.mechanicId,r="".concat(r,"/dynamic/mechanics/").concat(i,"/situations")),t.prev=4,t.next=7,_e.a.get(r);case 7:return s=t.sent,c=s.data,o=c.data,l=c.message,u=c.status,d=200!==u,a({type:w,payload:{fieldId:n,options:200===u?o:null}}),t.abrupt("return",{error:d,message:l});case 15:return t.prev=15,t.t0=t.catch(4),t.abrupt("return",{error:!0,message:t.t0});case 18:t.next=22;break;case 20:"times"===n?p={1:{id:1,name:"Presente"}}:"reader"===n&&(p={1:{id:1,name:"Si"},2:{id:2,name:"No"}}),a({type:w,payload:{fieldId:n,options:p}});case 22:case"end":return t.stop()}}),t,null,[[4,15]])})));return function(e){return t.apply(this,arguments)}}()},resetDynamicOptions:function(e){return function(t){t({type:N,payload:e})}},setDynamicSelectedOptions:function(e){return function(t){t({type:I,payload:e})}},showCreateActivityButton:me},Fs=Object(h.b)((function(e){return{dynamic:e.dynamic}}),Rs)(Ls),Bs=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(Fs,this.props.dynamic.mechanic),r.a.createElement(Fs,this.props.dynamic.situations),r.a.createElement(Fs,this.props.dynamic.times),r.a.createElement(Fs,this.props.dynamic.reader))}}]),a}(n.Component),zs=Object(h.b)((function(e){return{dynamic:e.dynamic}}))(Bs),qs="https://satrelo-qa.ddns.net/api",Ws=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).onOptionSelected=n.onOptionSelected.bind(Object(o.a)(n)),n}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(Us,Object.assign({},this.props,{onOptionSelected:this.onOptionSelected}))}}]),Object(l.a)(a,[{key:"componentDidMount",value:function(){this.props.first&&this.getOptions({fieldId:this.props.id})}},{key:"componentWillUnmount",value:function(){var e=this;["category","subcategory","sintactic","vocabulary","mechanic"].forEach((function(t){e.props.resetStaticOptions({fieldId:t})})),this.props.showCreateActivityButton(!1)}},{key:"buildStatic",value:function(e){var t=this,a=this.props.reset;a&&a.forEach((function(e){t.props.resetStaticOptions({fieldId:e})})),this.props.showCreateActivityButton(!1);var n=!0;if(this.props.multichoice?(this.props.addStaticSelectedOption({fieldId:this.props.id,optionId:e.id}),n=this.checkMinimun()):this.props.setStaticSelectedOptions({fieldId:this.props.id,optionId:e.id}),n)if(this.props.next){var r={fieldId:this.props.next},i=this.props.static[this.props.next];if(i.required){var s=this.getRequiredIds(i.required);r.required=s}this.getOptions(r)}else this.props.showCreateActivityButton(!0)}},{key:"checkMinimun",value:function(){var e=this.props.options;e=Object.values(e);var t=0;return e.forEach((function(e){e.selected&&(t+=1)})),t>=this.props.minimum}},{key:"getOptions",value:function(){var e=Object(fe.a)(be.a.mark((function e(t){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.getStaticOptions(t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getRequiredIds",value:function(e){var t=this,a={};return e.forEach((function(e){var n=t.props.static[e];Object.values(n.options).forEach((function(e){e.selected&&(a["".concat(n.id,"Id")]=e.id)}))})),a}},{key:"onOptionSelected",value:function(e){this.buildStatic(e)}}]),a}(n.Component),Hs={addStaticSelectedOption:function(e){return function(t){t({type:T,payload:e})}},getStaticOptions:function(e){return function(){var t=Object(fe.a)(be.a.mark((function t(a){var n,r,i,s,c,o,l,u,d,p,m,h,v,b;return be.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.fieldId,r=null,"category"===n?r="".concat(qs,"/static/categories"):"subcategory"===n?(i=e.required.categoryId,r="".concat(qs,"/static/categories/").concat(i,"/subcategories")):"sintactic"===n?r="".concat(qs,"/static/structures"):"vocabulary"!==n&&"mechanic"!==n||(s=e.required,c=s.subcategoryId,o=s.sintacticId,l=c,u=o,r="".concat(qs,"/static/subcategories/").concat(l,"/structures/").concat(u),r="".concat(r,"vocabulary"===n?"/vocabularies":"/mechanics")),!r){t.next=18;break}return t.prev=4,t.next=7,_e.a.get(r);case 7:return d=t.sent,p=d.data,m=p.data,h=p.message,v=p.status,b=200!==v,a({type:P,payload:{fieldId:n,options:200===v?m:null}}),t.abrupt("return",{error:b,message:h});case 15:return t.prev=15,t.t0=t.catch(4),t.abrupt("return",{error:!0,message:t.t0});case 18:case"end":return t.stop()}}),t,null,[[4,15]])})));return function(e){return t.apply(this,arguments)}}()},resetStaticOptions:function(e){return function(t){t({type:A,payload:e})}},setStaticSelectedOptions:function(e){return function(t){t({type:D,payload:e})}},showCreateActivityButton:me},Vs=Object(h.b)((function(e){return{static:e.static}}),Hs)(Ws),Gs=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(Vs,this.props.static.category),r.a.createElement(Vs,this.props.static.subcategory),r.a.createElement(Vs,this.props.static.sintactic),r.a.createElement(Vs,this.props.static.vocabulary),r.a.createElement(Vs,this.props.static.mechanic))}}]),a}(n.Component),Ks=Object(h.b)((function(e){return{static:e.static}}))(Gs),Xs=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={loading:!1,option:"static",patient:null,redirect:!1},n.onCreateActivityClicked=n.onCreateActivityClicked.bind(Object(o.a)(n)),n.onOptionClicked=n.onOptionClicked.bind(Object(o.a)(n)),n}return Object(l.a)(a,[{key:"render",value:function(){if(this.state.redirect){var e=this.props.match.params,t=e.tid,a=e.pid,n="/terapeuta/".concat(t,"/pacientes/").concat(a,"/actividades");return r.a.createElement(p.a,{to:n,push:!0})}var i="primary-btn-outline left ".concat(Ns.a.btn," \n                                ").concat("static"===this.state.option?Ns.a.btnSelected:""),s="primary-btn-outline ".concat(Ns.a.btn," \n                                ").concat("dynamic"===this.state.option?Ns.a.btnSelected:"");return r.a.createElement(Yr,{pt:50},r.a.createElement("div",{className:Ns.a.title},"Configurar una nueva actividad"),r.a.createElement("div",{className:"flex ".concat(Ns.a.btnContainer)},r.a.createElement(Me.a,{className:i,color:"primary",name:"static",onClick:this.onOptionClicked,outline:!0},"Descripci\xf3n est\xe1tica"),r.a.createElement(Me.a,{className:s,color:"primary",name:"dynamic",onClick:this.onOptionClicked,outline:!0},"Descripci\xf3n din\xe1mica")),r.a.createElement("div",{className:Ns.a.container},"static"===this.state.option?r.a.createElement(Ks,null):r.a.createElement(zs,null)),this.props.ui.showCreateActivityButton?r.a.createElement("div",{className:Ns.a.createContainer},r.a.createElement(Me.a,{className:"secondary-btn ".concat(Ns.a.create),onClick:this.onCreateActivityClicked},this.state.loading?r.a.createElement(ma.a,{color:"dark",size:"sm"}):r.a.createElement("span",null,"Crear actividad"))):null)}}]),Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=Object(fe.a)(be.a.mark((function e(){var t;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this.props.patient){e.next=4;break}return t=this.props.match.params.pid,e.next=4,this.props.getPatient(t);case 4:this.setState({patient:this.props.patient});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.props.resetConfiguration()}},{key:"prepareAndCreateActivity",value:function(){var e=Object(fe.a)(be.a.mark((function e(){var t,a,n,r,i;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),t="static"===this.state.option?this.props.static:this.props.dynamic,this.props.resetConfiguration(),a=this.props.buildConfiguration({fields:t},this.state.patient),e.next=6,this.props.createActivity(a);case 6:n=e.sent,r=n.error,i=n.message,this.setState({loading:!1,redirect:!0}),this.props.setNotification({error:r,message:i,slide:!0});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onCreateActivityClicked",value:function(){this.state.loading||this.prepareAndCreateActivity()}},{key:"onOptionClicked",value:function(e){this.setState({option:e.target.name})}}]),a}(n.Component),Zs={buildConfiguration:function(e,t){return function(a){var n=e.fields,r=Object.keys(n),i={};return r.forEach((function(e){var t=n[e],a=t.options;(a=Object.values(a)).forEach((function(a){a.selected&&(t.multichoice?i[e]?i[e].push(a):i[e]=[a]:i[e]=a)}))})),i.patient=t,a({type:x,payload:{configuration:i}}),i}},createActivity:function(e){return Object(fe.a)(be.a.mark((function t(){var a,n,r,i,s,c;return be.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="".concat(Ca,"/assembler/"),t.prev=1,t.next=4,_e.a.post(a,{configuration:e});case 4:return n=t.sent,r=n.data,i=r.message,s=r.status,c=200!==s,t.abrupt("return",{error:c,message:i});case 10:return t.prev=10,t.t0=t.catch(1),t.abrupt("return",{error:!0,message:t.t0});case 13:case"end":return t.stop()}}),t,null,[[1,10]])})))},getPatient:ps,resetConfiguration:function(){return function(e){e({type:j})}},setNotification:ue},Ys=Object(h.b)((function(e){return{dynamic:e.dynamic,patient:e.patient.patient,static:e.static,ui:e.ui}}),Zs)(Xs),Js=a(181),Qs=a.n(Js),$s="https://satrelo-qa.ddns.net/api",ec=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(){var a=Object(fe.a)(be.a.mark((function a(n){var r,i,s,c,o,l,u,d,p,m,h,v;return be.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=$s,t?(i=e.pid,s=e.startDate,c=e.endDate,o=e.mid,r="".concat(r,"/feedback/historical/").concat(i,"/").concat(o,"/levels")+"?start=".concat(s,"&end=").concat(c)):(l=e.id,r="".concat(r,"/feedback/").concat(l,"/levels")),a.prev=2,a.next=5,_e.a.get(r);case 5:return u=a.sent,d=u.data,p=d.data,m=d.message,h=d.status,v=200!==h,n({type:q,payload:{feedData:200===h?p:null}}),a.abrupt("return",{error:v,message:m});case 13:return a.prev=13,a.t0=a.catch(2),a.abrupt("return",{error:!0,message:a.t0});case 16:case"end":return a.stop()}}),a,null,[[2,13]])})));return function(e){return a.apply(this,arguments)}}()},tc=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(){var a=Object(fe.a)(be.a.mark((function a(n){var r,i,s,c,o,l,u,d,p,m,h,v;return be.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=$s,t?(i=e.pid,s=e.startDate,c=e.endDate,o=e.mid,r="".concat(r,"/feedback/historical/").concat(i,"/").concat(o,"/matches")+"?start=".concat(s,"&end=").concat(c)):(l=e.id,r="".concat(r,"/feedback/").concat(l,"/matches")),a.prev=2,a.next=5,_e.a.get(r);case 5:return u=a.sent,d=u.data,p=d.data,m=d.message,h=d.status,v=200!==h,n({type:q,payload:{feedData:200===h?p:null}}),a.abrupt("return",{error:v,message:m});case 13:return a.prev=13,a.t0=a.catch(2),a.abrupt("return",{error:!0,message:a.t0});case 16:case"end":return a.stop()}}),a,null,[[2,13]])})));return function(e){return a.apply(this,arguments)}}()},ac=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(){var a=Object(fe.a)(be.a.mark((function a(n){var r,i,s,c,o,l,u,d,p,m,h,v;return be.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=$s,t?(i=e.pid,s=e.startDate,c=e.endDate,o=e.mid,r="".concat(r,"/feedback/historical/").concat(i,"/").concat(o,"/phrases")+"?start=".concat(s,"&end=").concat(c)):(l=e.id,r="".concat(r,"/feedback/").concat(l,"/phrases")),a.prev=2,a.next=5,_e.a.get(r);case 5:return u=a.sent,d=u.data,p=d.data,m=d.message,h=d.status,v=200!==h,n({type:q,payload:{feedData:200===h?p:null}}),a.abrupt("return",{error:v,message:m});case 13:return a.prev=13,a.t0=a.catch(2),a.abrupt("return",{error:!0,message:a.t0});case 16:case"end":return a.stop()}}),a,null,[[2,13]])})));return function(e){return a.apply(this,arguments)}}()},nc=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(){var a=Object(fe.a)(be.a.mark((function a(n){var r,i,s,c,o,l,u,d,p,m,h,v;return be.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=$s,t?(i=e.pid,s=e.startDate,c=e.endDate,o=e.mid,r="".concat(r,"/feedback/historical/").concat(i,"/").concat(o,"/secuences")+"?start=".concat(s,"&end=").concat(c)):(l=e.id,r="".concat(r,"/feedback/").concat(l,"/secuences")),a.prev=2,a.next=5,_e.a.get(r);case 5:return u=a.sent,d=u.data,p=d.data,m=d.message,h=d.status,v=200!==h,n({type:q,payload:{feedData:200===h?p:null}}),a.abrupt("return",{error:v,message:m});case 13:return a.prev=13,a.t0=a.catch(2),a.abrupt("return",{error:!0,message:a.t0});case 16:case"end":return a.stop()}}),a,null,[[2,13]])})));return function(e){return a.apply(this,arguments)}}()},rc=a(182),ic=a.n(rc),sc=a(183),cc=a.n(sc),oc=a(243);Object(sc.registerLocale)("es",oc.a);var lc,uc=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={date:null},n.pickerRef=r.a.createRef(),n.onDateChanged=n.onDateChanged.bind(Object(o.a)(n)),n}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.form,t=!0,a=!1,n=ic.a.input,i="MMMM 'de' yyyy";return e&&(t=!1,a=!0,n=ic.a.completeInput,i="dd/MM/yyyy"),r.a.createElement("div",null,r.a.createElement(cc.a,{className:n,dateFormat:i,locale:"es",onChange:this.onDateChanged,popperPlacement:"top-end",ref:this.pickerRef,selected:this.state.date,showMonthYearPicker:t,showFullMonthYearPicker:!0,showYearDropdown:a,scrollableYearDropdown:!0,withPortal:!0}))}}]),Object(l.a)(a,[{key:"componentDidMount",value:function(){this.pickerRef&&this.pickerRef.current.input&&(this.pickerRef.current.input.readOnly=!0);var e=this.props,t=e.date,a=e.feedDate,n=e.form;this.setState({date:n?t:a})}},{key:"componentDidUpdate",value:function(e){this.props.date!==e.date&&this.setState({date:this.props.date})}},{key:"onDateChanged",value:function(e){this.setState({date:e});var t=this.props,a=t.form,n=t.name;a?this.props.onChange({target:{value:e,name:n}}):this.props.setFeedDate(e)}}]),a}(n.Component),dc={setFeedDate:function(e){return function(t){t({type:W,payload:{feedDate:e}})}}},pc=Object(h.b)((function(e){return{feedDate:e.feedback.feedDate}}),dc)(uc),mc=pc,hc=a(238),vc=a.n(hc),bc=a(59),fc=a.n(bc),gc={Pronombre:{color:"rgba(248, 196, 113, 0.8)",title:"Pronombre"},Sustantivo:{color:"rgba(240, 178, 122, 0.8)",title:"Sustantivo"},Adjetivo:{color:"rgba(127, 179, 213, 0.8)",title:"Adjetivo"},Verbo:{color:"rgba(115, 198, 182, 0.8)",title:"Verbo"},"Art\xedculo":{color:"rgba(241, 148, 138, 0.8)",title:"Art\xedculo"},"Conjunci\xf3n":{color:"rgba(247, 220, 111, 0.8)",title:"Conjunci\xf3n"},"Preposici\xf3n":{color:"rgba(39, 174, 96, 0.8)",title:"Preposici\xf3n"}},_c=function(e,t){var a=e.length,n=Math.floor(100*t/a);return e.sort((function(e,t){return e.order_phrase>t.order_phrase?1:-1})),{percentage:n,words:e}},kc=a(24),yc=a.n(kc),Oc=a(94),Ec={doughnut:function(){return{legend:{labels:{boxWidth:10,usePointStyle:!0}},tooltips:{enabled:!0,mode:"single",callbacks:{label:function(e,t){var a=t.labels[e.index],n=t.datasets[0].data[e.index];return"".concat(n,"% de ").concat(a.toLowerCase())}}}}},line:function(e){return{legend:{align:"end",labels:{boxWidth:10,usePointStyle:!0}},scales:{xAxes:[{scaleLabel:{display:!0,labelString:"match"===e?"Apariciones del vocabulario":"Sesiones"}}],yAxes:[{scaleLabel:{display:!0,labelString:"match"===e?"N\xfamero de errores":"Minutos"},ticks:{beginAtZero:!0,steps:10,stepSize:"match"===e?1:10,max:"match"===e?10:60}}]},tooltips:{enabled:!0,mode:"single",callbacks:{label:function(t,a){var n=t.yLabel;return n+="".concat("match"===e?" error(es)":" minuto(s)"),n},title:function(t,a){if("match"===e){var n=t[0].yLabel;return"".concat(n," error(es) de ").concat(n+1," intento(s)")}var r=t[0].xLabel;return"Sesi\xf3n ".concat(r)}}}}},stackBar:function(){return{legend:{align:"end",labels:{boxWidth:10,usePointStyle:!0}},scales:{xAxes:[{scaleLabel:{display:!0,labelString:"Palabras asociadas"},stacked:!0}],yAxes:[{scaleLabel:{display:!0,labelString:"% de aciertos/desaciertos"},ticks:{beginAtZero:!0,steps:10,stepSize:10,max:100},stacked:!0}]},tooltips:{enabled:!0,mode:"single",callbacks:{label:function(e,t){var a=t.datasets[e.datasetIndex].label;return e.yLabel+"% de "+a.toLowerCase()},title:function(e,t){var a=e[0].xLabel.split("("),n=a[0],r=a[1],i=parseInt(r.split(")")[0],10),s=Math.round(e[0].yLabel*i/100);return"".concat(n,"(").concat(s," de ").concat(i,")")}}}}}},Sc=Ec.doughnut,Cc=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={chartData:{},description:"",options:Sc(),percentage:0},n}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(yn.a,{sm:this.props.sm,md:this.props.md,className:yc.a.container},r.a.createElement(Lr,null,r.a.createElement("p",{className:yc.a.title},this.props.title),r.a.createElement(Oc.Doughnut,{data:this.state.chartData,options:this.state.options,height:this.props.height}),r.a.createElement("div",{className:yc.a.percentage},this.state.percentage,"%"),r.a.createElement("p",{className:yc.a.description},this.state.description)))}}]),Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=function(e){var t=0;e.forEach((function(e){100===e.percentage&&(t+=1)}));var a=e.length,n=Math.floor(100*t/a);return{chartData:{labels:["Correctas","Incorrectas"],datasets:[{label:"",data:[n,100-n],backgroundColor:["#73C6B6","#E5E7E9"]}]},hits:t,total:a}}(this.props.data),t=e.chartData,a=e.hits,n=e.total,r=t.datasets[0].data[0],i="El paciente pronunci\xf3 correctamente ".concat(a," ")+"de un total de ".concat(n," frases");this.setState({chartData:t,description:i,percentage:r})}}]),a}(n.Component),jc=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.data;return r.a.createElement(yn.a,{sm:this.props.sm,md:this.props.md,lg:this.props.lg,className:yc.a.container},r.a.createElement(Lr,null,r.a.createElement("div",{className:"flex"},r.a.createElement("div",{style:{width:"100%"}},r.a.createElement("div",{className:"flex"},r.a.createElement("div",{className:yc.a.title},"Nivel ",e.level),r.a.createElement("div",{className:yc.a.title},"Sesi\xf3n ",e.id_session)),r.a.createElement("div",{className:yc.a.score},e.score),r.a.createElement("div",{className:yc.a.subtitle},"Puntos ganados"),r.a.createElement("div",{className:"".concat(yc.a.score," ").concat(yc.a.mt20)},this.setLevelTime()),r.a.createElement("div",{className:yc.a.subtitle},"Minutos para terminar nivel")))))}},{key:"setLevelTime",value:function(){var e=this.props.data,t=e.date_start,a=e.date_end,n=sa(t,a).minutes;return n?Math.round(n):0}}]),a}(n.Component),xc=Ec.line,Nc=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={chartData:{},options:xc(n.props.metric)},n}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(yn.a,{sm:this.props.sm,md:this.props.md,className:yc.a.container},r.a.createElement(Lr,null,r.a.createElement("p",{className:yc.a.title},"match"===this.props.metric?r.a.createElement("span",null,this.props.title):r.a.createElement("span",null,"Tiempos en minutos")),r.a.createElement(Oc.Line,{data:this.state.chartData,options:this.state.options,height:this.props.height})))}}]),Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.data,a=e.metric,n=e.title;if(t){var r="match"===a?function(e,t){var a=Object.values(e),n=[];a.forEach((function(e){e.variable===t&&n.push(e)}));var r=[],i=1,s=[],c=0;return n.forEach((function(e){e.is_good?(r.push(i),s.push(c),i+=1,c>0&&(c=0)):c+=1})),{labels:r,datasets:[{label:"Curva de errores",data:s,backgroundColor:"rgba(241, 148, 138, 0.5)",borderColor:"rgba(241, 148, 138, 1.0)"}]}}(t,n):function(e){var t=Object.values(e),a=[],n=[];return t.forEach((function(e){var t=sa(e.date_start,e.date_end);n.push(Math.round(t.minutes)),a.push("ID ".concat(e.id))})),{labels:a,datasets:[{label:"Curva de tiempo",data:n,backgroundColor:"rgba(241, 148, 138, 0.5)",borderColor:"rgba(241, 148, 138, 1.0)"}]}}(t);this.setState({chartData:r})}}}]),a}(n.Component),wc=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={phrases:[]},n}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(yn.a,{sm:"12",md:"7",className:yc.a.container},r.a.createElement(Lr,null,r.a.createElement("p",{className:yc.a.title},"Palabras correctas por frases"),this.state.phrases.map((function(e,t){return r.a.createElement("div",{className:"flex",key:t},r.a.createElement("div",{className:"flex ".concat(yc.a.wordsContainer)},e.words.map((function(e,t){return r.a.createElement("div",{className:yc.a.word,key:t,style:{color:e.checked?"black":"#F1948A"}},e.word)}))),r.a.createElement("div",{className:yc.a.phrasePercentage},e.percentage,"%"))}))))}}]),Object(l.a)(a,[{key:"componentDidMount",value:function(){this.setState({phrases:this.props.data})}}]),a}(n.Component),Ic=Ec.stackBar,Tc=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={chartData:{},options:Ic()},n}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(yn.a,{sm:this.props.sm,md:this.props.md,lg:this.props.lg,className:yc.a.container},r.a.createElement(Lr,null,r.a.createElement("p",{className:yc.a.title},this.props.title),r.a.createElement(Oc.Bar,{data:this.state.chartData,options:this.state.options,height:this.props.height})))}}]),Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.color,a=e.data,n=e.title;if(a){var r=function(e,t,a){var n=Object.values(e),r=[];n.forEach((function(e){e.kind===t&&r.push(e)}));var i=[];r.forEach((function(e){i.includes(e.word)||i.push(e.word)}));var s=[],c=[];return i.forEach((function(e,t){var a=0,n=0;r.forEach((function(t){t.word===e&&(t.checked&&(n+=1),a+=1)}));var o=Math.floor(100*n/a),l=100-o;s.push(o),c.push(l),i[t]="".concat(e,"(").concat(a,")")})),{labels:i,datasets:[{label:"Aciertos",data:s,backgroundColor:a},{label:"Desaciertos",data:c,backgroundColor:"rgba(229, 231, 233, 0.7)"}]}}(a,n,t);this.setState({chartData:r})}}}]),a}(n.Component),Ac=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={matchesData:null,words:[]},n}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,this.state.words&&this.state.words.length>0?r.a.createElement(kn.a,{noGutters:!0},r.a.createElement(yn.a,{sm:"12"},r.a.createElement("div",{className:fc.a.subtitle},"Emparejamiento de vocabulario")),this.state.words.map((function(t,a){return r.a.createElement(Nc,{sm:"12",md:"4",data:e.state.matchesData,height:230,key:a,metric:"match",title:t})}))):r.a.createElement(pa,null,"No existe informaci\xf3n suficiente que permita construir la informaci\xf3n solicitada."))}}]),Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.feedData.Matches_Feeds;if(e){var t=function(e){var t=Object.values(e),a=[];return t.forEach((function(e){a.includes(e.variable)||a.push(e.variable)})),a}(e);this.setState({matchesData:e,words:t})}}}]),a}(n.Component),Pc=Object(h.b)((function(e){return{feedData:e.feedback.feedData,session:e.activity.session}}))(Ac),Dc=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={levels:[]},n}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(kn.a,{noGutters:!0},r.a.createElement(yn.a,{xs:"12"},r.a.createElement("div",{className:fc.a.subtitle},"Niveles en la sesi\xf3n")),this.state.levels.map((function(e){return r.a.createElement(jc,{sm:"12",md:"6",lg:"4",data:e,key:e.id})})))}}]),Object(l.a)(a,[{key:"componentDidMount",value:function(){this.setLevels()}},{key:"componentDidUpdate",value:function(){this.setLevels()}},{key:"setLevels",value:function(){var e=this.props.feedData.Levels_Feeds,t=this.state.levels;if(e&&0===t.length){var a=Object.values(e);this.setState({levels:a})}}}]),a}(n.Component),Mc=Object(h.b)((function(e){return{feedData:e.feedback.feedData}}))(Dc),Uc=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={sessionsData:null},n}return Object(l.a)(a,[{key:"render",value:function(){var e=this.state.sessionsData;return r.a.createElement(kn.a,{noGutters:!0},r.a.createElement(yn.a,{sm:"12"},r.a.createElement("div",{className:fc.a.subtitle},"Tiempos por sesiones de la actividad")),e&&r.a.createElement(Nc,{sm:"12",md:"6",data:e,height:200,metric:"time"}))}}]),Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.feedData.Sessions_Feeds;e&&this.setState({sessionsData:e})}}]),a}(n.Component),Lc=Object(h.b)((function(e){return{feedData:e.feedback.feedData}}))(Uc),Rc=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={groupedPhrases:null,phrasesData:null,structures:[]},n}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.state.groupedPhrases;return r.a.createElement("div",null,t&&t.length>0?r.a.createElement(kn.a,{noGutters:!0},r.a.createElement(yn.a,{sm:"12"},r.a.createElement("div",{className:fc.a.subtitle},"Frases trabajadas en la actividad")),t&&r.a.createElement(Cc,{sm:"12",md:"5",data:t,height:160,title:"Resumen de las frases"}),"evolution"===this.props.feedback&&t&&r.a.createElement(wc,{data:t}),r.a.createElement(yn.a,{sm:"12"},r.a.createElement("div",{className:fc.a.subtitle},"Discriminaci\xf3n por estructura sint\xe1ctica")),this.state.structures.map((function(t,a){return r.a.createElement(Tc,{sm:"12",md:"6",lg:"4",color:t.color,data:e.state.phrasesData,height:230,key:a,title:t.title})}))):r.a.createElement(pa,null,"No existe informaci\xf3n suficiente que permita construir la informaci\xf3n solicitada."))}}]),Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.feedData.Phrases_Feeds;if(e){var t=function(e){var t=Object.values(e),a=[];if(t.length>0){var n=t.shift(),r=[n],i=n.checked?1:0;t.forEach((function(e,s){if(e.id_phrase===n.id_phrase){if(r.push(e),e.checked&&(i+=1),s===t.length-1){var c=_c(r,i);a.push(c)}}else if(e.id_phrase!==n.id_phrase){var o=_c(r,i);a.push(o),r=[n=e],i=n.checked?1:0}}))}return a}(e),a=function(e){var t=Object.values(e),a={};return t.forEach((function(e){var t=Object.keys(a),n=e.kind;t.includes(n)||(a[n]=gc[n])})),Object.values(a)}(e);this.setState({groupedPhrases:t,phrasesData:e,structures:a})}}}]),a}(n.Component),Fc=Object(h.b)((function(e){return{feedData:e.feedback.feedData}}))(Rc),Bc=a(46),zc=a.n(Bc),qc={1:{id:1,name:"Domin\xf3",alias:"Do",semantic_description:1},2:{id:2,name:"Ordenando",alias:"Or",semantic_description:1},3:{id:3,name:"Secuencia",alias:"Se",semantic_description:2}},Wc=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={description:1,option:"vocalization"},n.onOptionClicked=n.onOptionClicked.bind(Object(o.a)(n)),n}return Object(l.a)(a,[{key:"render",value:function(){var e=this.state.option,t="secondary-btn-outline ".concat(zc.a.btn),a="vocalization"===e?"".concat(t," ").concat(zc.a.selected):t,n="inGame"===e?"".concat(t," ").concat(zc.a.selected):t,i="levels"===e?"".concat(t," ").concat(zc.a.selected):t,s="times"===e?"".concat(t," ").concat(zc.a.selected):t;2===this.state.description&&(a="".concat(a," ").concat(zc.a.disabled),n="".concat(n," ").concat(zc.a.disabled));var c=this.props.feedback,o=400,l=32.5;return"historical"===c&&(o=500,l=24.5),r.a.createElement("div",{className:"flex ".concat(zc.a.btnContainer),style:{"--contWidth":"".concat(o,"px")}},r.a.createElement(Me.a,{className:a,name:"vocalization",onClick:this.onOptionClicked,style:{"--btnWidth":"".concat(l,"%")}},this.props.windowWidth<767&&"historical"===c?r.a.createElement("span",{className:zc.a.span},"Vocaliza..."):r.a.createElement("span",{className:zc.a.span},"Vocalizaci\xf3n")),r.a.createElement(Me.a,{className:n,name:"inGame",onClick:this.onOptionClicked,style:{"--btnWidth":"".concat(l,"%")}},"Juego"),r.a.createElement(Me.a,{className:i,name:"levels",onClick:this.onOptionClicked,style:{"--btnWidth":"".concat(l,"%")}},"Niveles"),"historical"===c&&r.a.createElement(Me.a,{className:s,name:"times",onClick:this.onOptionClicked,style:{"--btnWidth":"".concat(l,"%")}},"Tiempos"))}}]),Object(l.a)(a,[{key:"componentDidMount",value:function(){this.setStateValues()}},{key:"componentDidUpdate",value:function(e){e.mechanic!==this.props.mechanic&&this.setStateValues()}},{key:"onOptionClicked",value:function(e){var t=e.target.name,a=this.state.description;this.setState({option:t}),this.props.onOptionClicked({description:a,option:t})}},{key:"setStateValues",value:function(){var e=1,t=1===(e="historical"===this.props.feedback?qc[this.props.mechanic].semantic_description:this.props.activity.Mechanic.semantic_description)?"vocalization":"levels";this.setState({description:e,option:t}),this.props.onOptionClicked({description:e,option:t})}}]),a}(n.Component),Hc=Object(h.b)((function(e){return{activity:e.activity.activity,windowWidth:e.ui.windowWidth}}))(Wc),Vc=a(239),Gc=a.n(Vc),Kc=a(56),Xc=a.n(Kc),Zc=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).onClicked=n.onClicked.bind(Object(o.a)(n)),n}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.index,a=e.session,n=e.sessionSelected,i=Xc.a.container,s=Xc.a.innerContainer;return 0===t?i="".concat(i," ").concat(Xc.a.first):2===t&&(i="".concat(i," ").concat(Xc.a.last)),n&&a.id===n.id&&(s="".concat(s," ").concat(Xc.a.selected)),r.a.createElement(yn.a,{xs:"12",sm:"6",md:"4",className:i},r.a.createElement(Me.a,{className:"ghost-btn ".concat(Xc.a.btn),onClick:this.onClicked},r.a.createElement("div",{className:s},r.a.createElement("div",{className:"flex ".concat(Xc.a.title)},r.a.createElement("span",null,"Sesi\xf3n"),r.a.createElement("span",null,"ID: ",a.id)),r.a.createElement("div",{className:Xc.a.date},"Registro del ",this.getFormattedDate(a.date_start)),r.a.createElement("div",{className:Xc.a.time},this.getDifference(a.date_start,a.date_end)," minutos"))))}}]),Object(l.a)(a,[{key:"getDifference",value:function(e,t){var a=sa(e,t);return Math.round(a.minutes)}},{key:"getFormattedDate",value:function(e){return ca(e)}},{key:"onClicked",value:function(){this.props.onClicked(this.props.session)}}]),a}(n.Component),Yc=Object(h.b)((function(e){return{sessionSelected:e.activity.session}}))(Zc),Jc=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).onSessionClicked=n.onSessionClicked.bind(Object(o.a)(n)),n}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(kn.a,{className:Gc.a.container,noGutters:!0},this.props.sessions.map((function(t,a){return r.a.createElement(Yc,{index:a,key:t.id,onClicked:e.onSessionClicked,session:t})})))}}]),Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.sessions[0];this.setSession(e)}},{key:"onSessionClicked",value:function(e){this.setSession(e)}},{key:"setSession",value:function(e){this.props.setSession(e)}}]),a}(n.Component),Qc={setSession:Ia},$c=Object(h.b)(null,Qc)(Jc),eo=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={loading:!1,option:"vocalization"},n.onOptionClicked=n.onOptionClicked.bind(Object(o.a)(n)),n}return Object(l.a)(a,[{key:"render",value:function(){var e=Object.values(this.props.sessions);return e.sort((function(e,t){return e.id<t.id?1:-1})),r.a.createElement("div",{className:vc.a.container},r.a.createElement($c,{sessions:e}),r.a.createElement(Hc,{feedback:"evolution",onOptionClicked:this.onOptionClicked}),null===this.props.feedData?r.a.createElement(pa,null,"No existen registros que permitan construir las estad\xedsticas solicitadas."):this.state.loading?r.a.createElement(va,{color:"primary"}):"vocalization"===this.state.option?r.a.createElement(Fc,{feedback:"evolution"}):"inGame"===this.state.option?r.a.createElement(Pc,null):r.a.createElement(Mc,null))}}]),Object(l.a)(a,[{key:"componentDidUpdate",value:function(e){e.session!==this.props.session&&this.getFeedback()}},{key:"getFeedback",value:function(){var e=Object(fe.a)(be.a.mark((function e(){var t,a,n;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.props.session)){e.next=25;break}if(a=t.id,n=this.state.option,this.setState({loading:!0}),"vocalization"!==n){e.next=10;break}return e.next=8,this.props.getPhrases({id:a});case 8:e.next=24;break;case 10:if("inGame"!==n){e.next=15;break}return e.next=13,this.props.getMatches({id:a});case 13:e.next=24;break;case 15:if("levels"!==n){e.next=24;break}if(1!==this.props.activity.Mechanic.semantic_description){e.next=22;break}return e.next=20,this.props.getLevels({id:a});case 20:e.next=24;break;case 22:return e.next=24,this.props.getSecuences({id:a});case 24:this.setState({loading:!1});case 25:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onOptionClicked",value:function(e){var t=this;this.setState({option:e.option},(function(){return t.getFeedback()}))}}]),a}(n.Component),to={getLevels:ec,getMatches:tc,getPhrases:ac,getSecuences:nc},ao=Object(h.b)((function(e){return{activity:e.activity.activity,feedData:e.feedback.feedData,sessions:e.activity.sessions,session:e.activity.session}}),to)(eo),no=a(240),ro=a.n(no),io=a(144),so=a.n(io),co=a(494),oo=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={mechanics:Object.values(qc),selected:1},n.onMechanicClicked=n.onMechanicClicked.bind(Object(o.a)(n)),n}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"flex ".concat(so.a.container)},this.state.mechanics.map((function(t){var a=so.a.btn;return t.id===e.state.selected&&(a="".concat(a," ").concat(so.a.selected)),r.a.createElement("div",{key:t.id},r.a.createElement(Me.a,{className:"ghost-btn ".concat(a),id:"utooltip".concat(t.name),name:t.id,onClick:e.onMechanicClicked},t.alias),r.a.createElement(co.a,{placement:"right",target:"utooltip".concat(t.name)},t.name))})))}}]),Object(l.a)(a,[{key:"onMechanicClicked",value:function(e){var t=e.target.name;t=parseInt(t,10),this.setState({selected:t}),this.props.onMechanicClicked(t)}}]),a}(n.Component),lo=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={description:1,loading:!1,mid:1,option:"vocalization"},n.onOptionClicked=n.onOptionClicked.bind(Object(o.a)(n)),n.onMechanicClicked=n.onMechanicClicked.bind(Object(o.a)(n)),n}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:ro.a.container},r.a.createElement(oo,{onMechanicClicked:this.onMechanicClicked}),r.a.createElement(Hc,{feedback:"historical",mechanic:this.state.mid,onOptionClicked:this.onOptionClicked}),this.state.loading?r.a.createElement(va,{color:"primary"}):null===this.props.feedData?r.a.createElement(pa,null,"No existen registros que permitan construir las estad\xedsticas solicitadas."):"vocalization"===this.state.option?r.a.createElement(Fc,{feedback:"historical"}):"inGame"===this.state.option?r.a.createElement(Pc,null):"levels"===this.state.option?r.a.createElement(Mc,null):r.a.createElement(Lc,null))}}]),Object(l.a)(a,[{key:"componentDidUpdate",value:function(e,t){var a=this.props.date,n=this.state.mid;a===e.date&&n===t.mid||this.getFeedback()}},{key:"getFeedback",value:function(){var e=Object(fe.a)(be.a.mark((function e(){var t,a,n,r,i,s,c,o,l,u,d;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,a=t.date,n=t.pid,r=this.state,i=r.description,s=r.mid,c=r.option,o=oa(a.toISOString()),l=o.startDate,u=o.endDate,d={pid:n,startDate:l,endDate:u,mid:s},this.setState({loading:!0}),"vocalization"!==c){e.next=10;break}return e.next=8,this.props.getPhrases(d,!0);case 8:e.next=28;break;case 10:if("inGame"!==c){e.next=15;break}return e.next=13,this.props.getMatches(d,!0);case 13:e.next=28;break;case 15:if("levels"!==c){e.next=25;break}if(1!==i){e.next=21;break}return e.next=19,this.props.getLevels(d,!0);case 19:e.next=23;break;case 21:return e.next=23,this.props.getSecuences(d,!0);case 23:e.next=28;break;case 25:if("times"!==c){e.next=28;break}return e.next=28,this.props.getSessions(d,!0);case 28:this.setState({loading:!1});case 29:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onOptionClicked",value:function(e){var t=this;this.setState({description:e.description,option:e.option},(function(){return t.getFeedback()}))}},{key:"onMechanicClicked",value:function(e){this.setState({mid:e})}}]),a}(n.Component),uo={getLevels:ec,getMatches:tc,getPhrases:ac,getSecuences:nc,getSessions:function(e){return function(){var t=Object(fe.a)(be.a.mark((function t(a){var n,r,i,s,c,o,l,u,d,p,m;return be.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.pid,r=e.startDate,i=e.endDate,s=e.mid,c="".concat($s,"/feedback/historical/").concat(n,"/").concat(s,"/sessions")+"?start=".concat(r,"&end=").concat(i),t.prev=2,t.next=5,_e.a.get(c);case 5:return o=t.sent,l=o.data,u=l.data,d=l.message,p=l.status,m=200!==p,a({type:q,payload:{feedData:200===p?u:null}}),t.abrupt("return",{error:m,message:d});case 13:return t.prev=13,t.t0=t.catch(2),t.abrupt("return",{error:!0,message:t.t0});case 16:case 17:case"end":return t.stop()}}),t,null,[[2,13]])})));return function(e){return t.apply(this,arguments)}}()}},po=Object(h.b)((function(e){return{feedData:e.feedback.feedData,date:e.feedback.feedDate}}),uo)(lo),mo=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={kind:"evoluci\xf3n",loading:!1},n}return Object(l.a)(a,[{key:"render",value:function(){var e=this.state,t=e.kind,a=e.loading,n="evoluci\xf3n"===t?"Evoluci\xf3n por sesiones":"Hist\xf3rico por mes",i=this.props.match.params.pid;return r.a.createElement(Yr,{page:"feedback",pt:50},r.a.createElement("div",{className:"flex ".concat(Qs.a.container)},r.a.createElement("div",{className:Qs.a.title},n),"hist\xf3rico"===t&&r.a.createElement(mc,null)),a?r.a.createElement(va,{color:"primary"}):this.props.sessions&&"evoluci\xf3n"===t?r.a.createElement(ao,null):"hist\xf3rico"===t?r.a.createElement(po,{pid:i}):null)}}]),Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.match.params,t=e.aid,a=e.kind;"evoluci\xf3n"===a&&this.getActivity(t),this.setState({kind:a})}},{key:"componentWillUnmount",value:function(){this.props.setActivity(null),this.props.setFeedData(null),this.props.setSessions(null),this.props.setSession(null)}},{key:"getActivity",value:function(){var e=Object(fe.a)(be.a.mark((function e(t){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.next=3,this.props.getActivity(t);case 3:this.setFirstSessions(),this.setState({loading:!1});case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setFirstSessions",value:function(){var e=this.props.activity,t=[];e&&((t=Object.values(e.Activities_Sessions)).sort((function(e,t){return e.id<t.id?1:-1})),t=Object.assign.apply(Object,[{}].concat(Object(rr.a)(t.slice(0,3).map((function(e){return Object(nr.a)({},e.id,e)})))))),this.props.setSessions(t)}}]),a}(n.Component),ho={getActivity:ja,setActivity:Na,setFeedData:function(e){return function(t){t({type:q,payload:{feedData:e}})}},setSessions:function(e){return function(t){t({type:_,payload:{sessions:e}})}},setSession:Ia},vo=Object(h.b)((function(e){return{activity:e.activity.activity,sessions:e.activity.sessions}}),ho)(mo),bo=a(77),fo=a.n(bo),go=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={error:null,loading:!1,password:"",userId:null,username:""},n.onInputChanged=n.onInputChanged.bind(Object(o.a)(n)),n.onForgotClicked=n.onForgotClicked.bind(Object(o.a)(n)),n.onLogin=n.onLogin.bind(Object(o.a)(n)),n.onLoginClicked=n.onLoginClicked.bind(Object(o.a)(n)),n}return Object(l.a)(a,[{key:"render",value:function(){var e=this.state.userId;return e?r.a.createElement(p.a,{to:"/terapeuta/".concat(e,"/pacientes"),push:!0}):r.a.createElement("div",{className:fo.a.container},r.a.createElement("div",{className:fo.a.title},"Ingreso"),this.state.error&&r.a.createElement("div",{className:fo.a.error},this.state.error),r.a.createElement(ya.a,null,r.a.createElement(Oa.a,null,r.a.createElement(Ya.a,{className:fo.a.label},"Nombre de usuario"),r.a.createElement(Ea.a,{name:"username",onChange:this.onInputChanged,type:"text"})),r.a.createElement(Oa.a,null,r.a.createElement(Ya.a,{className:fo.a.label},"Contrase\xf1a"),r.a.createElement(Ea.a,{name:"password",onChange:this.onInputChanged,type:"password"}),r.a.createElement(Me.a,{className:"ghost-btn ".concat(fo.a.btnForgot),onClick:this.onForgotClicked},"\xbfOlvidaste tu contrase\xf1a?")),r.a.createElement(Me.a,{className:"secondary-btn ".concat(fo.a.btn),onClick:this.onLoginClicked},this.state.loading?r.a.createElement(ma.a,{color:"dark",size:"sm"}):r.a.createElement("span",null,"Entrar"))))}}]),Object(l.a)(a,[{key:"onInputChanged",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(nr.a)({},a,n))}},{key:"onForgotClicked",value:function(e){e.preventDefault();this.props.setModal({title:"Recuperaci\xf3n de la contrase\xf1a",type:"forgot_password",role:2})}},{key:"onLogin",value:function(){var e=Object(fe.a)(be.a.mark((function e(t,a){var n,r,i,s,c;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),n={username:t,password:a},e.next=4,this.props.login(n,dt);case 4:r=e.sent,i=r.error,s=r.message,c=r.userId,i&&(i=s),this.setState({error:i,loading:!1,userId:c});case 8:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"onLoginClicked",value:function(e){if(e.preventDefault(),!this.state.loading){var t=this.state,a=t.username,n=t.password;""!==a.trim()&&""!==n.trim()?this.onLogin(a,n):this.setState({error:"El usuario y la contrase\xf1a son obligatorios"})}}}]),a}(n.Component),_o={login:jt,setModal:le},ko=Object(h.b)(null,_o)(go),yo=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.ui.vOffset;return r.a.createElement(kn.a,{noGutters:!0},r.a.createElement(yn.a,{sm:"12",md:"6"}),r.a.createElement(yn.a,{sm:"12",md:"6"},r.a.createElement("div",{className:"flex",style:{alignItems:"flex-start",justifyContent:"center",height:"calc(100vh - ".concat(e,"px)")}},r.a.createElement(ko,null))))}},{key:"componentDidMount",value:function(){this.props.setBar("standard"),this.props.setParallax(!1),this.props.showMobileMenu(!1),this.props.setUser(null),this.props.showAvatar(!1)}}]),a}(n.Component),Oo={setBar:ce,setParallax:de,setUser:Va,showAvatar:pe,showMobileMenu:he},Eo=Object(h.b)((function(e){return{ui:e.ui}}),Oo)(yo),So=a(66),Co=a.n(So),jo=a(116),xo=a.n(jo),No=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).onChange=n.onChange.bind(Object(o.a)(n)),n}return Object(l.a)(a,[{key:"render",value:function(){var e=xo.a.searchContainer;return this.props.patients&&(e="".concat(e," ").concat(xo.a.marginTop)),r.a.createElement("div",{className:"flex ".concat(e)},r.a.createElement(qe.a,{className:xo.a.searchIcon,icon:We.h}),r.a.createElement(Ea.a,{className:xo.a.search,type:"text",placeholder:"Busca por nombre o identificaci\xf3n",onChange:this.onChange}))}}]),Object(l.a)(a,[{key:"onChange",value:function(){var e=Object(fe.a)(be.a.mark((function e(t){var a,n,r;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.target.value,!(n=this.props.patients)){e.next=8;break}return r="my"===n?this.props.userId:null,e.next=6,this.props.getPatients(r,a);case 6:e.next=10;break;case 8:return e.next=10,this.props.getUsers(a);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),a}(n.Component),wo={getPatients:ms,getUsers:Wa},Io=Object(h.b)(null,wo)(No),To=a(31),Ao=a.n(To),Po=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={check:Ao.a.btn},n.onAssignPatientClicked=n.onAssignPatientClicked.bind(Object(o.a)(n)),n}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.userId,a=e.patient,n=a.id;return r.a.createElement("div",{className:Ao.a.container},r.a.createElement(tt.b,{className:"ghost-btn ".concat(Ao.a.link),to:"/terapeuta/".concat(t,"/pacientes/").concat(n,"/actividades")},r.a.createElement("div",{className:"flex ".concat(Ao.a.height," ").concat(Ao.a.padding)},r.a.createElement("div",{className:"flex"},a.profile_img?r.a.createElement("img",{alt:"",className:Ao.a.uimage,src:"".concat("https://satrelo-qa.ddns.net").concat(a.profile_img)}):r.a.createElement("div",{className:"flex ".concat(Ao.a.uimage," ").concat(Ao.a.thumb),style:{backgroundColor:a.color}},a.thumbnail_alias),r.a.createElement("div",{className:Ao.a.padding},r.a.createElement("div",{className:Ao.a.uname},a.name,"\xa0",a.last_name),r.a.createElement("div",{className:Ao.a.uinfo},"Paciente desde 2019"))),r.a.createElement(Me.a,{className:"ghost-btn ".concat(this.state.check),onClick:this.onAssignPatientClicked},r.a.createElement(qe.a,{icon:We.a,size:"2x"})))))}}]),Object(l.a)(a,[{key:"componentDidMount",value:function(){this.setCheck()}},{key:"componentDidUpdate",value:function(){this.setCheck()}},{key:"checkTherapist",value:function(e,t){if(t.Therapists){if(t.Therapists[e])return!0}else if(t.Therapists_Patients&&e===t.Therapists_Patients.id_therapist)return!0;return!1}},{key:"onAssignPatientClicked",value:function(){var e=Object(fe.a)(be.a.mark((function e(t){var a,n,r;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.stopPropagation(),t.preventDefault(),a=this.props,n=a.userId,r=a.patient,!this.checkTherapist(n,r)){e.next=8;break}return e.next=6,this.props.removePatient(n,r.id);case 6:e.next=10;break;case 8:return e.next=10,this.props.createPatient(n,r.id);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setCheck",value:function(){var e=this.props,t=e.userId,a=e.patient,n=this.checkTherapist(t,a)?Ao.a.btnActive:Ao.a.btn;n!==this.state.check&&this.setState({check:n})}}]),a}(n.Component),Do={createPatient:function(e,t){return function(){var a=Object(fe.a)(be.a.mark((function a(n){var r,i,s,c,o,l,u,d;return be.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r="".concat(ds,"/therapist/").concat(e,"/patient"),a.prev=1,a.next=4,_e.a.post(r,{data:{pid:t}});case 4:return i=a.sent,s=i.data,c=s.data,o=s.message,l=s.status,u=200!==l,200===l&&(d=c[t],n({type:V,payload:{association:d}})),a.abrupt("return",{error:u,message:o});case 11:return a.prev=11,a.t0=a.catch(1),a.abrupt("return",{error:!0,message:a.t0});case 14:case"end":return a.stop()}}),a,null,[[1,11]])})));return function(e){return a.apply(this,arguments)}}()},removePatient:function(e,t){return function(){var a=Object(fe.a)(be.a.mark((function a(n){var r,i,s,c,o,l;return be.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r="".concat(ds,"/therapist/").concat(e,"/patient/").concat(t),a.prev=1,a.next=4,_e.a.delete(r);case 4:return i=a.sent,s=i.data,c=s.message,o=s.status,l=200!==o,200===o&&n({type:H,payload:{_association:{_id_therapist:e,_id_patient:t}}}),a.abrupt("return",{error:l,message:c});case 11:return a.prev=11,a.t0=a.catch(1),a.abrupt("return",{error:!0,message:a.t0});case 14:case"end":return a.stop()}}),a,null,[[1,11]])})));return function(e){return a.apply(this,arguments)}}()}},Mo=Object(h.b)(null,Do)(Po),Uo=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={loading:!1,option:"my",userId:null},n.onOptionSelected=n.onOptionSelected.bind(Object(o.a)(n)),n}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t="primary-btn-outline left ".concat(Co.a.btn," \n                            ").concat("my"===this.state.option?Co.a.btnSelected:""),a="primary-btn-outline ".concat(Co.a.btn," \n                            ").concat("all"===this.state.option?Co.a.btnSelected:""),n=this.props.patients;return n=n?Object.values(this.props.patients):[],r.a.createElement(Yr,{pt:50},r.a.createElement("div",{className:Co.a.title},"Pacientes"),r.a.createElement("div",{className:"flex ".concat(Co.a.searchContainer)},r.a.createElement("div",{className:"flex ".concat(Co.a.btnContainer)},r.a.createElement(Me.a,{className:t,name:"my",onClick:this.onOptionSelected,outline:!0},"Mis pacientes"),r.a.createElement(Me.a,{className:a,name:"all",onClick:this.onOptionSelected,outline:!0},"Todos los pacientes")),r.a.createElement(Io,{patients:this.state.option,userId:this.state.userId})),r.a.createElement("div",{className:Co.a.listContainer},this.state.loading?r.a.createElement(va,{color:"primary"}):n&&n.length>0?n.map((function(t){return r.a.createElement(Mo,{key:t.id,patient:t,userId:e.state.userId})})):r.a.createElement(pa,null,"No se encontraron pacientes. Recuerda que puedes asignarte pacientes en la opci\xf3n Todos los pacientes.")))}}]),Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=Object(fe.a)(be.a.mark((function e(){var t=this;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({userId:this.props.match.params.tid},(function(){t.getPatientsList(t.state.userId)}));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.props.setPatients(null)}},{key:"getPatientsList",value:function(){var e=Object(fe.a)(be.a.mark((function e(t){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.next=3,this.props.getPatients(t);case 3:this.setState({loading:!1});case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onOptionSelected",value:function(e){var t=this;this.setState({option:e.target.name},(function(){var e="my"===t.state.option?t.state.userId:null;t.getPatientsList(e)}))}}]),a}(n.Component),Lo={getPatients:ms,setPatients:function(e){return function(t){t({type:G,payload:{patients:e}})}}},Ro=Object(h.b)((function(e){return{patients:e.patient.patients}}),Lo)(Uo),Fo=a(117),Bo=a.n(Fo),zo=a(67),qo=a.n(zo),Wo=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).onLinkClicked=n.onLinkClicked.bind(Object(o.a)(n)),n}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.userId,a=e.user;return r.a.createElement("div",{className:"flex ".concat(qo.a.container)},r.a.createElement("div",{className:"flex"},a.profile_img?r.a.createElement("img",{alt:"",className:qo.a.uimage,src:"".concat("https://satrelo-qa.ddns.net").concat(a.profile_img)}):r.a.createElement("div",{className:"flex ".concat(qo.a.uimage," ").concat(qo.a.thumb),style:{backgroundColor:a.color}},a.thumbnail_alias),r.a.createElement("div",{className:qo.a.infoContainer},r.a.createElement("div",{className:qo.a.name},a.name," ",a.last_name),r.a.createElement("div",{className:qo.a.identification},"ID ",a.id))),r.a.createElement(tt.b,{className:"ghost-btn ".concat(qo.a.btnEdit),onClick:this.onLinkClicked,to:"/terapeuta/".concat(t,"/editar/").concat(a.id)},r.a.createElement(qe.a,{icon:We.d,size:"lg"})))}}]),Object(l.a)(a,[{key:"onLinkClicked",value:function(){this.props.setToUpdate(this.props.user)}}]),a}(n.Component),Ho={setToUpdate:Ga},Vo=Object(h.b)(null,Ho)(Wo),Go=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={loading:!1},n}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.match.params.tid,t=this.props.users;return t=t?Object.values(t):[],r.a.createElement(Yr,{pt:50},r.a.createElement("div",{className:Bo.a.title},"Todos los usuarios"),r.a.createElement("div",{className:"flex ".concat(Bo.a.toolsContainer)},r.a.createElement(Io,null),r.a.createElement(tt.b,{to:"/terapeuta/".concat(e,"/nuevo")},r.a.createElement(Me.a,{className:"secondary-btn ".concat(Bo.a.btnCreate)},"Nuevo"))),r.a.createElement("div",{className:Bo.a.listContainer},this.state.loading?r.a.createElement(va,{color:"primary"}):t.length>0?t.map((function(t){return r.a.createElement(Vo,{admin:!0,key:t.id,user:t,userId:e})})):r.a.createElement(pa,null,"No se han encontrado usuarios en el sistema. Recuerda que como administrador puedes crear usuarios nuevos")))}}]),Object(l.a)(a,[{key:"componentDidMount",value:function(){this.getAllUsers()}},{key:"componentWillUnmount",value:function(){this.props.setUsers(null)}},{key:"getAllUsers",value:function(){var e=Object(fe.a)(be.a.mark((function e(){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.next=3,this.props.getUsers();case 3:this.setState({loading:!1});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),a}(n.Component),Ko={getUsers:Wa,setUsers:function(e){return function(t){t({type:ie,payload:{users:e}})}}},Xo=Object(h.b)((function(e){return{users:e.user.users}}),Ko)(Go),Zo=a(118),Yo=a.n(Zo),Jo=a(68),Qo=a.n(Jo),$o=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={encodedImage:null},n.canvasRef=r.a.createRef(),n.imageRef=r.a.createRef(),n.onFileChanged=n.onFileChanged.bind(Object(o.a)(n)),n.onFileReaderLoaded=n.onFileReaderLoaded.bind(Object(o.a)(n)),n.onImageLoaded=n.onImageLoaded.bind(Object(o.a)(n)),n}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:Qo.a.container},r.a.createElement("div",{className:"flex ".concat(Qo.a.innerContainer)},r.a.createElement("div",{className:"flex ".concat(Qo.a.iconContainer)},!this.state.encodedImage&&r.a.createElement(qe.a,{className:Qo.a.icon,icon:We.g,size:"3x"}),r.a.createElement("canvas",{style:{display:this.state.encodedImage?"block":"none"},ref:this.canvasRef}),r.a.createElement("img",{alt:"",className:Qo.a.hiddenImage,ref:this.imageRef,src:""}))),r.a.createElement("p",{className:Qo.a.text},"Si lo deseas puedes agregar una imagen de perfil"),r.a.createElement(Oa.a,null,r.a.createElement(Ea.a,{className:Qo.a.hidden,onChange:this.onFileChanged,type:"file",id:"profilePicture"}),r.a.createElement(Ya.a,{className:"secondary-btn ".concat(Qo.a.btnFile),for:"profilePicture"},"Agregar Imagen")))}}]),Object(l.a)(a,[{key:"onFileChanged",value:function(e){var t=e.target.files[0];if(t){var a=new FileReader;a.readAsDataURL(t),a.onload=this.onFileReaderLoaded}}},{key:"onFileReaderLoaded",value:function(e){this.imageRef.current.src=e.target.result,this.imageRef.current.onload=this.onImageLoaded}},{key:"onImageLoaded",value:function(e){var t=this,a=e.target.width>e.target.height&&e.target.width>180?180/e.target.width:e.target.height>180?180/e.target.height:1;this.canvasRef.current.width=e.target.width*a,this.canvasRef.current.height=e.target.height*a;var n=this.canvasRef.current.getContext("2d");n.drawImage(e.target,0,0,this.canvasRef.current.width,this.canvasRef.current.height);var r=n.canvas.toDataURL(e.target,"image/png");this.setState({encodedImage:r},(function(){t.canvasRef.current.toBlob((function(e){t.props.onImageLoaded(e)}))}))}}]),a}(n.Component),el=function(e){return r.a.createElement(Oa.a,{check:!0},r.a.createElement(Ea.a,{type:"checkbox",name:e.name,checked:e.checked,onChange:function(t){e.onChange(t)}}),r.a.createElement(Ya.a,null,e.children))},tl=function(e){return r.a.createElement(Oa.a,null,r.a.createElement(Ya.a,null,e.children),r.a.createElement(mc,{date:e.date,form:!0,name:e.name,onChange:function(t){e.onChange(t)}}))},al=function(e){return r.a.createElement(Oa.a,null,r.a.createElement(Ya.a,null,e.children),r.a.createElement(Ea.a,{type:"select",name:e.name,onChange:function(t){e.onChange(t)},value:e.value},e.options.map((function(e,t){return r.a.createElement("option",{key:t,value:e.value},e.title)}))))},nl=[{title:"Femenino",value:"F"},{title:"Masculino",value:"M"}],rl=[{title:"Paciente",value:1},{title:"Terapeuta",value:2}],il=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={active:{value:!0},birthday_date:{value:new Date},email:{value:"",error:null},gender:{value:"F"},id:{value:"",error:null},is_admin:{value:!1},last_name:{value:"",error:null},name:{value:"",error:null},password:{value:"",error:null},username:{value:"",error:null},id_role:{value:1}},n.onChange=n.onChange.bind(Object(o.a)(n)),n.onSaveClicked=n.onSaveClicked.bind(Object(o.a)(n)),n}return Object(l.a)(a,[{key:"render",value:function(){var e=!!this.props.update;return r.a.createElement(ya.a,null,r.a.createElement(kn.a,{form:!0},r.a.createElement(yn.a,{md:6},r.a.createElement($a,{error:this.state.name.error,name:"name",onChange:this.onChange,value:this.state.name.value},"Nombre *")),r.a.createElement(yn.a,{md:6},r.a.createElement($a,{error:this.state.last_name.error,name:"last_name",onChange:this.onChange,value:this.state.last_name.value},"Apellido *"))),r.a.createElement($a,{error:this.state.email.error,name:"email",onChange:this.onChange,value:this.state.email.value},"Email *"),r.a.createElement(kn.a,{form:!0},r.a.createElement(yn.a,{md:6},r.a.createElement($a,{disabled:e,error:this.state.id.error,name:"id",onChange:this.onChange,value:this.state.id.value},"Identificaci\xf3n *")),r.a.createElement(yn.a,{md:6},r.a.createElement(tl,{date:this.state.birthday_date.value,name:"birthday_date",onChange:this.onChange},"Fecha de nacimiento *"))),r.a.createElement(al,{name:"gender",onChange:this.onChange,options:nl,value:this.state.gender.value},"G\xe9nero *"),r.a.createElement(kn.a,{form:!0},r.a.createElement(yn.a,{md:6},r.a.createElement($a,{error:this.state.username.error,name:"username",onChange:this.onChange,value:this.state.username.value},"Nombre de usuario *")),r.a.createElement(yn.a,{md:6},r.a.createElement(al,{name:"id_role",onChange:this.onChange,options:rl,value:this.state.id_role.value},"Tipo de usuario *"))),r.a.createElement($a,{error:this.state.password.error,form:"admin",name:"password",onChange:this.onChange,value:this.state.password.value},"Contrase\xf1a *"),r.a.createElement(el,{name:"active",checked:this.state.active.value,onChange:this.onChange},"\xbfEste usuario est\xe1 activo?"),2===this.state.id_role.value&&r.a.createElement(el,{name:"is_admin",checked:this.state.is_admin.value,onChange:this.onChange},"\xbfEste usuario es administrador?"),r.a.createElement(Da,{className:"secondary-btn mt-4 w-100",loading:this.props.loading,onClick:this.onSaveClicked},"Guardar"))}}]),Object(l.a)(a,[{key:"componentDidUpdate",value:function(e){this.props.user&&this.props.user!==e.user&&this.setState(Object(St.a)({},this.props.user))}},{key:"buildUserData",value:function(){var e=this,t=Object.keys(this.state),a={};return t.forEach((function(t){var n=e.state[t].value;"name"!==t&&"last_name"!==t&&"email"!==t&&"id"!==t&&"username"!==t&&"password"!==t||(n=n.trim()),a[t]=n})),a}},{key:"onChange",value:function(e){var t=e.target,a=t.name,n=t.value;"active"===a||"is_admin"===a?n=!this.state[a].value:"id_role"===a&&(n=parseInt(n,10));var r=this.state[a];r.value=n,r.error&&(r.error=null),this.setState(Object(nr.a)({},a,r))}},{key:"onSaveClicked",value:function(e){if(e.preventDefault(),!this.props.loading){var t=this.props.update,a=function(e,t){var a=Object.assign({},e),n=!1;""===a.name.value.trim()&&(a.name.error="Este campo es obligatorio.",n=!0),""===a.last_name.value.trim()&&(a.last_name.error="Este campo es obligatorio.",n=!0),""===a.email.value.trim()&&(a.email.error="Este campo es obligatorio.",n=!0),""===a.id.value.trim()&&(a.id.error="Este campo es obligatorio.",n=!0),""===a.username.value.trim()&&(a.username.error="Este campo es obligatorio.",n=!0);var r=!0;if(t||""!==a.password.value.trim()||(a.password.error="Este campo es obligatorio.",n=!0,r=!1),/[a-zA-Z0-9.+_-]+@[a-z]+\.[a-z]+/.test(a.email.value.trim())||(a.email.error="Debes ingresar un email v\xe1lido.",n=!0),r&&""!==a.password.value.trim()&&1===a.id_role.value)if(/[ `!@#$%^g*()_+\-=[\]{};':"\\|.<>/?~]/.test(a.password.value.trim()))a.password.error="La contrase\xf1a del paciente no puede tener ning\xfan caracter especial exceptuando la coma (,).",n=!0;else{var i=a.password.value.trim().split(",");if(4!==i.length)a.password.error="La contrase\xf1a del paciente debe tener 4 palabras separadas por coma (,).",n=!0;else{var s=["\xe1rbol","coraz\xf3n","flor","nube","sol"],c=!1;i.forEach((function(e){s.includes(e)||(c=!0)})),c&&(a.password.error="La contrase\xf1a del paciente debe tener palabras pertenecientes al conjunto descrito.",n=!0)}}return{hasErrors:n,user:a}}(this.state,t);if(a.hasErrors)this.setState(Object(St.a)({},a.user));else{var n=this.buildUserData();this.props.onSave(n)}}}}]),a}(n.Component),sl=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={image:null,loading:!1,update:!1,user:null},n.onImageLoaded=n.onImageLoaded.bind(Object(o.a)(n)),n.onSave=n.onSave.bind(Object(o.a)(n)),n}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.match.params.uid?"Editar usuario":"Crear usuario",t=this.state,a=t.update,n=t.user;return r.a.createElement(Yr,{pt:50},r.a.createElement("div",{className:Yo.a.title},e),r.a.createElement("div",{className:Yo.a.container},r.a.createElement("div",{className:Yo.a.formContainer},r.a.createElement(kn.a,null,r.a.createElement(yn.a,{md:4},r.a.createElement($o,{onImageLoaded:this.onImageLoaded})),r.a.createElement(yn.a,{md:8},r.a.createElement("p",{className:Yo.a.userData},"Datos del usuario"),r.a.createElement(il,{loading:this.state.loading,onSave:this.onSave,update:a,user:n}))))))}}]),Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.match.params.uid;this.props.toUpdate?this.prepareUserForUpdate():e&&this.getUserToUpdate(e)}},{key:"componentDidUpdate",value:function(){this.props.toUpdate&&!this.state.user&&this.prepareUserForUpdate()}},{key:"componentWillUnmount",value:function(){this.props.setToUpdate(null)}},{key:"getUserToUpdate",value:function(e){this.props.getUser(e,!0)}},{key:"prepareUserForUpdate",value:function(){var e=this.props.toUpdate,t={id:{value:e.id,error:null},active:{value:e.active},birthday_date:{value:new Date(e.birthday_date)},email:{value:e.email,error:null},gender:{value:e.gender},is_admin:{value:e.is_admin},last_name:{value:e.last_name,error:null},name:{value:e.name,error:null},username:{value:e.username,error:null},id_role:{value:e.Role.id}};this.setState({update:!0,user:t})}},{key:"onImageLoaded",value:function(e){this.setState({image:e})}},{key:"onSave",value:function(){var e=Object(fe.a)(be.a.mark((function e(t){var a,n,r,i,s,c,o,l,u,d,p;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===(a=Object.assign({},t)).password.trim()&&delete a.password,n=Xa(a.name,a.last_name),a.thumbnail_alias=n,(r=this.state.update)||(a.color=Ka(),2===a.id_role&&(a.id_avatar_variation=1)),this.setState({loading:!0}),!this.state.image){e.next=14;break}return i=this.state.image,s="".concat(t.username,".png"),e.next=12,this.props.uploadProfileImage(i,s);case 12:(c=e.sent).error||(o=c.data.path,a.profile_img=o);case 14:if(l=this.props.match.params.tid,!r){e.next=21;break}return e.next=18,this.props.updateUser(a,l);case 18:e.t0=e.sent,e.next=24;break;case 21:return e.next=23,this.props.register(a);case 23:e.t0=e.sent;case 24:u=e.t0,d=u.error,p=u.message,this.setState({loading:!1}),this.props.setNotification({error:d,message:p,slide:!0}),this.props.history.goBack();case 29:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),a}(n.Component),cl={getUser:qa,register:function(e){return Object(fe.a)(be.a.mark((function t(){var a,n,r,i,s,c;return be.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="".concat(Ct,"/auth/register"),t.prev=1,t.next=4,_e.a.post(a,{user:e});case 4:return n=t.sent,r=n.data,i=r.message,s=r.status,c=200!==s,t.abrupt("return",{error:c,message:i});case 10:return t.prev=10,t.t0=t.catch(1),t.abrupt("return",{error:!0,message:t.t0});case 13:case"end":return t.stop()}}),t,null,[[1,10]])})))},updateUser:Ha,uploadProfileImage:function(e,t){return Object(fe.a)(be.a.mark((function a(){var n,r,i,s,c,o,l,u;return be.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n="".concat(Aa,"/plugin/upload-profile-image"),a.prev=1,(r=new FormData).append("file",e,t),a.next=6,_e.a.post(n,r,{headers:{"Content-Type":"multipart/form-data;"}});case 6:return i=a.sent,s=i.data,c=s.data,o=s.message,l=s.status,u=200!==l,a.abrupt("return",{data:c,error:u,message:o});case 12:return a.prev=12,a.t0=a.catch(1),a.abrupt("return",{error:!0,message:a.t0});case 15:case"end":return a.stop()}}),a,null,[[1,12]])})))},setNotification:ue,setToUpdate:Ga},ol=Object(h.b)((function(e){return{toUpdate:e.user.toUpdate}}),cl)(sl),ll=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).calculateVOffset=n.calculateVOffset.bind(Object(o.a)(n)),n.setWindowSize=n.setWindowSize.bind(Object(o.a)(n)),n}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},this.props.ui.parallax&&r.a.createElement("div",{className:"App-parallax-bg"}),r.a.createElement(Bt,null),this.props.ui.showAvatar?this.props.ui.windowWidth>=768?r.a.createElement("div",{className:"flex avatar-container",style:{"--vOffset":"".concat(this.props.ui.vOffset,"px")}},r.a.createElement(Fe,null)):r.a.createElement(Vt,null):null,this.props.ui.modal&&r.a.createElement(pn,null),this.props.ui.showMobileMenu&&r.a.createElement(Jt,null),this.props.ui.notification&&r.a.createElement(Ke,null),r.a.createElement(m.a,{className:"App-container",fluid:!0,style:{"--vOffset":"".concat(this.props.ui.vOffset,"px")}},r.a.createElement(p.d,null,r.a.createElement(p.b,{exact:!0,path:"/",component:er}),r.a.createElement(p.b,{exact:!0,path:"/paciente",component:ts}),r.a.createElement(fn,{exact:!0,path:"/paciente/:pid/actividades",component:ki}),r.a.createElement(fn,{exact:!0,path:"/paciente/:pid/colecciones",component:Bi}),r.a.createElement(fn,{exact:!0,path:"/paciente/:pid/colecciones/:id/coleccionable/:cid",component:ji}),r.a.createElement(fn,{exact:!0,path:"/paciente/:pid/actividades/:aid/sesiones/:sid",component:os}),r.a.createElement(fn,{exact:!0,path:"/terapeuta/:tid/perfil",component:ai}),r.a.createElement(fn,{exact:!0,path:"/terapeuta/:tid/pacientes/:pid/actividades",component:js}),r.a.createElement(fn,{exact:!0,path:"/terapeuta/:tid/pacientes/:pid/configuracion",component:Ys}),r.a.createElement(fn,{exact:!0,path:"/terapeuta/:tid/pacientes/:pid/actividades/:aid/:kind",component:vo}),r.a.createElement(fn,{exact:!0,path:"/terapeuta/:tid/pacientes/:pid/actividades/:kind",component:vo}),r.a.createElement(p.b,{exact:!0,path:"/terapeuta",component:Eo}),r.a.createElement(fn,{exact:!0,path:"/terapeuta/:tid/pacientes",component:Ro}),r.a.createElement(fn,{exact:!0,path:"/terapeuta/:tid/admin",component:Xo}),r.a.createElement(fn,{exact:!0,path:"/terapeuta/:tid/nuevo",component:ol}),r.a.createElement(fn,{exact:!0,path:"/terapeuta/:tid/editar/:uid",component:ol}))))}}]),Object(l.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.setWindowSize),this.calculateVOffset(window.innerWidth),Ce.init("es-MX"),this.status=new Ae(this)}},{key:"componentDidUpdate",value:function(e){this.calculateVOffset(window.innerWidth);var t=this.props.connection,a=t.connectSocket,n=t.checkServerStatus;a!==e.connection.connectSocket&&Ie.handleConnection(this.props.connection,this),n!==e.connection.checkServerStatus&&this.checkServerStatus(n)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.setWindowSize)}},{key:"calculateVOffset",value:function(e){var t=this.props.ui.showAvatar&&e<768?182:62;this.props.ui.vOffset&&t===this.props.ui.vOffset||this.props.setVOffset(t)}},{key:"checkServerStatus",value:function(e){this.status.checkServerStatus(e,!1,Ie)}},{key:"setWindowSize",value:function(){var e=window.innerWidth;this.props.setWindowWidth(e),e>=768&&this.props.showMobileMenu(!1),this.calculateVOffset(e)}}]),a}(n.Component),ul={ping:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Object(fe.a)(be.a.mark((function t(){var a,n,r,i,s,c;return be.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="".concat(e?ke:ye,"/ping"),t.prev=1,t.next=4,_e.a.get(a);case 4:return n=t.sent,r=n.data,i=r.message,s=r.status,c=200!==s,t.abrupt("return",{error:c,message:i,status:s});case 10:return t.prev=10,t.t0=t.catch(1),t.abrupt("return",{error:!0,message:t.t0,status:500});case 13:case"end":return t.stop()}}),t,null,[[1,10]])})))},setConnectedId:Oe,showMobileMenu:he,setFullScreen:oe,setNotification:ue,setVOffset:function(e){return function(t){t({type:$,payload:{vOffset:e}})}},setWindowWidth:function(e){return function(t){t({type:ee,payload:{width:e}})}}},dl=Object(h.b)((function(e){return{connection:e.connection,ui:e.ui}}),ul)(ll),pl=a(70),ml=a(241),hl=a(242),vl={activities:null,activity:null,sessions:null,session:null},bl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vl,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:var a=t.payload.id,n=e.activities;return delete n[a],0===Object.values(n).length&&(n=null),Object(St.a)(Object(St.a)({},e),{},{activities:n});case b:return Object(St.a)(Object(St.a)({},e),{},{activities:t.payload.activities});case f:return Object(St.a)(Object(St.a)({},e),{},{activity:t.payload.activity});case _:return Object(St.a)(Object(St.a)({},e),{},{sessions:t.payload.sessions});case g:return Object(St.a)(Object(St.a)({},e),{},{session:t.payload.session});case k:var r=t.payload.activity,i=r.id,s=e.activities;return s[i]=r,Object(St.a)(Object(St.a)({},e),{},{activities:s});default:return e}},fl="".concat(ut,"Token"),gl="".concat(dt,"Token"),_l=(lc={},Object(nr.a)(lc,fl,localStorage.getItem(fl)||null),Object(nr.a)(lc,gl,localStorage.getItem(gl)||null),lc),kl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_l,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return Object(St.a)(Object(St.a)({},e),{},Object(nr.a)({},fl,t.payload.token));case O:return Object(St.a)(Object(St.a)({},e),{},Object(nr.a)({},gl,t.payload.token));default:return e}},yl={message:null,variations:null},Ol=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yl,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return Object(St.a)(Object(St.a)({},e),{},{message:t.payload.message});case S:var a=t.payload.variation,n=Object.values(e.variations),r=0;return n.forEach((function(e,t){a.id===e.id&&a.id_avatar===e.id_avatar&&(r=t)})),n[r]=a,n=Object.assign.apply(Object,[{}].concat(Object(rr.a)(n.map((function(e){return Object(nr.a)({},e.id,e)}))))),Object(St.a)(Object(St.a)({},e),{},{variations:n});case C:return Object(St.a)(Object(St.a)({},e),{},{variations:t.payload.variations});default:return e}},El={collections:null,collectable:null},Sl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:El,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case M:return Object(St.a)(Object(St.a)({},e),{},{collections:t.payload.collections});case U:return Object(St.a)(Object(St.a)({},e),{},{collectable:t.payload.collectable});case R:var a=t.payload.data,n=a.collectableId,r=a.collectionId,i=e.collections,s=i[r],c=s.Collectables,o=c[n],l=o.Skins;return Object(St.a)(Object(St.a)({},e),{},{collections:Object(St.a)(Object(St.a)({},i),{},Object(nr.a)({},r,Object(St.a)(Object(St.a)({},s),{},{Collectables:Object(St.a)(Object(St.a)({},c),{},Object(nr.a)({},n,Object(St.a)(Object(St.a)({},o),{},{Skins:Object(St.a)(Object(St.a)({},l),{},{owned:!0})})))})))});case L:var u=t.payload.data,d=u.skinId,p=e.collectable,m=p.Skins,h=m[d];return Object(St.a)(Object(St.a)({},e),{},{collectable:Object(St.a)(Object(St.a)({},p),{},{Skins:Object(St.a)(Object(St.a)({},m),{},Object(nr.a)({},d,Object(St.a)(Object(St.a)({},h),{},{owned:!0})))})});default:return e}},Cl={configuration:null},jl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Cl,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:return Object(St.a)(Object(St.a)({},e),{},{configuration:null});case x:return Object(St.a)(Object(St.a)({},e),{},{configuration:t.payload.configuration});default:return e}},xl={checkServerStatus:!1,connectedId:null,connectSocket:!1},Nl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xl,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case F:return Object(St.a)(Object(St.a)({},e),{},{checkServerStatus:t.payload.check});case B:return Object(St.a)(Object(St.a)({},e),{},{connectedId:t.payload.connectedId});case z:return Object(St.a)(Object(St.a)({},e),{},{connectSocket:t.payload.connectSocket});default:return e}},wl={mechanic:{id:"mechanic",first:!0,multichoice:!1,next:"situations",options:null,reset:["situations","times","reader"],subtitle:"Selecciona la mec\xe1nica de la actividad que deseas trabajar\n                    con tu paciente. Esta selecci\xf3n desbloquea las situaciones\n                    que se pueden trabajar en la actividad.",title:"1. Mec\xe1nica de la actividad"},situations:{id:"situations",multichoice:!1,next:"times",options:null,required:["mechanic"],reset:["times","reader"],subtitle:"Elige una situaci\xf3n particular para trabajar en la actividad.\n                    Esta selecci\xf3n desbloquea los tiempos gramaticales.",title:"2. Situaciones"},times:{id:"times",multichoice:!1,next:"reader",options:null,reset:["reader"],subtitle:"Selecciona el tiempo gramatical (pasado, presente, futuro...)\n                    que deseas trabajar en la actividad.",title:"3. Tiempos gramaticales"},reader:{id:"reader",multichoice:!1,next:null,options:null,reset:null,subtitle:"Selecciona si tu paciente cuenta con proceso lector o no.",title:"4. \xbfEl paciente cuenta con proceso lector?"}},Il=function(){var e,t,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wl,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case N:return e=a[t=n.payload.fieldId],Object(St.a)(Object(St.a)({},a),{},Object(nr.a)({},t,Object(St.a)(Object(St.a)({},e),{},{options:null})));case w:return e=a[t=n.payload.fieldId],Object(St.a)(Object(St.a)({},a),{},Object(nr.a)({},t,Object(St.a)(Object(St.a)({},e),{},{options:n.payload.options})));case I:e=a[t=n.payload.fieldId];var r=Object.values(Object(St.a)({},e.options)),i=n.payload.optionId;return r.forEach((function(e){e.selected=e.id===i})),Object(St.a)(Object(St.a)({},a),{},Object(nr.a)({},t,Object(St.a)(Object(St.a)({},e),{},{options:r})));default:return a}},Tl={feedDate:new Date,feedData:null},Al=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tl,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case q:return Object(St.a)(Object(St.a)({},e),{},{feedData:t.payload.feedData});case W:return Object(St.a)(Object(St.a)({},e),{},{feedDate:t.payload.feedDate});default:return e}},Pl={patients:null,patient:null},Dl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pl,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case H:var a=t.payload._association,n=a._id_therapist,r=a._id_patient,i=e.patients[r];if(i.Therapists_Patients){var s=Object(St.a)({},e.patients);return delete s[r],Object(St.a)(Object(St.a)({},e),{},{patients:s})}var c=Object(St.a)({},i.Therapists);return delete c[n],Object(St.a)(Object(St.a)({},e),{},{patients:Object(St.a)(Object(St.a)({},e.patients),{},Object(nr.a)({},r,Object(St.a)(Object(St.a)({},i),{},{Therapists:c})))});case V:var o=t.payload.association,l=o.id_therapist,u=o.id_patient,d=e.patients[u],p=d.Therapists;return Object(St.a)(Object(St.a)({},e),{},{patients:Object(St.a)(Object(St.a)({},e.patients),{},Object(nr.a)({},u,Object(St.a)(Object(St.a)({},d),{},{Therapists:Object(St.a)(Object(St.a)({},p),{},Object(nr.a)({},l,o))})))});case G:return Object(St.a)(Object(St.a)({},e),{},{patients:t.payload.patients});case K:return Object(St.a)(Object(St.a)({},e),{},{patient:t.payload.patient});default:return e}},Ml={category:{id:"category",first:!0,next:"subcategory",multichoice:!1,options:null,reset:["subcategory","sintactic","vocabulary","mechanic"],subtitle:"Elige una categor\xeda sem\xe1ntica para desbloquear la opci\xf3n\n                    Subcategor\xeda sem\xe1ntica.",title:"1. Categor\xeda sem\xe1ntica"},subcategory:{id:"subcategory",multichoice:!1,next:"sintactic",options:null,required:["category"],reset:["sintactic","vocabulary","mechanic"],subtitle:"Elige una de las subcategor\xedas sem\xe1nticas asociadas a la\n                    categor\xeda sem\xe1ntica elegida. Esta selecci\xf3n desbloquea la\n                    opci\xf3n Estructura sint\xe1ctica.",title:"2. Subcategor\xeda sem\xe1ntica"},sintactic:{id:"sintactic",multichoice:!1,next:"vocabulary",options:null,reset:["vocabulary","mechanic"],subtitle:"Elige la estructura sint\xe1ctica que deseas trabajar con tu\n                    paciente y desbloquea el vocabulario asociado.",title:"3. Estructura sint\xe1ctica"},vocabulary:{id:"vocabulary",minimum:3,multichoice:!0,next:"mechanic",options:null,required:["subcategory","sintactic"],reset:["mechanic"],subtitle:"Elige las palabras asociadas que quieres trabajar con tu\n                    paciente en la actividad (m\xednimo 3). Al elegir el vocabulario\n                    se desbloquea la mec\xe1nica de la actividad.",title:"4. Vocabulario asociado"},mechanic:{id:"mechanic",multichoice:!1,next:null,options:null,required:["subcategory","sintactic"],reset:null,subtitle:"Elige la mec\xe1nica de la actividad que deseas trabajar con\n                    tu paciente.",title:"5. Mec\xe1nica de la actividad"}},Ul=function(){var e,t,a,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ml,i=arguments.length>1?arguments[1]:void 0;switch(i.type){case T:e=r[t=i.payload.fieldId],a=i.payload.optionId;var s=(n=Object(St.a)({},e.options))[a];return s.selected=!s.selected||!s.selected,Object(St.a)(Object(St.a)({},r),{},Object(nr.a)({},t,Object(St.a)(Object(St.a)({},e),{},{options:n})));case A:return e=r[t=i.payload.fieldId],Object(St.a)(Object(St.a)({},r),{},Object(nr.a)({},t,Object(St.a)(Object(St.a)({},e),{},{options:null})));case P:return e=r[t=i.payload.fieldId],Object(St.a)(Object(St.a)({},r),{},Object(nr.a)({},t,Object(St.a)(Object(St.a)({},e),{},{options:i.payload.options})));case D:return t=i.payload.fieldId,a=i.payload.optionId,e=r[t],(n=Object.values(Object(St.a)({},e.options))).forEach((function(e){e.selected=e.id===a})),n=Object.assign.apply(Object,[{}].concat(Object(rr.a)(n.map((function(e){return Object(nr.a)({},e.id,e)}))))),Object(St.a)(Object(St.a)({},r),{},Object(nr.a)({},e.id,Object(St.a)(Object(St.a)({},e),{},{options:n})));default:return r}},Ll={bar:"standard",fullScreen:!1,modal:null,notification:null,parallax:!1,showAvatar:!1,showCreateActivityButton:!1,showMobileMenu:!1,vOffset:null,windowWidth:window.innerWidth},Rl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ll,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case X:return Object(St.a)(Object(St.a)({},e),{},{bar:t.payload.bar});case Z:return Object(St.a)(Object(St.a)({},e),{},{fullScreen:t.payload.fullScreen});case Y:return Object(St.a)(Object(St.a)({},e),{},{modal:t.payload.modal});case J:return Object(St.a)(Object(St.a)({},e),{},{notification:t.payload.notification});case Q:return Object(St.a)(Object(St.a)({},e),{},{parallax:t.payload.parallax});case $:return Object(St.a)(Object(St.a)({},e),{},{vOffset:t.payload.vOffset});case ee:return Object(St.a)(Object(St.a)({},e),{},{windowWidth:t.payload.width});case te:return Object(St.a)(Object(St.a)({},e),{},{showAvatar:t.payload.show});case ae:return Object(St.a)(Object(St.a)({},e),{},{showCreateActivityButton:t.payload.show});case ne:return Object(St.a)(Object(St.a)({},e),{},{showMobileMenu:t.payload.show});default:return e}},Fl={user:null,users:null,toUpdate:null},Bl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fl,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case re:return Object(St.a)(Object(St.a)({},e),{},{user:t.payload.user});case ie:return Object(St.a)(Object(St.a)({},e),{},{users:t.payload.users});case se:return Object(St.a)(Object(St.a)({},e),{},{toUpdate:t.payload.user});default:return e}},zl=Object(pl.combineReducers)({activity:bl,auth:kl,avatar:Ol,collection:Sl,configuration:jl,connection:Nl,dynamic:Il,feedback:Al,patient:Dl,static:Ul,ui:Rl,user:Bl}),ql=[hl.a],Wl=Object(ml.composeWithDevTools)(pl.applyMiddleware.apply(void 0,ql)),Hl=Object(pl.createStore)(zl,Wl);s.a.render(r.a.createElement(h.a,{store:Hl},r.a.createElement(tt.a,null,r.a.createElement(dl,null))),document.getElementById("root"))},51:function(e,t,a){e.exports={container:"SUserNav_container__piflN",link:"SUserNav_link__1lXdk",uimage:"SUserNav_uimage__JCXUR",thumb:"SUserNav_thumb__2Xh2m",linksContainer:"SUserNav_linksContainer__1HsbN"}},52:function(e,t,a){e.exports={container:"SMenu_container__2Yxhb",image:"SMenu_image__3j8T_",item:"SMenu_item__2y48J",menu:"SMenu_menu__1wwem",name:"SMenu_name__2VPRa",toggle:"SMenu_toggle__3ImI5",thumb:"SMenu_thumb__1bxk3"}},53:function(e,t,a){e.exports={btn:"SPCollectable_btn__3F17S",btnBuy:"SPCollectable_btnBuy__11AV6",cannotBuy:"SPCollectable_cannotBuy__214jT",collectableImg:"SPCollectable_collectableImg__3cZqV",container:"SPCollectable_container__CqgDH",info:"SPCollectable_info__3Xpgw",owned:"SPCollectable_owned__2OLUo",name:"SPCollectable_name__3fJXU",points:"SPCollectable_points__HH131"}},54:function(e,t,a){e.exports={container:"STActivitiesPage_container__Dkttc",listContainer:"STActivitiesPage_listContainer__3H82W",link:"STActivitiesPage_link__Zp_iB",title:"STActivitiesPage_title__3hloJ",titleContainer:"STActivitiesPage_titleContainer__15GGo",btn:"STActivitiesPage_btn__10Nfo",btnContainer:"STActivitiesPage_btnContainer___q4t_"}},55:function(e,t,a){e.exports={btn:"STConfigurationPage_btn__2Q1aY",btnContainer:"STConfigurationPage_btnContainer__2lvgp",btnSelected:"STConfigurationPage_btnSelected__3TLjP",container:"STConfigurationPage_container__1SfrO",create:"STConfigurationPage_create__V1e0R",createContainer:"STConfigurationPage_createContainer__ejmW4",title:"STConfigurationPage_title__SAFHt"}},56:function(e,t,a){e.exports={btn:"STSession_btn__1HRAO",container:"STSession_container__3BTNV",date:"STSession_date__1obRt",first:"STSession_first__305GI",innerContainer:"STSession_innerContainer__267Re",last:"STSession_last__9rLEC",selected:"STSession_selected__3sDgP",time:"STSession_time__AqmmZ",title:"STSession_title__3nRh1"}},59:function(e,t,a){e.exports={subtitle:"Feedback_subtitle__2jAva"}},61:function(e,t,a){e.exports={border:"SBubbleNotification_border__2HzhK",container:"SBubbleNotification_container__1FKzp",containerDesktop:"SBubbleNotification_containerDesktop__rEvZS",slide:"SBubbleNotification_slide__1vY3y",containerMobile:"SBubbleNotification_containerMobile__3rxZT","slide-mobile":"SBubbleNotification_slide-mobile__1HxUQ",error:"SBubbleNotification_error__30IdJ",iconContainer:"SBubbleNotification_iconContainer__3mpCw",message:"SBubbleNotification_message__3kJu1",success:"SBubbleNotification_success__6BfMy"}},62:function(e,t,a){e.exports={buttons:"SMobileAvatar_buttons__18icT",buttonIcon:"SMobileAvatar_buttonIcon__2LFyT",buttonMargin:"SMobileAvatar_buttonMargin__2iV89",container:"SMobileAvatar_container__Dg-y0",image:"SMobileAvatar_image__kQP3-",message:"SMobileAvatar_message__1VqAb"}},63:function(e,t,a){e.exports={description:"SAvatarInfo_description__3-0RK",title:"SAvatarInfo_title__2_kr2",image:"SAvatarInfo_image__33PTx",avatarSide:"SAvatarInfo_avatarSide__2ypT8",container:"SAvatarInfo_container__1oU3a",innerContainer:"SAvatarInfo_innerContainer__DZUKW",sides:"SAvatarInfo_sides__2mJaW"}},64:function(e,t,a){e.exports={alias:"SUserHero_alias__30gX0",col:"SUserHero_col__2-y6V",container:"SUserHero_container__2HQOn",header:"SUserHero_header__208gI",row:"SUserHero_row__2JNLW",userContainer:"SUserHero_userContainer__2iKG9",uimage:"SUserHero_uimage__1pTXn",uname:"SUserHero_uname__ahWoO"}},65:function(e,t,a){e.exports={btn:"SPActivity_btn__31_lh",btnContainer:"SPActivity_btnContainer__kCgAz",container:"SPActivity_container__DgMeO",gameContainer:"SPActivity_gameContainer__3PhTU",gameDescription:"SPActivity_gameDescription__WhuKO",gameTitle:"SPActivity_gameTitle__2kzT7",gameImage:"SPActivity_gameImage__2yi6e"}},66:function(e,t,a){e.exports={btnSelected:"STPatientsPage_btnSelected__1YXjO",listContainer:"STPatientsPage_listContainer__2Gd2S",searchContainer:"STPatientsPage_searchContainer__3wZs0",title:"STPatientsPage_title__ShvPl",btn:"STPatientsPage_btn__3XsPy",btnContainer:"STPatientsPage_btnContainer__2U2bb"}},67:function(e,t,a){e.exports={btnEdit:"SAUser_btnEdit__31k6p",container:"SAUser_container__3jGeH",identification:"SAUser_identification__10yNg",infoContainer:"SAUser_infoContainer__1c1tt",name:"SAUser_name__2r1LZ",thumb:"SAUser_thumb__3j8ix",uimage:"SAUser_uimage__12AXo"}},68:function(e,t,a){e.exports={btnFile:"SAImageLoader_btnFile__yC3tC",container:"SAImageLoader_container__1TFBc",hidden:"SAImageLoader_hidden__22hCG",hiddenImage:"SAImageLoader_hiddenImage__5cF78",icon:"SAImageLoader_icon__gFXGj",iconContainer:"SAImageLoader_iconContainer__1f591",innerContainer:"SAImageLoader_innerContainer__wBoVn",text:"SAImageLoader_text__nMsm9"}},74:function(e,t,a){e.exports={buttons:"SAvatar_buttons__2B6eR",buttonIcon:"SAvatar_buttonIcon__1Rwdk",container:"SAvatar_container__1p6Ra",image:"SAvatar_image__f6nMg",message:"SAvatar_message__36pWZ"}},75:function(e,t,a){e.exports={container:"SDevelop_container__HmJ_4",innerContainer:"SDevelop_innerContainer__1B2tR",icon:"SDevelop_icon__3Z57o",logoImage:"SDevelop_logoImage__3Nyb1",logoContainer:"SDevelop_logoContainer__2JtP6",text:"SDevelop_text__19GGD"}},76:function(e,t,a){e.exports={alt:"SSkinItem_alt__cvVGs",btn:"SSkinItem_btn__100ay",btnContainer:"SSkinItem_btnContainer__1G1SF",cannotBuy:"SSkinItem_cannotBuy__1dO63",collectableImg:"SSkinItem_collectableImg__1L6kx",container:"SSkinItem_container__26nnT",owned:"SSkinItem_owned__3WvlR"}},77:function(e,t,a){e.exports={btn:"STLogin_btn__3Kn5c",btnForgot:"STLogin_btnForgot__1z5Kc",container:"STLogin_container__2KaZ9",error:"STLogin_error__1NxeV",label:"STLogin_label__3ot6S",title:"STLogin_title__zrpZb"}},82:function(e,t,a){e.exports={collapse:"SNav_collapse__2uCCs",container:"SNav_container__3BYn3",link:"SNav_link__2b-Aa",nav:"SNav_nav__2ju7l",navItem:"SNav_navItem__3yLMc",toggler:"SNav_toggler___z89_"}},83:function(e,t,a){e.exports={container:"SMenuHeader_container__2AI3m",email:"SMenuHeader_email__24phy",image:"SMenuHeader_image__1tOAl",name:"SMenuHeader_name__1VaY3",thumb:"SMenuHeader_thumb__2X4El"}},84:function(e,t,a){e.exports={btn:"SMobileMenu_btn__7TQ_l",container:"SMobileMenu_container__jacuL",linksContainer:"SMobileMenu_linksContainer__2x0sy",menu:"SMobileMenu_menu__1s-WZ",menuAppear:"SMobileMenu_menuAppear__nI2vG",appearing:"SMobileMenu_appearing__1o-EH",menuDissapear:"SMobileMenu_menuDissapear__1w5mU",dissapearing:"SMobileMenu_dissapearing__1bsOp"}},85:function(e,t,a){e.exports={microphone:"SNewComment_microphone__3_DNE",microphoneText:"SNewComment_microphoneText__3dwnG",notRecording:"SNewComment_notRecording__1vp6P",recorderContainer:"SNewComment_recorderContainer__3VwhL",recorded:"SNewComment_recorded__2zZxO",recording:"SNewComment_recording__AsgWS"}},86:function(e,t,a){e.exports={container:"SMobile_container__oh5ja",description:"SMobile_description__14LjU",image:"SMobile_image__117mR",imageContainer:"SMobile_imageContainer__PDg_q",innerContainer:"SMobile_innerContainer__3ytUQ",title:"SMobile_title__1WjAc"}},87:function(e,t,a){e.exports={btn:"SProfilePage_btn__1Wku0",container:"SProfilePage_container__2q-hR",selected:"SProfilePage_selected__1AZjc",options:"SProfilePage_options__pByhO",optContainer:"SProfilePage_optContainer__1jqmL"}},88:function(e,t,a){e.exports={container:"SPCollectableInfoPage_container__2pREu",description:"SPCollectableInfoPage_description__n43HH",descriptionTitle:"SPCollectableInfoPage_descriptionTitle__1RUq-",score:"SPCollectableInfoPage_score__3U68g",scoreIcon:"SPCollectableInfoPage_scoreIcon__1_uQE",title:"SPCollectableInfoPage_title__1O5Jn"}},89:function(e,t,a){e.exports={btn:"SPLogin_btn__2waK7",btnForgot:"SPLogin_btnForgot__3PghZ",container:"SPLogin_container__3hPDj",error:"SPLogin_error__h3n93",label:"SPLogin_label__3v4FC"}},95:function(e,t,a){e.exports={bar:"SHeaderBar_bar__1eNh0",logo:"SHeaderBar_logo__3n5pz",navbrand:"SHeaderBar_navbrand__1-Xwa",patientBar:"SHeaderBar_patientBar__3eQ_s",standardBar:"SHeaderBar_standardBar__3xag7"}},97:function(e,t,a){e.exports={container:"SLandingPage_container__K3tRn",features:"SLandingPage_features__21L35",featuresTitle:"SLandingPage_featuresTitle__MBjjQ",mainIdea:"SLandingPage_mainIdea__1bR4Q",mainPhrase:"SLandingPage_mainPhrase__1dI-F"}},98:function(e,t,a){e.exports={container:"SFeature_container__3-EK4",description:"SFeature_description__3okm9",infoContainer:"SFeature_infoContainer__zhU2k",logo:"SFeature_logo__fkInR",title:"SFeature_title__3GzMp"}},99:function(e,t,a){e.exports={container:"SInfoPanel_container__9gJML",infoText:"SInfoPanel_infoText__19t9A",label:"SInfoPanel_label__2j784"}}},[[466,1,2]]]);
//# sourceMappingURL=main.530249cd.chunk.js.map